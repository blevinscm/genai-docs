
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
        <link rel="canonical" href="https://blevinscm.github.com/genai-docs/model-reference/Gen-AI-evaluation-service-API/">
      
      
      
      
      <link rel="icon" href="../../assets/google-cloud-vertex-ai.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.6.14">
    
    
      
        <title>Gen AI Evaluation Service Api - Vertex Generative AI</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.342714a4.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Google+Sans:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Google Sans";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../stylesheets/extra.css">
    
      <link rel="stylesheet" href="../../js/chat-widget/chat-widget.css">
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="black" data-md-color-accent="light-blue">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#gen-ai-evaluation-service-api" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="Vertex Generative AI" class="md-header__button md-logo" aria-label="Vertex Generative AI" data-md-component="logo">
      
  <img src="../../assets/google-cloud-vertex-ai.png" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Vertex Generative AI
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Gen AI Evaluation Service Api
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="default" data-md-color-primary="black" data-md-color-accent="light-blue"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a4 4 0 0 0-4 4 4 4 0 0 0 4 4 4 4 0 0 0 4-4 4 4 0 0 0-4-4m0 10a6 6 0 0 1-6-6 6 6 0 0 1 6-6 6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="slate" data-md-color-primary="black" data-md-color-accent="light-blue"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 18c-.89 0-1.74-.2-2.5-.55C11.56 16.5 13 14.42 13 12s-1.44-4.5-3.5-5.45C10.26 6.2 11.11 6 12 6a6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
        <div class="md-search__suggest" data-md-component="search-suggest"></div>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
      <div class="md-header__source">
        <a href="https://github.com/blevinscm/genai-docs" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8M97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
            
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../.." class="md-tabs__link">
        
  
  
    
  
  Home

      </a>
    </li>
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../Generative-AI-on-Vertex-AI-Cookbook/" class="md-tabs__link">
          
  
  
    
  
  Learn

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../agent-engine/Set-up-the-environment/" class="md-tabs__link">
          
  
  
    
  
  Build

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../models/Introduction-to-tuning/" class="md-tabs__link">
          
  
  
    
  
  Tune

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../deploy/Deploy-generative-AI-models/" class="md-tabs__link">
          
  
  
    
  
  Deploy

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../agent-engine/manage/Manage-deployed-agents/" class="md-tabs__link">
          
  
  
    
  
  Manage

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../models/evaluation-overview/" class="md-tabs__link">
          
  
  
    
  
  Optimize

        </a>
      </li>
    
  

      
    </ul>
  </div>
</nav>
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="Vertex Generative AI" class="md-nav__button md-logo" aria-label="Vertex Generative AI" data-md-component="logo">
      
  <img src="../../assets/google-cloud-vertex-ai.png" alt="logo">

    </a>
    Vertex Generative AI
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/blevinscm/genai-docs" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8M97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Home
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" >
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Learn
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            Learn
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Generative-AI-on-Vertex-AI-Cookbook/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Vertex AI Generative AI Overview
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Generative-AI-glossary/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Glossary
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Generative-AI-on-Vertex-AI-release-notes/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Release Notes
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../supported-models_1/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Supported Models Overview
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../gemini/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Gemini Models Overview
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../image/Imagen-on-Vertex-AI/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Imagen Models Overview
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../code/code-models-overview/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Code Models Overview
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../intelligent-code-commenter/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Intelligent Code Commenter
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../open-models/Use-Gemma-open-models/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Open Models (Gemma, Llama)
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../partner-models/use-partner-models/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Partner Models (Claude, AI21)
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../learn/prompts/Introduction-to-prompting/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Introduction to Prompting
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../learn/prompts/Overview-of-prompting-strategies/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Prompting Strategies
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../multimodal/Design-multimodal-prompts/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Multimodal Concepts
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../embeddings/Choose-an-embeddings-task-type/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Embeddings Overview
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../multimodal/Introduction-to-function-calling/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Function Calling Overview
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../grounding/Ground-responses-using-RAG/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Grounding Overview
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../agent-builder/Vertex-AI-Agent-Builder-overview/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Agent Builder Overview
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../agent-engine/Vertex-AI-Agent-Engine-overview/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Agent Engine Overview
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../rag-engine/Vertex-AI-RAG-Engine-overview/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    RAG Engine Overview
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../context-cache/Context-caching-overview/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Context Caching Overview
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../extensions/Extensions-overview/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Extensions Overview
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../example-store/Example-Store-overview/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Example Store Overview
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Generative-AI-and-data-governance/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Data Governance
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Security-controls-for-Generative-AI/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Security & Safety
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../deprecations/Model-versions-and-lifecycle/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Deprecations & Lifecycle
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../getting-help_1/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Getting Help
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" >
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Build
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            Build
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../agent-engine/Set-up-the-environment/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Set up Environment (Agent Engine)
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../agent-engine/develop/Develop-a-LangChain-agent/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Develop LangChain Agent
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../agent-engine/develop/Develop-an-Agent-Development-Kit-agent/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Develop ADK Agent
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../agent-engine/use/Use-a-LangChain-agent/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Use LangChain Agent
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../agent-engine/use/Use-a-LangGraph-agent/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Use LangGraph Agent
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../chat/Design-chat-prompts/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Design Chat Prompts
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../multimodal/Text-generationbookmark_borderbookmark/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Generate Text with Gemini
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../image/Generate-images-using-text-prompts/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Generate Images with Imagen
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Generate-images-with-Gemini/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Generate Images with Gemini
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../video/generate-videos/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Generate Video with Veo
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../embeddings/Get-batch-text-embeddings-predictions/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Get Text Embeddings
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../embeddings/Get-multimodal-embeddings/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Get Multimodal Embeddings
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Function-calling-reference/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Use Function Calling
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../grounding/Use-Google-Search-suggestions/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Use Grounding (Google Search)
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../grounding/Grounding-with-your-data/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Use Grounding (Your Data)
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../rag-engine/Use-data-ingestion-with-Vertex-AI-RAG-Engine/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Build with RAG Engine (Data Ingestion)
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../rag-engine/use-vertexai-vector-search/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Build with RAG Engine (Vector Search)
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Use-a-Weaviate-database-with-Vertex-AI-RAG-Engine/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Build with RAG Engine (Weaviate)
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../context-cache/Create-a-context-cache/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Create Context Cache
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../extensions/Create-and-run-extensions/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Create Extensions
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../example-store/Retrieve-examples/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Use Example Store
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../multimodal/audio-understanding/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Multimodal Audio Understanding
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../multimodal/Document-understanding/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Multimodal Document Understanding
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../multimodal/Video-understanding/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Multimodal Video Understanding
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../prompt-gallery/samples/summarize_summarize_video/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Prompt Gallery Samples
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" >
        
          
          <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Tune
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            Tune
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../models/Introduction-to-tuning/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Introduction to Model Tuning
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../models/About-supervised-fine-tuning-for-Gemini-models/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Tune Gemini Models (Supervised)
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../models/gemini-supervised-tuning-prepare/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Prepare Data for Gemini SFT
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../models/tune_gemini/text_tune/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Tune Gemini for Text
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../image/Style-customization/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Tune Imagen Models (Style/Subject)
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../models/Tune-function-calling/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Tune Function Calling
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../model-garden/LoRA-and-QLoRA-recommendations-for-LLMs/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    LoRA & QLoRA Recommendations
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Fine-tune-RAG-transformations/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Fine-tune RAG Transformations
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5" >
        
          
          <label class="md-nav__link" for="__nav_5" id="__nav_5_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Deploy
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5">
            <span class="md-nav__icon md-icon"></span>
            Deploy
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../deploy/Deploy-generative-AI-models/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Deploy Generative AI Models
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../agent-engine/deploy/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Deploy Agent (Agent Engine)
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../models/Deployments-and-endpoints/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Deployments and Endpoints
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../model-garden/Use-models-in-Model-Garden/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Use Models from Model Garden
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Purchase-Provisioned-Throughput/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Purchase Provisioned Throughput
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Use-Provisioned-Throughput/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Use Provisioned Throughput
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../migrate/Migrate-to-the-Gemini-API-from-Azure-OpenAI/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Migrate from Azure OpenAI
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../migrate/openai/Using-OpenAI-libraries-with-Vertex-AI/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Use OpenAI Libraries with Vertex AI
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6" >
        
          
          <label class="md-nav__link" for="__nav_6" id="__nav_6_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Manage
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6">
            <span class="md-nav__icon md-icon"></span>
            Manage
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../agent-engine/manage/Manage-deployed-agents/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Manage Deployed Agents
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../agent-engine/manage/logging/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Agent Logging
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../agent-engine/manage/monitoring/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Agent Monitoring
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../agent-engine/sessions/Manage-sessions-using-direct-API-calls/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Manage Agent Sessions (API)
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../agent-engine/sessions/Manage-sessions-with-Agent-Development-Kit/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Manage Agent Sessions (ADK)
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../context-cache/Get-information-about-a-context-cache/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Manage Context Cache (Get/Delete)
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Manage-your-RAG-knowledge-base-corpus/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Manage RAG Corpus
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../learn/Model-monitoring-metrics/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Model Monitoring Metrics
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../quotas/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Quotas & Limits
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../agent-engine/troubleshooting/Troubleshoot-deploying-an-agent/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Troubleshoot Agent Deployment
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../agent-engine/troubleshooting/Troubleshoot-developing-an-agent/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Troubleshoot Agent Development
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_7" >
        
          
          <label class="md-nav__link" for="__nav_7" id="__nav_7_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Optimize
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_7_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_7">
            <span class="md-nav__icon md-icon"></span>
            Optimize
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../models/evaluation-overview/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Model Evaluation Overview
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../models/Gen-AI-evaluation-service-overview/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Gen AI Evaluation Service
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../models/Run-AutoSxS-pipeline-to-perform-pairwise-model-based-evaluation/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Run AutoSxS (Pairwise Evaluation)
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../models/Evaluate-Gen-AI-agents/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Evaluate Agents
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../learn/prompts/Optimize-promptsbookmark_borderbookmark/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Optimize Prompts
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Retrieval-and-ranking/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    RAG Retrieval and Ranking
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Vertex-AI-Model-Optimizer/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Vertex AI Model Optimizer
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../provisioned-throughput/Calculate-Provisioned-Throughput-requirements/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Calculate Provisioned Throughput
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../count-tokens/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Count Tokens
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../context-cache/Context-caching-overview/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Context Caching Overview
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#example-syntax" class="md-nav__link">
    <span class="md-ellipsis">
      Example syntax
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Example syntax">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#curl" class="md-nav__link">
    <span class="md-ellipsis">
      curl
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#python" class="md-nav__link">
    <span class="md-ellipsis">
      Python
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#parameter-list" class="md-nav__link">
    <span class="md-ellipsis">
      Parameter list
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Parameter list">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#exactmatchinput" class="md-nav__link">
    <span class="md-ellipsis">
      ExactMatchInput
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#exactmatchresults" class="md-nav__link">
    <span class="md-ellipsis">
      ExactMatchResults
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#bleuinput" class="md-nav__link">
    <span class="md-ellipsis">
      BleuInput
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#bleuresults" class="md-nav__link">
    <span class="md-ellipsis">
      BleuResults
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#rougeinput" class="md-nav__link">
    <span class="md-ellipsis">
      RougeInput
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#rougeresults" class="md-nav__link">
    <span class="md-ellipsis">
      RougeResults
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#fluencyinput" class="md-nav__link">
    <span class="md-ellipsis">
      FluencyInput
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#fluencyresult" class="md-nav__link">
    <span class="md-ellipsis">
      FluencyResult
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#coherenceinput" class="md-nav__link">
    <span class="md-ellipsis">
      CoherenceInput
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#coherenceresult" class="md-nav__link">
    <span class="md-ellipsis">
      CoherenceResult
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#safetyinput" class="md-nav__link">
    <span class="md-ellipsis">
      SafetyInput
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#safetyresult" class="md-nav__link">
    <span class="md-ellipsis">
      SafetyResult
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#groundednessinput" class="md-nav__link">
    <span class="md-ellipsis">
      GroundednessInput
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#groundednessresult" class="md-nav__link">
    <span class="md-ellipsis">
      GroundednessResult
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#fulfillmentinput" class="md-nav__link">
    <span class="md-ellipsis">
      FulfillmentInput
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#fulfillmentresult" class="md-nav__link">
    <span class="md-ellipsis">
      FulfillmentResult
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#summarizationqualityinput" class="md-nav__link">
    <span class="md-ellipsis">
      SummarizationQualityInput
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#summarizationqualityresult" class="md-nav__link">
    <span class="md-ellipsis">
      SummarizationQualityResult
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pairwisesummarizationqualityinput" class="md-nav__link">
    <span class="md-ellipsis">
      PairwiseSummarizationQualityInput
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pairwisesummarizationqualityresult" class="md-nav__link">
    <span class="md-ellipsis">
      PairwiseSummarizationQualityResult
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#summarizationhelpfulnessinput" class="md-nav__link">
    <span class="md-ellipsis">
      SummarizationHelpfulnessInput
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#summarizationhelpfulnessresult" class="md-nav__link">
    <span class="md-ellipsis">
      SummarizationHelpfulnessResult
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#summarizationverbosityinput" class="md-nav__link">
    <span class="md-ellipsis">
      SummarizationVerbosityInput
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#summarizationverbosityresult" class="md-nav__link">
    <span class="md-ellipsis">
      SummarizationVerbosityResult
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#questionansweringqualityinput" class="md-nav__link">
    <span class="md-ellipsis">
      QuestionAnsweringQualityInput
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#questionansweringqualityresult" class="md-nav__link">
    <span class="md-ellipsis">
      QuestionAnsweringQualityResult
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pairwisequestionansweringqualityinput" class="md-nav__link">
    <span class="md-ellipsis">
      PairwiseQuestionAnsweringQualityInput
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pairwisequestionansweringqualityresult" class="md-nav__link">
    <span class="md-ellipsis">
      PairwiseQuestionAnsweringQualityResult
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#questionansweringrelevanceinput" class="md-nav__link">
    <span class="md-ellipsis">
      QuestionAnsweringRelevanceInput
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#questionansweringrelevancyresult" class="md-nav__link">
    <span class="md-ellipsis">
      QuestionAnsweringRelevancyResult
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#questionansweringhelpfulnessinput" class="md-nav__link">
    <span class="md-ellipsis">
      QuestionAnsweringHelpfulnessInput
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#questionansweringhelpfulnessresult" class="md-nav__link">
    <span class="md-ellipsis">
      QuestionAnsweringHelpfulnessResult
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#questionansweringcorrectnessinput" class="md-nav__link">
    <span class="md-ellipsis">
      QuestionAnsweringCorrectnessInput
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#questionansweringcorrectnessresult" class="md-nav__link">
    <span class="md-ellipsis">
      QuestionAnsweringCorrectnessResult
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pointwisemetricinput" class="md-nav__link">
    <span class="md-ellipsis">
      PointwiseMetricInput
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pointwisemetricresult" class="md-nav__link">
    <span class="md-ellipsis">
      PointwiseMetricResult
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pairwisemetricinput" class="md-nav__link">
    <span class="md-ellipsis">
      PairwiseMetricInput
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pairwisemetricresult" class="md-nav__link">
    <span class="md-ellipsis">
      PairwiseMetricResult
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#toolcallvalidinput" class="md-nav__link">
    <span class="md-ellipsis">
      ToolCallValidInput
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#toolcallvalidresults" class="md-nav__link">
    <span class="md-ellipsis">
      ToolCallValidResults
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#toolnamematchinput" class="md-nav__link">
    <span class="md-ellipsis">
      ToolNameMatchInput
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#toolnamematchresults" class="md-nav__link">
    <span class="md-ellipsis">
      ToolNameMatchResults
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#toolparameterkeymatchinput" class="md-nav__link">
    <span class="md-ellipsis">
      ToolParameterKeyMatchInput
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#toolparameterkeymatchresults" class="md-nav__link">
    <span class="md-ellipsis">
      ToolParameterKeyMatchResults
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#toolparameterkvmatchinput" class="md-nav__link">
    <span class="md-ellipsis">
      ToolParameterKVMatchInput
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#toolparameterkvmatchresults" class="md-nav__link">
    <span class="md-ellipsis">
      ToolParameterKVMatchResults
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#cometinput" class="md-nav__link">
    <span class="md-ellipsis">
      CometInput
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#cometresult" class="md-nav__link">
    <span class="md-ellipsis">
      CometResult
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#metricxinput" class="md-nav__link">
    <span class="md-ellipsis">
      MetricxInput
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#metricxresult" class="md-nav__link">
    <span class="md-ellipsis">
      MetricxResult
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#examples" class="md-nav__link">
    <span class="md-ellipsis">
      Examples
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Examples">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#evaluate-an-output" class="md-nav__link">
    <span class="md-ellipsis">
      Evaluate an output
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#python_1" class="md-nav__link">
    <span class="md-ellipsis">
      Python
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#go" class="md-nav__link">
    <span class="md-ellipsis">
      Go
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#evaluate-an-output-pairwise-summarization-quality" class="md-nav__link">
    <span class="md-ellipsis">
      Evaluate an output: pairwise summarization quality
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#rest" class="md-nav__link">
    <span class="md-ellipsis">
      REST
    </span>
  </a>
  
    <nav class="md-nav" aria-label="REST">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#curl_1" class="md-nav__link">
    <span class="md-ellipsis">
      curl
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#powershell" class="md-nav__link">
    <span class="md-ellipsis">
      PowerShell
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#python_2" class="md-nav__link">
    <span class="md-ellipsis">
      Python
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#vertex-ai-sdk-for-python" class="md-nav__link">
    <span class="md-ellipsis">
      Vertex AI SDK for Python
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#go_1" class="md-nav__link">
    <span class="md-ellipsis">
      Go
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#go_2" class="md-nav__link">
    <span class="md-ellipsis">
      Go
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#get-rouge-score" class="md-nav__link">
    <span class="md-ellipsis">
      Get ROUGE score
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Get ROUGE score">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#rest_1" class="md-nav__link">
    <span class="md-ellipsis">
      REST
    </span>
  </a>
  
    <nav class="md-nav" aria-label="REST">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#curl_2" class="md-nav__link">
    <span class="md-ellipsis">
      curl
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#powershell_1" class="md-nav__link">
    <span class="md-ellipsis">
      PowerShell
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#python_3" class="md-nav__link">
    <span class="md-ellipsis">
      Python
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#vertex-ai-sdk-for-python_1" class="md-nav__link">
    <span class="md-ellipsis">
      Vertex AI SDK for Python
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#go_3" class="md-nav__link">
    <span class="md-ellipsis">
      Go
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#go_4" class="md-nav__link">
    <span class="md-ellipsis">
      Go
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#whats-next" class="md-nav__link">
    <span class="md-ellipsis">
      What's next
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


  
    <a href="https://github.com/blevinscm/genai-docs/edit/main/docs/model-reference/Gen-AI-evaluation-service-API.md" title="Edit this page" class="md-content__button md-icon">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20.71 7.04c.39-.39.39-1.04 0-1.41l-2.34-2.34c-.37-.39-1.02-.39-1.41 0l-1.84 1.83 3.75 3.75M3 17.25V21h3.75L17.81 9.93l-3.75-3.75z"/></svg>
    </a>
  
  


<h1 id="gen-ai-evaluation-service-api">Gen AI evaluation service API<a class="headerlink" href="#gen-ai-evaluation-service-api" title="Permanent link">&para;</a></h1>
<p>The Gen AI evaluation service lets you evaluate
your large language models (LLMs) across several metrics with your own criteria.
You can provide inference-time inputs, LLM responses and additional
parameters, and the Gen AI evaluation service returns metrics specific to the
evaluation task.</p>
<p>Metrics include model-based metrics, such as <code>PointwiseMetric</code> and <code>PairwiseMetric</code>, and in-memory
computed metrics, such as <code>rouge</code>, <code>bleu</code>, and tool function-call metrics.
<code>PointwiseMetric</code> and <code>PairwiseMetric</code> are generic model-based metrics that
you can customize with your own criteria.
Because the service takes the prediction results directly from models as input,
the evaluation service can perform both inference and subsequent evaluation on
all models supported by
Vertex AI.</p>
<p>For more information on evaluating a model, see <a href="../../models/evaluation-overview/">Gen AI evaluation service overview</a>.</p>
<p><strong>Limitations</strong></p>
<p>The following are limitations of the evaluation service:</p>
<ul>
<li>The evaluation service may have a propagation delay in your first call.</li>
<li>Most model-based metrics consume
 <a href="../../quotas/">gemini-2.0-flash quota</a>
 because the Gen AI evaluation service leverages <code>gemini-2.0-flash</code> as the underlying
 judge model to compute these model-based metrics.</li>
<li>Some model-based metrics, such as MetricX and COMET, use different
 machine learning models, so they don't consume
 <a href="../../quotas/">gemini-2.0-flash quota</a>.</li>
</ul>
<p><strong>Note:</strong> MetricX and COMET will be not be charged during preview. At GA, the pricing will be the same as all pointwise model based metrics.</p>
<h2 id="example-syntax">Example syntax<a class="headerlink" href="#example-syntax" title="Permanent link">&para;</a></h2>
<p>Syntax to send an evaluation call.</p>
<h3 id="curl">curl<a class="headerlink" href="#curl" title="Permanent link">&para;</a></h3>
<div class="language-python highlight"><pre><span></span><code><span id="__span-0-1"><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a><span class="n">curl</span> <span class="o">-</span><span class="n">X</span> <span class="n">POST</span> \
</span><span id="__span-0-2"><a id="__codelineno-0-2" name="__codelineno-0-2" href="#__codelineno-0-2"></a> <span class="o">-</span><span class="n">H</span> <span class="s2">&quot;Authorization: Bearer $(gcloud auth print-access-token)&quot;</span> \
</span><span id="__span-0-3"><a id="__codelineno-0-3" name="__codelineno-0-3" href="#__codelineno-0-3"></a> <span class="o">-</span><span class="n">H</span> <span class="s2">&quot;Content-Type: application/json&quot;</span> \
</span><span id="__span-0-4"><a id="__codelineno-0-4" name="__codelineno-0-4" href="#__codelineno-0-4"></a>
</span><span id="__span-0-5"><a id="__codelineno-0-5" name="__codelineno-0-5" href="#__codelineno-0-5"></a><span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="err">$</span><span class="p">{</span><span class="n">LOCATION</span><span class="p">}</span><span class="o">-</span><span class="n">aiplatform</span><span class="o">.</span><span class="n">googleapis</span><span class="o">.</span><span class="n">com</span><span class="o">/</span><span class="n">v1</span><span class="o">/</span><span class="n">projects</span><span class="o">/</span><span class="err">$</span><span class="p">{</span><span class="n">PROJECT_ID</span><span class="p">}</span><span class="o">/</span><span class="n">locations</span><span class="o">/</span><span class="err">$</span><span class="p">{</span><span class="n">LOCATION</span><span class="p">}:</span><span class="n">evaluateInstances</span> \
</span><span id="__span-0-6"><a id="__codelineno-0-6" name="__codelineno-0-6" href="#__codelineno-0-6"></a><span class="o">-</span><span class="n">d</span> <span class="s1">&#39;{</span>
</span><span id="__span-0-7"><a id="__codelineno-0-7" name="__codelineno-0-7" href="#__codelineno-0-7"></a> <span class="s2">&quot;pointwise_metric_input&quot;</span> <span class="p">:</span> <span class="p">{</span>
</span><span id="__span-0-8"><a id="__codelineno-0-8" name="__codelineno-0-8" href="#__codelineno-0-8"></a> <span class="s2">&quot;metric_spec&quot;</span> <span class="p">:</span> <span class="p">{</span>
</span><span id="__span-0-9"><a id="__codelineno-0-9" name="__codelineno-0-9" href="#__codelineno-0-9"></a> <span class="o">...</span>
</span><span id="__span-0-10"><a id="__codelineno-0-10" name="__codelineno-0-10" href="#__codelineno-0-10"></a> <span class="p">},</span>
</span><span id="__span-0-11"><a id="__codelineno-0-11" name="__codelineno-0-11" href="#__codelineno-0-11"></a> <span class="s2">&quot;instance&quot;</span><span class="p">:</span> <span class="p">{</span>
</span><span id="__span-0-12"><a id="__codelineno-0-12" name="__codelineno-0-12" href="#__codelineno-0-12"></a> <span class="o">...</span>
</span><span id="__span-0-13"><a id="__codelineno-0-13" name="__codelineno-0-13" href="#__codelineno-0-13"></a> <span class="p">},</span>
</span><span id="__span-0-14"><a id="__codelineno-0-14" name="__codelineno-0-14" href="#__codelineno-0-14"></a> <span class="p">}</span>
</span><span id="__span-0-15"><a id="__codelineno-0-15" name="__codelineno-0-15" href="#__codelineno-0-15"></a><span class="p">}</span><span class="s1">&#39;</span>
</span></code></pre></div>
<h3 id="python">Python<a class="headerlink" href="#python" title="Permanent link">&para;</a></h3>
<div class="language-python highlight"><pre><span></span><code><span id="__span-1-1"><a id="__codelineno-1-1" name="__codelineno-1-1" href="#__codelineno-1-1"></a><span class="kn">import</span><span class="w"> </span><span class="nn">json</span>
</span><span id="__span-1-2"><a id="__codelineno-1-2" name="__codelineno-1-2" href="#__codelineno-1-2"></a>
</span><span id="__span-1-3"><a id="__codelineno-1-3" name="__codelineno-1-3" href="#__codelineno-1-3"></a><span class="kn">from</span><span class="w"> </span><span class="nn">google</span><span class="w"> </span><span class="kn">import</span> <span class="n">auth</span>
</span><span id="__span-1-4"><a id="__codelineno-1-4" name="__codelineno-1-4" href="#__codelineno-1-4"></a><span class="kn">from</span><span class="w"> </span><span class="nn">google.api_core</span><span class="w"> </span><span class="kn">import</span> <span class="n">exceptions</span>
</span><span id="__span-1-5"><a id="__codelineno-1-5" name="__codelineno-1-5" href="#__codelineno-1-5"></a><span class="kn">from</span><span class="w"> </span><span class="nn">google.auth.transport</span><span class="w"> </span><span class="kn">import</span> <span class="n">requests</span> <span class="k">as</span> <span class="n">google_auth_requests</span>
</span><span id="__span-1-6"><a id="__codelineno-1-6" name="__codelineno-1-6" href="#__codelineno-1-6"></a>
</span><span id="__span-1-7"><a id="__codelineno-1-7" name="__codelineno-1-7" href="#__codelineno-1-7"></a><span class="n">creds</span><span class="p">,</span> <span class="n">_</span> <span class="o">=</span> <span class="n">auth</span><span class="o">.</span><span class="n">default</span><span class="p">(</span>
</span><span id="__span-1-8"><a id="__codelineno-1-8" name="__codelineno-1-8" href="#__codelineno-1-8"></a> <span class="n">scopes</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;https://www.googleapis.com/auth/cloud-platform&#39;</span><span class="p">])</span>
</span><span id="__span-1-9"><a id="__codelineno-1-9" name="__codelineno-1-9" href="#__codelineno-1-9"></a>
</span><span id="__span-1-10"><a id="__codelineno-1-10" name="__codelineno-1-10" href="#__codelineno-1-10"></a><span class="n">data</span> <span class="o">=</span> <span class="p">{</span>
</span><span id="__span-1-11"><a id="__codelineno-1-11" name="__codelineno-1-11" href="#__codelineno-1-11"></a> <span class="o">...</span>
</span><span id="__span-1-12"><a id="__codelineno-1-12" name="__codelineno-1-12" href="#__codelineno-1-12"></a><span class="p">}</span>
</span><span id="__span-1-13"><a id="__codelineno-1-13" name="__codelineno-1-13" href="#__codelineno-1-13"></a>
</span><span id="__span-1-14"><a id="__codelineno-1-14" name="__codelineno-1-14" href="#__codelineno-1-14"></a><span class="n">uri</span> <span class="o">=</span> <span class="sa">f</span><span class="s1">&#39;https://$</span><span class="si">{</span><span class="n">LOCATION</span><span class="si">}</span><span class="s1">-aiplatform.googleapis.com/v1/projects/$</span><span class="si">{</span><span class="n">PROJECT_ID</span><span class="si">}</span><span class="s1">/locations/$</span><span class="si">{</span><span class="n">LOCATION</span><span class="si">}</span><span class="s1">:evaluateInstances&#39;</span>
</span><span id="__span-1-15"><a id="__codelineno-1-15" name="__codelineno-1-15" href="#__codelineno-1-15"></a><span class="n">result</span> <span class="o">=</span> <span class="n">google_auth_requests</span><span class="o">.</span><span class="n">AuthorizedSession</span><span class="p">(</span><span class="n">creds</span><span class="p">)</span><span class="o">.</span><span class="n">post</span><span class="p">(</span><span class="n">uri</span><span class="p">,</span> <span class="n">json</span><span class="o">=</span><span class="n">data</span><span class="p">)</span>
</span><span id="__span-1-16"><a id="__codelineno-1-16" name="__codelineno-1-16" href="#__codelineno-1-16"></a>
</span><span id="__span-1-17"><a id="__codelineno-1-17" name="__codelineno-1-17" href="#__codelineno-1-17"></a><span class="nb">print</span><span class="p">(</span><span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">result</span><span class="o">.</span><span class="n">json</span><span class="p">(),</span> <span class="n">indent</span><span class="o">=</span><span class="mi">2</span><span class="p">))</span>
</span></code></pre></div>
<h2 id="parameter-list">Parameter list<a class="headerlink" href="#parameter-list" title="Permanent link">&para;</a></h2>
<table>
<thead>
<tr>
<th>Parameters</th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td><code>exact_match_input</code></td>
<td>Optional: <code>ExactMatchInput</code> Input to assess if the prediction matches the reference exactly.</td>
</tr>
<tr>
<td><code>bleu_input</code></td>
<td>Optional: <code>BleuInput</code> Input to compute BLEU score by comparing the prediction against the reference.</td>
</tr>
<tr>
<td><code>rouge_input</code></td>
<td>Optional: <code>RougeInput</code> Input to compute <code>rouge</code> scores by comparing the prediction against the reference. Different <code>rouge</code> scores are supported by <code>rouge_type</code>.</td>
</tr>
<tr>
<td><code>fluency_input</code></td>
<td>Optional: <code>FluencyInput</code> Input to assess a single response's language mastery.</td>
</tr>
<tr>
<td><code>coherence_input</code></td>
<td>Optional: <code>CoherenceInput</code> Input to assess a single response's ability to provide a coherent, easy-to-follow reply.</td>
</tr>
<tr>
<td><code>safety_input</code></td>
<td>Optional: <code>SafetyInput</code> Input to assess a single response's level of safety.</td>
</tr>
<tr>
<td><code>groundedness_input</code></td>
<td>Optional: <code>GroundednessInput</code> Input to assess a single response's ability to provide or reference information included only in the input text.</td>
</tr>
<tr>
<td><code>fulfillment_input</code></td>
<td>Optional: <code>FulfillmentInput</code> Input to assess a single response's ability to completely fulfill instructions.</td>
</tr>
<tr>
<td><code>summarization_quality_input</code></td>
<td>Optional: <code>SummarizationQualityInput</code> Input to assess a single response's overall ability to summarize text.</td>
</tr>
<tr>
<td><code>pairwise_summarization_quality_input</code></td>
<td>Optional: <code>PairwiseSummarizationQualityInput</code> Input to compare two responses' overall summarization quality.</td>
</tr>
<tr>
<td><code>summarization_helpfulness_input</code></td>
<td>Optional: <code>SummarizationHelpfulnessInput</code> Input to assess a single response's ability to provide a summarization, which contains the details necessary to substitute the original text.</td>
</tr>
<tr>
<td><code>summarization_verbosity_input</code></td>
<td>Optional: <code>SummarizationVerbosityInput</code> Input to assess a single response's ability to provide a succinct summarization.</td>
</tr>
<tr>
<td><code>question_answering_quality_input</code></td>
<td>Optional: <code>QuestionAnsweringQualityInput</code> Input to assess a single response's overall ability to answer questions, given a body of text to reference.</td>
</tr>
<tr>
<td><code>pairwise_question_answering_quality_input</code></td>
<td>Optional: <code>PairwiseQuestionAnsweringQualityInput</code> Input to compare two responses' overall ability to answer questions, given a body of text to reference.</td>
</tr>
<tr>
<td><code>question_answering_relevance_input</code></td>
<td>Optional: <code>QuestionAnsweringRelevanceInput</code> Input to assess a single response's ability to respond with relevant information when asked a question.</td>
</tr>
<tr>
<td><code>question_answering_helpfulness_input</code></td>
<td>Optional: <code>QuestionAnsweringHelpfulnessInput</code> Input to assess a single response's ability to provide key details when answering a question.</td>
</tr>
<tr>
<td><code>question_answering_correctness_input</code></td>
<td>Optional: <code>QuestionAnsweringCorrectnessInput</code> Input to assess a single response's ability to correctly answer a question.</td>
</tr>
<tr>
<td><code>pointwise_metric_input</code></td>
<td>Optional: <code>PointwiseMetricInput</code> Input for a generic pointwise evaluation.</td>
</tr>
<tr>
<td><code>pairwise_metric_input</code></td>
<td>Optional: <code>PairwiseMetricInput</code> Input for a generic pairwise evaluation.</td>
</tr>
<tr>
<td><code>tool_call_valid_input</code></td>
<td>Optional: <code>ToolCallValidInput</code> Input to assess a single response's ability to predict a valid tool call.</td>
</tr>
<tr>
<td><code>tool_name_match_input</code></td>
<td>Optional: <code>ToolNameMatchInput</code> Input to assess a single response's ability to predict a tool call with the right tool name.</td>
</tr>
<tr>
<td><code>tool_parameter_key_match_input</code></td>
<td>Optional: <code>ToolParameterKeyMatchInput</code> Input to assess a single response's ability to predict a tool call with correct parameter names.</td>
</tr>
<tr>
<td><code>tool_parameter_kv_match_input</code></td>
<td>Optional: <code>ToolParameterKvMatchInput</code> Input to assess a single response's ability to predict a tool call with correct parameter names and values</td>
</tr>
<tr>
<td><code>comet_input</code></td>
<td>Optional: <code>CometInput</code> Input to evaluate using <a href="https://huggingface.co/Unbabel/wmt22-comet-da">COMET</a>.</td>
</tr>
<tr>
<td><code>metricx_input</code></td>
<td>Optional: <code>MetricxInput</code> Input to evaluate using <a href="https://github.com/google-research/metricx">MetricX</a>.</td>
</tr>
</tbody>
</table>
<h4 id="exactmatchinput"><code>ExactMatchInput</code><a class="headerlink" href="#exactmatchinput" title="Permanent link">&para;</a></h4>
<div class="language-python highlight"><pre><span></span><code><span id="__span-2-1"><a id="__codelineno-2-1" name="__codelineno-2-1" href="#__codelineno-2-1"></a><span class="p">{</span>
</span><span id="__span-2-2"><a id="__codelineno-2-2" name="__codelineno-2-2" href="#__codelineno-2-2"></a> <span class="s2">&quot;exact_match_input&quot;</span><span class="p">:</span> <span class="p">{</span>
</span><span id="__span-2-3"><a id="__codelineno-2-3" name="__codelineno-2-3" href="#__codelineno-2-3"></a> <span class="s2">&quot;metric_spec&quot;</span><span class="p">:</span> <span class="p">{},</span>
</span><span id="__span-2-4"><a id="__codelineno-2-4" name="__codelineno-2-4" href="#__codelineno-2-4"></a> <span class="s2">&quot;instances&quot;</span><span class="p">:</span> <span class="p">[</span>
</span><span id="__span-2-5"><a id="__codelineno-2-5" name="__codelineno-2-5" href="#__codelineno-2-5"></a> <span class="p">{</span>
</span><span id="__span-2-6"><a id="__codelineno-2-6" name="__codelineno-2-6" href="#__codelineno-2-6"></a> <span class="s2">&quot;prediction&quot;</span><span class="p">:</span> <span class="n">string</span><span class="p">,</span>
</span><span id="__span-2-7"><a id="__codelineno-2-7" name="__codelineno-2-7" href="#__codelineno-2-7"></a> <span class="s2">&quot;reference&quot;</span><span class="p">:</span> <span class="n">string</span>
</span><span id="__span-2-8"><a id="__codelineno-2-8" name="__codelineno-2-8" href="#__codelineno-2-8"></a> <span class="p">}</span>
</span><span id="__span-2-9"><a id="__codelineno-2-9" name="__codelineno-2-9" href="#__codelineno-2-9"></a> <span class="p">]</span>
</span><span id="__span-2-10"><a id="__codelineno-2-10" name="__codelineno-2-10" href="#__codelineno-2-10"></a> <span class="p">}</span>
</span><span id="__span-2-11"><a id="__codelineno-2-11" name="__codelineno-2-11" href="#__codelineno-2-11"></a><span class="p">}</span>
</span></code></pre></div>
<table>
<thead>
<tr>
<th>Parameters</th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td><code>metric_spec</code></td>
<td>Optional: <code>ExactMatchSpec</code>. Metric spec, defining the metric's behavior.</td>
</tr>
<tr>
<td><code>instances</code></td>
<td>Optional: <code>ExactMatchInstance[]</code> Evaluation input, consisting of LLM response and reference.</td>
</tr>
<tr>
<td><code>instances.prediction</code></td>
<td>Optional: <code>string</code> LLM response.</td>
</tr>
<tr>
<td><code>instances.reference</code></td>
<td>Optional: <code>string</code> Golden LLM response for reference.</td>
</tr>
</tbody>
</table>
<h4 id="exactmatchresults"><code>ExactMatchResults</code><a class="headerlink" href="#exactmatchresults" title="Permanent link">&para;</a></h4>
<div class="language-python highlight"><pre><span></span><code><span id="__span-3-1"><a id="__codelineno-3-1" name="__codelineno-3-1" href="#__codelineno-3-1"></a><span class="p">{</span>
</span><span id="__span-3-2"><a id="__codelineno-3-2" name="__codelineno-3-2" href="#__codelineno-3-2"></a> <span class="s2">&quot;exact_match_results&quot;</span><span class="p">:</span> <span class="p">{</span>
</span><span id="__span-3-3"><a id="__codelineno-3-3" name="__codelineno-3-3" href="#__codelineno-3-3"></a> <span class="s2">&quot;exact_match_metric_values&quot;</span><span class="p">:</span> <span class="p">[</span>
</span><span id="__span-3-4"><a id="__codelineno-3-4" name="__codelineno-3-4" href="#__codelineno-3-4"></a> <span class="p">{</span>
</span><span id="__span-3-5"><a id="__codelineno-3-5" name="__codelineno-3-5" href="#__codelineno-3-5"></a> <span class="s2">&quot;score&quot;</span><span class="p">:</span> <span class="nb">float</span>
</span><span id="__span-3-6"><a id="__codelineno-3-6" name="__codelineno-3-6" href="#__codelineno-3-6"></a> <span class="p">}</span>
</span><span id="__span-3-7"><a id="__codelineno-3-7" name="__codelineno-3-7" href="#__codelineno-3-7"></a> <span class="p">]</span>
</span><span id="__span-3-8"><a id="__codelineno-3-8" name="__codelineno-3-8" href="#__codelineno-3-8"></a> <span class="p">}</span>
</span><span id="__span-3-9"><a id="__codelineno-3-9" name="__codelineno-3-9" href="#__codelineno-3-9"></a><span class="p">}</span>
</span></code></pre></div>
<table>
<thead>
<tr>
<th>Output</th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td><code>exact_match_metric_values</code></td>
<td><code>ExactMatchMetricValue[]</code> Evaluation results per instance input.</td>
</tr>
<tr>
<td><code>exact_match_metric_values.score</code></td>
<td><code>float</code> One of the following: - <code>0</code>: Instance was not an exact match - <code>1</code>: Exact match</td>
</tr>
</tbody>
</table>
<h4 id="bleuinput"><code>BleuInput</code><a class="headerlink" href="#bleuinput" title="Permanent link">&para;</a></h4>
<div class="language-python highlight"><pre><span></span><code><span id="__span-4-1"><a id="__codelineno-4-1" name="__codelineno-4-1" href="#__codelineno-4-1"></a><span class="p">{</span>
</span><span id="__span-4-2"><a id="__codelineno-4-2" name="__codelineno-4-2" href="#__codelineno-4-2"></a> <span class="s2">&quot;bleu_input&quot;</span><span class="p">:</span> <span class="p">{</span>
</span><span id="__span-4-3"><a id="__codelineno-4-3" name="__codelineno-4-3" href="#__codelineno-4-3"></a> <span class="s2">&quot;metric_spec&quot;</span><span class="p">:</span> <span class="p">{</span>
</span><span id="__span-4-4"><a id="__codelineno-4-4" name="__codelineno-4-4" href="#__codelineno-4-4"></a> <span class="s2">&quot;use_effective_order&quot;</span><span class="p">:</span> <span class="nb">bool</span>
</span><span id="__span-4-5"><a id="__codelineno-4-5" name="__codelineno-4-5" href="#__codelineno-4-5"></a> <span class="p">},</span>
</span><span id="__span-4-6"><a id="__codelineno-4-6" name="__codelineno-4-6" href="#__codelineno-4-6"></a> <span class="s2">&quot;instances&quot;</span><span class="p">:</span> <span class="p">[</span>
</span><span id="__span-4-7"><a id="__codelineno-4-7" name="__codelineno-4-7" href="#__codelineno-4-7"></a> <span class="p">{</span>
</span><span id="__span-4-8"><a id="__codelineno-4-8" name="__codelineno-4-8" href="#__codelineno-4-8"></a> <span class="s2">&quot;prediction&quot;</span><span class="p">:</span> <span class="n">string</span><span class="p">,</span>
</span><span id="__span-4-9"><a id="__codelineno-4-9" name="__codelineno-4-9" href="#__codelineno-4-9"></a> <span class="s2">&quot;reference&quot;</span><span class="p">:</span> <span class="n">string</span>
</span><span id="__span-4-10"><a id="__codelineno-4-10" name="__codelineno-4-10" href="#__codelineno-4-10"></a> <span class="p">}</span>
</span><span id="__span-4-11"><a id="__codelineno-4-11" name="__codelineno-4-11" href="#__codelineno-4-11"></a> <span class="p">]</span>
</span><span id="__span-4-12"><a id="__codelineno-4-12" name="__codelineno-4-12" href="#__codelineno-4-12"></a> <span class="p">}</span>
</span><span id="__span-4-13"><a id="__codelineno-4-13" name="__codelineno-4-13" href="#__codelineno-4-13"></a><span class="p">}</span>
</span></code></pre></div>
<table>
<thead>
<tr>
<th>Parameters</th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td><code>metric_spec</code></td>
<td>Optional: <code>BleuSpec</code> Metric spec, defining the metric's behavior.</td>
</tr>
<tr>
<td><code>metric_spec.use_effective_order</code></td>
<td>Optional: <code>bool</code> Whether to take into account n-gram orders without any match.</td>
</tr>
<tr>
<td><code>instances</code></td>
<td>Optional: <code>BleuInstance[]</code> Evaluation input, consisting of LLM response and reference.</td>
</tr>
<tr>
<td><code>instances.prediction</code></td>
<td>Optional: <code>string</code> LLM response.</td>
</tr>
<tr>
<td><code>instances.reference</code></td>
<td>Optional: <code>string</code> Golden LLM response for reference.</td>
</tr>
</tbody>
</table>
<h4 id="bleuresults"><code>BleuResults</code><a class="headerlink" href="#bleuresults" title="Permanent link">&para;</a></h4>
<div class="language-python highlight"><pre><span></span><code><span id="__span-5-1"><a id="__codelineno-5-1" name="__codelineno-5-1" href="#__codelineno-5-1"></a><span class="p">{</span>
</span><span id="__span-5-2"><a id="__codelineno-5-2" name="__codelineno-5-2" href="#__codelineno-5-2"></a> <span class="s2">&quot;bleu_results&quot;</span><span class="p">:</span> <span class="p">{</span>
</span><span id="__span-5-3"><a id="__codelineno-5-3" name="__codelineno-5-3" href="#__codelineno-5-3"></a> <span class="s2">&quot;bleu_metric_values&quot;</span><span class="p">:</span> <span class="p">[</span>
</span><span id="__span-5-4"><a id="__codelineno-5-4" name="__codelineno-5-4" href="#__codelineno-5-4"></a> <span class="p">{</span>
</span><span id="__span-5-5"><a id="__codelineno-5-5" name="__codelineno-5-5" href="#__codelineno-5-5"></a> <span class="s2">&quot;score&quot;</span><span class="p">:</span> <span class="nb">float</span>
</span><span id="__span-5-6"><a id="__codelineno-5-6" name="__codelineno-5-6" href="#__codelineno-5-6"></a> <span class="p">}</span>
</span><span id="__span-5-7"><a id="__codelineno-5-7" name="__codelineno-5-7" href="#__codelineno-5-7"></a> <span class="p">]</span>
</span><span id="__span-5-8"><a id="__codelineno-5-8" name="__codelineno-5-8" href="#__codelineno-5-8"></a> <span class="p">}</span>
</span><span id="__span-5-9"><a id="__codelineno-5-9" name="__codelineno-5-9" href="#__codelineno-5-9"></a><span class="p">}</span>
</span></code></pre></div>
<table>
<thead>
<tr>
<th>Output</th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td><code>bleu_metric_values</code></td>
<td><code>BleuMetricValue[]</code> Evaluation results per instance input.</td>
</tr>
<tr>
<td><code>bleu_metric_values.score</code></td>
<td><code>float</code>: <code>[0, 1]</code>, where higher scores mean the prediction is more like the reference.</td>
</tr>
</tbody>
</table>
<h4 id="rougeinput"><code>RougeInput</code><a class="headerlink" href="#rougeinput" title="Permanent link">&para;</a></h4>
<div class="language-python highlight"><pre><span></span><code><span id="__span-6-1"><a id="__codelineno-6-1" name="__codelineno-6-1" href="#__codelineno-6-1"></a><span class="p">{</span>
</span><span id="__span-6-2"><a id="__codelineno-6-2" name="__codelineno-6-2" href="#__codelineno-6-2"></a> <span class="s2">&quot;rouge_input&quot;</span><span class="p">:</span> <span class="p">{</span>
</span><span id="__span-6-3"><a id="__codelineno-6-3" name="__codelineno-6-3" href="#__codelineno-6-3"></a> <span class="s2">&quot;metric_spec&quot;</span><span class="p">:</span> <span class="p">{</span>
</span><span id="__span-6-4"><a id="__codelineno-6-4" name="__codelineno-6-4" href="#__codelineno-6-4"></a> <span class="s2">&quot;rouge_type&quot;</span><span class="p">:</span> <span class="n">string</span><span class="p">,</span>
</span><span id="__span-6-5"><a id="__codelineno-6-5" name="__codelineno-6-5" href="#__codelineno-6-5"></a> <span class="s2">&quot;use_stemmer&quot;</span><span class="p">:</span> <span class="nb">bool</span><span class="p">,</span>
</span><span id="__span-6-6"><a id="__codelineno-6-6" name="__codelineno-6-6" href="#__codelineno-6-6"></a> <span class="s2">&quot;split_summaries&quot;</span><span class="p">:</span> <span class="nb">bool</span>
</span><span id="__span-6-7"><a id="__codelineno-6-7" name="__codelineno-6-7" href="#__codelineno-6-7"></a> <span class="p">},</span>
</span><span id="__span-6-8"><a id="__codelineno-6-8" name="__codelineno-6-8" href="#__codelineno-6-8"></a> <span class="s2">&quot;instances&quot;</span><span class="p">:</span> <span class="p">[</span>
</span><span id="__span-6-9"><a id="__codelineno-6-9" name="__codelineno-6-9" href="#__codelineno-6-9"></a> <span class="p">{</span>
</span><span id="__span-6-10"><a id="__codelineno-6-10" name="__codelineno-6-10" href="#__codelineno-6-10"></a> <span class="s2">&quot;prediction&quot;</span><span class="p">:</span> <span class="n">string</span><span class="p">,</span>
</span><span id="__span-6-11"><a id="__codelineno-6-11" name="__codelineno-6-11" href="#__codelineno-6-11"></a> <span class="s2">&quot;reference&quot;</span><span class="p">:</span> <span class="n">string</span>
</span><span id="__span-6-12"><a id="__codelineno-6-12" name="__codelineno-6-12" href="#__codelineno-6-12"></a> <span class="p">}</span>
</span><span id="__span-6-13"><a id="__codelineno-6-13" name="__codelineno-6-13" href="#__codelineno-6-13"></a> <span class="p">]</span>
</span><span id="__span-6-14"><a id="__codelineno-6-14" name="__codelineno-6-14" href="#__codelineno-6-14"></a> <span class="p">}</span>
</span><span id="__span-6-15"><a id="__codelineno-6-15" name="__codelineno-6-15" href="#__codelineno-6-15"></a><span class="p">}</span>
</span></code></pre></div>
<table>
<thead>
<tr>
<th>Parameters</th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td><code>metric_spec</code></td>
<td>Optional: <code>RougeSpec</code> Metric spec, defining the metric's behavior.</td>
</tr>
<tr>
<td><code>metric_spec.rouge_type</code></td>
<td>Optional: <code>string</code> Acceptable values: - <code>rougen[1-9]</code>: compute <code>rouge</code> scores based on the overlap of n-grams between the prediction and the reference. - <code>rougeL</code>: compute <code>rouge</code> scores based on the Longest Common Subsequence (LCS) between the prediction and the reference. - <code>rougeLsum</code>: first splits the prediction and the reference into sentences and then computes the LCS for each tuple. The final <code>rougeLsum</code> score is the average of these individual LCS scores.</td>
</tr>
<tr>
<td><code>metric_spec.use_stemmer</code></td>
<td>Optional: <code>bool</code> Whether Porter stemmer should be used to strip word suffixes to improve matching.</td>
</tr>
<tr>
<td><code>metric_spec.split_summaries</code></td>
<td>Optional: <code>bool</code> Whether to add newlines between sentences for rougeLsum.</td>
</tr>
<tr>
<td><code>instances</code></td>
<td>Optional: <code>RougeInstance[]</code> Evaluation input, consisting of LLM response and reference.</td>
</tr>
<tr>
<td><code>instances.prediction</code></td>
<td>Optional: <code>string</code> LLM response.</td>
</tr>
<tr>
<td><code>instances.reference</code></td>
<td>Optional: <code>string</code> Golden LLM response for reference.</td>
</tr>
</tbody>
</table>
<h4 id="rougeresults"><code>RougeResults</code><a class="headerlink" href="#rougeresults" title="Permanent link">&para;</a></h4>
<div class="language-python highlight"><pre><span></span><code><span id="__span-7-1"><a id="__codelineno-7-1" name="__codelineno-7-1" href="#__codelineno-7-1"></a><span class="p">{</span>
</span><span id="__span-7-2"><a id="__codelineno-7-2" name="__codelineno-7-2" href="#__codelineno-7-2"></a> <span class="s2">&quot;rouge_results&quot;</span><span class="p">:</span> <span class="p">{</span>
</span><span id="__span-7-3"><a id="__codelineno-7-3" name="__codelineno-7-3" href="#__codelineno-7-3"></a> <span class="s2">&quot;rouge_metric_values&quot;</span><span class="p">:</span> <span class="p">[</span>
</span><span id="__span-7-4"><a id="__codelineno-7-4" name="__codelineno-7-4" href="#__codelineno-7-4"></a> <span class="p">{</span>
</span><span id="__span-7-5"><a id="__codelineno-7-5" name="__codelineno-7-5" href="#__codelineno-7-5"></a> <span class="s2">&quot;score&quot;</span><span class="p">:</span> <span class="nb">float</span>
</span><span id="__span-7-6"><a id="__codelineno-7-6" name="__codelineno-7-6" href="#__codelineno-7-6"></a> <span class="p">}</span>
</span><span id="__span-7-7"><a id="__codelineno-7-7" name="__codelineno-7-7" href="#__codelineno-7-7"></a> <span class="p">]</span>
</span><span id="__span-7-8"><a id="__codelineno-7-8" name="__codelineno-7-8" href="#__codelineno-7-8"></a> <span class="p">}</span>
</span><span id="__span-7-9"><a id="__codelineno-7-9" name="__codelineno-7-9" href="#__codelineno-7-9"></a><span class="p">}</span>
</span></code></pre></div>
<table>
<thead>
<tr>
<th>Output</th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td><code>rouge_metric_values</code></td>
<td><code>RougeValue[]</code> Evaluation results per instance input.</td>
</tr>
<tr>
<td><code>rouge_metric_values.score</code></td>
<td><code>float</code>: <code>[0, 1]</code>, where higher scores mean the prediction is more like the reference.</td>
</tr>
</tbody>
</table>
<h4 id="fluencyinput"><code>FluencyInput</code><a class="headerlink" href="#fluencyinput" title="Permanent link">&para;</a></h4>
<div class="language-python highlight"><pre><span></span><code><span id="__span-8-1"><a id="__codelineno-8-1" name="__codelineno-8-1" href="#__codelineno-8-1"></a><span class="p">{</span>
</span><span id="__span-8-2"><a id="__codelineno-8-2" name="__codelineno-8-2" href="#__codelineno-8-2"></a> <span class="s2">&quot;fluency_input&quot;</span><span class="p">:</span> <span class="p">{</span>
</span><span id="__span-8-3"><a id="__codelineno-8-3" name="__codelineno-8-3" href="#__codelineno-8-3"></a> <span class="s2">&quot;metric_spec&quot;</span><span class="p">:</span> <span class="p">{},</span>
</span><span id="__span-8-4"><a id="__codelineno-8-4" name="__codelineno-8-4" href="#__codelineno-8-4"></a> <span class="s2">&quot;instance&quot;</span><span class="p">:</span> <span class="p">{</span>
</span><span id="__span-8-5"><a id="__codelineno-8-5" name="__codelineno-8-5" href="#__codelineno-8-5"></a> <span class="s2">&quot;prediction&quot;</span><span class="p">:</span> <span class="n">string</span>
</span><span id="__span-8-6"><a id="__codelineno-8-6" name="__codelineno-8-6" href="#__codelineno-8-6"></a> <span class="p">}</span>
</span><span id="__span-8-7"><a id="__codelineno-8-7" name="__codelineno-8-7" href="#__codelineno-8-7"></a> <span class="p">}</span>
</span><span id="__span-8-8"><a id="__codelineno-8-8" name="__codelineno-8-8" href="#__codelineno-8-8"></a><span class="p">}</span>
</span></code></pre></div>
<table>
<thead>
<tr>
<th>Parameters</th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td><code>metric_spec</code></td>
<td>Optional: <code>FluencySpec</code> Metric spec, defining the metric's behavior.</td>
</tr>
<tr>
<td><code>instance</code></td>
<td>Optional: <code>FluencyInstance</code> Evaluation input, consisting of LLM response.</td>
</tr>
<tr>
<td><code>instance.prediction</code></td>
<td>Optional: <code>string</code> LLM response.</td>
</tr>
</tbody>
</table>
<h4 id="fluencyresult"><code>FluencyResult</code><a class="headerlink" href="#fluencyresult" title="Permanent link">&para;</a></h4>
<div class="language-python highlight"><pre><span></span><code><span id="__span-9-1"><a id="__codelineno-9-1" name="__codelineno-9-1" href="#__codelineno-9-1"></a><span class="p">{</span>
</span><span id="__span-9-2"><a id="__codelineno-9-2" name="__codelineno-9-2" href="#__codelineno-9-2"></a> <span class="s2">&quot;fluency_result&quot;</span><span class="p">:</span> <span class="p">{</span>
</span><span id="__span-9-3"><a id="__codelineno-9-3" name="__codelineno-9-3" href="#__codelineno-9-3"></a> <span class="s2">&quot;score&quot;</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span>
</span><span id="__span-9-4"><a id="__codelineno-9-4" name="__codelineno-9-4" href="#__codelineno-9-4"></a> <span class="s2">&quot;explanation&quot;</span><span class="p">:</span> <span class="n">string</span><span class="p">,</span>
</span><span id="__span-9-5"><a id="__codelineno-9-5" name="__codelineno-9-5" href="#__codelineno-9-5"></a> <span class="s2">&quot;confidence&quot;</span><span class="p">:</span> <span class="nb">float</span>
</span><span id="__span-9-6"><a id="__codelineno-9-6" name="__codelineno-9-6" href="#__codelineno-9-6"></a> <span class="p">}</span>
</span><span id="__span-9-7"><a id="__codelineno-9-7" name="__codelineno-9-7" href="#__codelineno-9-7"></a><span class="p">}</span>
</span></code></pre></div>
<table>
<thead>
<tr>
<th>Output</th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td><code>score</code></td>
<td><code>float</code>: One of the following: - <code>1</code>: Inarticulate - <code>2</code>: Somewhat Inarticulate - <code>3</code>: Neutral - <code>4</code>: Somewhat fluent - <code>5</code>: Fluent</td>
</tr>
<tr>
<td><code>explanation</code></td>
<td><code>string</code>: Justification for score assignment.</td>
</tr>
<tr>
<td><code>confidence</code></td>
<td><code>float</code>: <code>[0, 1]</code> Confidence score of our result.</td>
</tr>
</tbody>
</table>
<h4 id="coherenceinput"><code>CoherenceInput</code><a class="headerlink" href="#coherenceinput" title="Permanent link">&para;</a></h4>
<div class="language-python highlight"><pre><span></span><code><span id="__span-10-1"><a id="__codelineno-10-1" name="__codelineno-10-1" href="#__codelineno-10-1"></a><span class="p">{</span>
</span><span id="__span-10-2"><a id="__codelineno-10-2" name="__codelineno-10-2" href="#__codelineno-10-2"></a> <span class="s2">&quot;coherence_input&quot;</span><span class="p">:</span> <span class="p">{</span>
</span><span id="__span-10-3"><a id="__codelineno-10-3" name="__codelineno-10-3" href="#__codelineno-10-3"></a> <span class="s2">&quot;metric_spec&quot;</span><span class="p">:</span> <span class="p">{},</span>
</span><span id="__span-10-4"><a id="__codelineno-10-4" name="__codelineno-10-4" href="#__codelineno-10-4"></a> <span class="s2">&quot;instance&quot;</span><span class="p">:</span> <span class="p">{</span>
</span><span id="__span-10-5"><a id="__codelineno-10-5" name="__codelineno-10-5" href="#__codelineno-10-5"></a> <span class="s2">&quot;prediction&quot;</span><span class="p">:</span> <span class="n">string</span>
</span><span id="__span-10-6"><a id="__codelineno-10-6" name="__codelineno-10-6" href="#__codelineno-10-6"></a> <span class="p">}</span>
</span><span id="__span-10-7"><a id="__codelineno-10-7" name="__codelineno-10-7" href="#__codelineno-10-7"></a> <span class="p">}</span>
</span><span id="__span-10-8"><a id="__codelineno-10-8" name="__codelineno-10-8" href="#__codelineno-10-8"></a><span class="p">}</span>
</span></code></pre></div>
<table>
<thead>
<tr>
<th>Parameters</th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td><code>metric_spec</code></td>
<td>Optional: <code>CoherenceSpec</code> Metric spec, defining the metric's behavior.</td>
</tr>
<tr>
<td><code>instance</code></td>
<td>Optional: <code>CoherenceInstance</code> Evaluation input, consisting of LLM response.</td>
</tr>
<tr>
<td><code>instance.prediction</code></td>
<td>Optional: <code>string</code> LLM response.</td>
</tr>
</tbody>
</table>
<h4 id="coherenceresult"><code>CoherenceResult</code><a class="headerlink" href="#coherenceresult" title="Permanent link">&para;</a></h4>
<div class="language-python highlight"><pre><span></span><code><span id="__span-11-1"><a id="__codelineno-11-1" name="__codelineno-11-1" href="#__codelineno-11-1"></a><span class="p">{</span>
</span><span id="__span-11-2"><a id="__codelineno-11-2" name="__codelineno-11-2" href="#__codelineno-11-2"></a> <span class="s2">&quot;coherence_result&quot;</span><span class="p">:</span> <span class="p">{</span>
</span><span id="__span-11-3"><a id="__codelineno-11-3" name="__codelineno-11-3" href="#__codelineno-11-3"></a> <span class="s2">&quot;score&quot;</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span>
</span><span id="__span-11-4"><a id="__codelineno-11-4" name="__codelineno-11-4" href="#__codelineno-11-4"></a> <span class="s2">&quot;explanation&quot;</span><span class="p">:</span> <span class="n">string</span><span class="p">,</span>
</span><span id="__span-11-5"><a id="__codelineno-11-5" name="__codelineno-11-5" href="#__codelineno-11-5"></a> <span class="s2">&quot;confidence&quot;</span><span class="p">:</span> <span class="nb">float</span>
</span><span id="__span-11-6"><a id="__codelineno-11-6" name="__codelineno-11-6" href="#__codelineno-11-6"></a> <span class="p">}</span>
</span><span id="__span-11-7"><a id="__codelineno-11-7" name="__codelineno-11-7" href="#__codelineno-11-7"></a><span class="p">}</span>
</span></code></pre></div>
<table>
<thead>
<tr>
<th>Output</th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td><code>score</code></td>
<td><code>float</code>: One of the following: - <code>1</code>: Incoherent - <code>2</code>: Somewhat incoherent - <code>3</code>: Neutral - <code>4</code>: Somewhat coherent - <code>5</code>: Coherent</td>
</tr>
<tr>
<td><code>explanation</code></td>
<td><code>string</code>: Justification for score assignment.</td>
</tr>
<tr>
<td><code>confidence</code></td>
<td><code>float</code>: <code>[0, 1]</code> Confidence score of our result.</td>
</tr>
</tbody>
</table>
<h4 id="safetyinput"><code>SafetyInput</code><a class="headerlink" href="#safetyinput" title="Permanent link">&para;</a></h4>
<div class="language-python highlight"><pre><span></span><code><span id="__span-12-1"><a id="__codelineno-12-1" name="__codelineno-12-1" href="#__codelineno-12-1"></a><span class="p">{</span>
</span><span id="__span-12-2"><a id="__codelineno-12-2" name="__codelineno-12-2" href="#__codelineno-12-2"></a> <span class="s2">&quot;safety_input&quot;</span><span class="p">:</span> <span class="p">{</span>
</span><span id="__span-12-3"><a id="__codelineno-12-3" name="__codelineno-12-3" href="#__codelineno-12-3"></a> <span class="s2">&quot;metric_spec&quot;</span><span class="p">:</span> <span class="p">{},</span>
</span><span id="__span-12-4"><a id="__codelineno-12-4" name="__codelineno-12-4" href="#__codelineno-12-4"></a> <span class="s2">&quot;instance&quot;</span><span class="p">:</span> <span class="p">{</span>
</span><span id="__span-12-5"><a id="__codelineno-12-5" name="__codelineno-12-5" href="#__codelineno-12-5"></a> <span class="s2">&quot;prediction&quot;</span><span class="p">:</span> <span class="n">string</span>
</span><span id="__span-12-6"><a id="__codelineno-12-6" name="__codelineno-12-6" href="#__codelineno-12-6"></a> <span class="p">}</span>
</span><span id="__span-12-7"><a id="__codelineno-12-7" name="__codelineno-12-7" href="#__codelineno-12-7"></a> <span class="p">}</span>
</span><span id="__span-12-8"><a id="__codelineno-12-8" name="__codelineno-12-8" href="#__codelineno-12-8"></a><span class="p">}</span>
</span></code></pre></div>
<table>
<thead>
<tr>
<th>Parameters</th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td><code>metric_spec</code></td>
<td>Optional: <code>SafetySpec</code> Metric spec, defining the metric's behavior.</td>
</tr>
<tr>
<td><code>instance</code></td>
<td>Optional: <code>SafetyInstance</code> Evaluation input, consisting of LLM response.</td>
</tr>
<tr>
<td><code>instance.prediction</code></td>
<td>Optional: <code>string</code> LLM response.</td>
</tr>
</tbody>
</table>
<h4 id="safetyresult"><code>SafetyResult</code><a class="headerlink" href="#safetyresult" title="Permanent link">&para;</a></h4>
<div class="language-python highlight"><pre><span></span><code><span id="__span-13-1"><a id="__codelineno-13-1" name="__codelineno-13-1" href="#__codelineno-13-1"></a><span class="p">{</span>
</span><span id="__span-13-2"><a id="__codelineno-13-2" name="__codelineno-13-2" href="#__codelineno-13-2"></a> <span class="s2">&quot;safety_result&quot;</span><span class="p">:</span> <span class="p">{</span>
</span><span id="__span-13-3"><a id="__codelineno-13-3" name="__codelineno-13-3" href="#__codelineno-13-3"></a> <span class="s2">&quot;score&quot;</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span>
</span><span id="__span-13-4"><a id="__codelineno-13-4" name="__codelineno-13-4" href="#__codelineno-13-4"></a> <span class="s2">&quot;explanation&quot;</span><span class="p">:</span> <span class="n">string</span><span class="p">,</span>
</span><span id="__span-13-5"><a id="__codelineno-13-5" name="__codelineno-13-5" href="#__codelineno-13-5"></a> <span class="s2">&quot;confidence&quot;</span><span class="p">:</span> <span class="nb">float</span>
</span><span id="__span-13-6"><a id="__codelineno-13-6" name="__codelineno-13-6" href="#__codelineno-13-6"></a> <span class="p">}</span>
</span><span id="__span-13-7"><a id="__codelineno-13-7" name="__codelineno-13-7" href="#__codelineno-13-7"></a><span class="p">}</span>
</span></code></pre></div>
<table>
<thead>
<tr>
<th>Output</th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td><code>score</code></td>
<td><code>float</code>: One of the following: - <code>0</code>: Unsafe - <code>1</code>: Safe</td>
</tr>
<tr>
<td><code>explanation</code></td>
<td><code>string</code>: Justification for score assignment.</td>
</tr>
<tr>
<td><code>confidence</code></td>
<td><code>float</code>: <code>[0, 1]</code> Confidence score of our result.</td>
</tr>
</tbody>
</table>
<h4 id="groundednessinput"><code>GroundednessInput</code><a class="headerlink" href="#groundednessinput" title="Permanent link">&para;</a></h4>
<div class="language-python highlight"><pre><span></span><code><span id="__span-14-1"><a id="__codelineno-14-1" name="__codelineno-14-1" href="#__codelineno-14-1"></a><span class="p">{</span>
</span><span id="__span-14-2"><a id="__codelineno-14-2" name="__codelineno-14-2" href="#__codelineno-14-2"></a> <span class="s2">&quot;groundedness_input&quot;</span><span class="p">:</span> <span class="p">{</span>
</span><span id="__span-14-3"><a id="__codelineno-14-3" name="__codelineno-14-3" href="#__codelineno-14-3"></a> <span class="s2">&quot;metric_spec&quot;</span><span class="p">:</span> <span class="p">{},</span>
</span><span id="__span-14-4"><a id="__codelineno-14-4" name="__codelineno-14-4" href="#__codelineno-14-4"></a> <span class="s2">&quot;instance&quot;</span><span class="p">:</span> <span class="p">{</span>
</span><span id="__span-14-5"><a id="__codelineno-14-5" name="__codelineno-14-5" href="#__codelineno-14-5"></a> <span class="s2">&quot;prediction&quot;</span><span class="p">:</span> <span class="n">string</span><span class="p">,</span>
</span><span id="__span-14-6"><a id="__codelineno-14-6" name="__codelineno-14-6" href="#__codelineno-14-6"></a> <span class="s2">&quot;context&quot;</span><span class="p">:</span> <span class="n">string</span>
</span><span id="__span-14-7"><a id="__codelineno-14-7" name="__codelineno-14-7" href="#__codelineno-14-7"></a> <span class="p">}</span>
</span><span id="__span-14-8"><a id="__codelineno-14-8" name="__codelineno-14-8" href="#__codelineno-14-8"></a> <span class="p">}</span>
</span><span id="__span-14-9"><a id="__codelineno-14-9" name="__codelineno-14-9" href="#__codelineno-14-9"></a><span class="p">}</span>
</span></code></pre></div>
<table>
<thead>
<tr>
<th></th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>Parameter</strong></td>
<td><strong>Description</strong></td>
</tr>
<tr>
<td><code>metric_spec</code></td>
<td>Optional: GroundednessSpec Metric spec, defining the metric's behavior.</td>
</tr>
<tr>
<td><code>instance</code></td>
<td>Optional: GroundednessInstance Evaluation input, consisting of inference inputs and corresponding response.</td>
</tr>
<tr>
<td><code>instance.prediction</code></td>
<td>Optional: <code>string</code> LLM response.</td>
</tr>
<tr>
<td><code>instance.context</code></td>
<td>Optional: <code>string</code> Inference-time text containing all information, which can be used in the LLM response.</td>
</tr>
</tbody>
</table>
<h4 id="groundednessresult"><code>GroundednessResult</code><a class="headerlink" href="#groundednessresult" title="Permanent link">&para;</a></h4>
<div class="language-python highlight"><pre><span></span><code><span id="__span-15-1"><a id="__codelineno-15-1" name="__codelineno-15-1" href="#__codelineno-15-1"></a><span class="p">{</span>
</span><span id="__span-15-2"><a id="__codelineno-15-2" name="__codelineno-15-2" href="#__codelineno-15-2"></a> <span class="s2">&quot;groundedness_result&quot;</span><span class="p">:</span> <span class="p">{</span>
</span><span id="__span-15-3"><a id="__codelineno-15-3" name="__codelineno-15-3" href="#__codelineno-15-3"></a> <span class="s2">&quot;score&quot;</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span>
</span><span id="__span-15-4"><a id="__codelineno-15-4" name="__codelineno-15-4" href="#__codelineno-15-4"></a> <span class="s2">&quot;explanation&quot;</span><span class="p">:</span> <span class="n">string</span><span class="p">,</span>
</span><span id="__span-15-5"><a id="__codelineno-15-5" name="__codelineno-15-5" href="#__codelineno-15-5"></a> <span class="s2">&quot;confidence&quot;</span><span class="p">:</span> <span class="nb">float</span>
</span><span id="__span-15-6"><a id="__codelineno-15-6" name="__codelineno-15-6" href="#__codelineno-15-6"></a> <span class="p">}</span>
</span><span id="__span-15-7"><a id="__codelineno-15-7" name="__codelineno-15-7" href="#__codelineno-15-7"></a><span class="p">}</span>
</span></code></pre></div>
<table>
<thead>
<tr>
<th>Output</th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td><code>score</code></td>
<td><code>float</code>: One of the following: - <code>0</code>: Ungrounded - <code>1</code>: Grounded</td>
</tr>
<tr>
<td><code>explanation</code></td>
<td><code>string</code>: Justification for score assignment.</td>
</tr>
<tr>
<td><code>confidence</code></td>
<td><code>float</code>: <code>[0, 1]</code> Confidence score of our result.</td>
</tr>
</tbody>
</table>
<h4 id="fulfillmentinput"><code>FulfillmentInput</code><a class="headerlink" href="#fulfillmentinput" title="Permanent link">&para;</a></h4>
<div class="language-python highlight"><pre><span></span><code><span id="__span-16-1"><a id="__codelineno-16-1" name="__codelineno-16-1" href="#__codelineno-16-1"></a><span class="p">{</span>
</span><span id="__span-16-2"><a id="__codelineno-16-2" name="__codelineno-16-2" href="#__codelineno-16-2"></a> <span class="s2">&quot;fulfillment_input&quot;</span><span class="p">:</span> <span class="p">{</span>
</span><span id="__span-16-3"><a id="__codelineno-16-3" name="__codelineno-16-3" href="#__codelineno-16-3"></a> <span class="s2">&quot;metric_spec&quot;</span><span class="p">:</span> <span class="p">{},</span>
</span><span id="__span-16-4"><a id="__codelineno-16-4" name="__codelineno-16-4" href="#__codelineno-16-4"></a> <span class="s2">&quot;instance&quot;</span><span class="p">:</span> <span class="p">{</span>
</span><span id="__span-16-5"><a id="__codelineno-16-5" name="__codelineno-16-5" href="#__codelineno-16-5"></a> <span class="s2">&quot;prediction&quot;</span><span class="p">:</span> <span class="n">string</span><span class="p">,</span>
</span><span id="__span-16-6"><a id="__codelineno-16-6" name="__codelineno-16-6" href="#__codelineno-16-6"></a> <span class="s2">&quot;instruction&quot;</span><span class="p">:</span> <span class="n">string</span>
</span><span id="__span-16-7"><a id="__codelineno-16-7" name="__codelineno-16-7" href="#__codelineno-16-7"></a> <span class="p">}</span>
</span><span id="__span-16-8"><a id="__codelineno-16-8" name="__codelineno-16-8" href="#__codelineno-16-8"></a> <span class="p">}</span>
</span><span id="__span-16-9"><a id="__codelineno-16-9" name="__codelineno-16-9" href="#__codelineno-16-9"></a><span class="p">}</span>
</span></code></pre></div>
<table>
<thead>
<tr>
<th>Parameters</th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td><code>metric_spec</code></td>
<td>Optional: <code>FulfillmentSpec</code> Metric spec, defining the metric's behavior.</td>
</tr>
<tr>
<td><code>instance</code></td>
<td>Optional: <code>FulfillmentInstance</code> Evaluation input, consisting of inference inputs and corresponding response.</td>
</tr>
<tr>
<td><code>instance.prediction</code></td>
<td>Optional: <code>string</code> LLM response.</td>
</tr>
<tr>
<td><code>instance.instruction</code></td>
<td>Optional: <code>string</code> Instruction used at inference time.</td>
</tr>
</tbody>
</table>
<h4 id="fulfillmentresult"><code>FulfillmentResult</code><a class="headerlink" href="#fulfillmentresult" title="Permanent link">&para;</a></h4>
<div class="language-python highlight"><pre><span></span><code><span id="__span-17-1"><a id="__codelineno-17-1" name="__codelineno-17-1" href="#__codelineno-17-1"></a><span class="p">{</span>
</span><span id="__span-17-2"><a id="__codelineno-17-2" name="__codelineno-17-2" href="#__codelineno-17-2"></a> <span class="s2">&quot;fulfillment_result&quot;</span><span class="p">:</span> <span class="p">{</span>
</span><span id="__span-17-3"><a id="__codelineno-17-3" name="__codelineno-17-3" href="#__codelineno-17-3"></a> <span class="s2">&quot;score&quot;</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span>
</span><span id="__span-17-4"><a id="__codelineno-17-4" name="__codelineno-17-4" href="#__codelineno-17-4"></a> <span class="s2">&quot;explanation&quot;</span><span class="p">:</span> <span class="n">string</span><span class="p">,</span>
</span><span id="__span-17-5"><a id="__codelineno-17-5" name="__codelineno-17-5" href="#__codelineno-17-5"></a> <span class="s2">&quot;confidence&quot;</span><span class="p">:</span> <span class="nb">float</span>
</span><span id="__span-17-6"><a id="__codelineno-17-6" name="__codelineno-17-6" href="#__codelineno-17-6"></a> <span class="p">}</span>
</span><span id="__span-17-7"><a id="__codelineno-17-7" name="__codelineno-17-7" href="#__codelineno-17-7"></a><span class="p">}</span>
</span></code></pre></div>
<table>
<thead>
<tr>
<th>Output</th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td><code>score</code></td>
<td><code>float</code>: One of the following: - <code>1</code>: No fulfillment - <code>2</code>: Poor fulfillment - <code>3</code>: Some fulfillment - <code>4</code>: Good fulfillment - <code>5</code>: Complete fulfillment</td>
</tr>
<tr>
<td><code>explanation</code></td>
<td><code>string</code>: Justification for score assignment.</td>
</tr>
<tr>
<td><code>confidence</code></td>
<td><code>float</code>: <code>[0, 1]</code> Confidence score of our result.</td>
</tr>
</tbody>
</table>
<h4 id="summarizationqualityinput"><code>SummarizationQualityInput</code><a class="headerlink" href="#summarizationqualityinput" title="Permanent link">&para;</a></h4>
<div class="language-python highlight"><pre><span></span><code><span id="__span-18-1"><a id="__codelineno-18-1" name="__codelineno-18-1" href="#__codelineno-18-1"></a><span class="p">{</span>
</span><span id="__span-18-2"><a id="__codelineno-18-2" name="__codelineno-18-2" href="#__codelineno-18-2"></a> <span class="s2">&quot;summarization_quality_input&quot;</span><span class="p">:</span> <span class="p">{</span>
</span><span id="__span-18-3"><a id="__codelineno-18-3" name="__codelineno-18-3" href="#__codelineno-18-3"></a> <span class="s2">&quot;metric_spec&quot;</span><span class="p">:</span> <span class="p">{},</span>
</span><span id="__span-18-4"><a id="__codelineno-18-4" name="__codelineno-18-4" href="#__codelineno-18-4"></a> <span class="s2">&quot;instance&quot;</span><span class="p">:</span> <span class="p">{</span>
</span><span id="__span-18-5"><a id="__codelineno-18-5" name="__codelineno-18-5" href="#__codelineno-18-5"></a> <span class="s2">&quot;prediction&quot;</span><span class="p">:</span> <span class="n">string</span><span class="p">,</span>
</span><span id="__span-18-6"><a id="__codelineno-18-6" name="__codelineno-18-6" href="#__codelineno-18-6"></a> <span class="s2">&quot;instruction&quot;</span><span class="p">:</span> <span class="n">string</span><span class="p">,</span>
</span><span id="__span-18-7"><a id="__codelineno-18-7" name="__codelineno-18-7" href="#__codelineno-18-7"></a> <span class="s2">&quot;context&quot;</span><span class="p">:</span> <span class="n">string</span><span class="p">,</span>
</span><span id="__span-18-8"><a id="__codelineno-18-8" name="__codelineno-18-8" href="#__codelineno-18-8"></a> <span class="p">}</span>
</span><span id="__span-18-9"><a id="__codelineno-18-9" name="__codelineno-18-9" href="#__codelineno-18-9"></a> <span class="p">}</span>
</span><span id="__span-18-10"><a id="__codelineno-18-10" name="__codelineno-18-10" href="#__codelineno-18-10"></a><span class="p">}</span>
</span></code></pre></div>
<table>
<thead>
<tr>
<th>Parameters</th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td><code>metric_spec</code></td>
<td>Optional: <code>SummarizationQualitySpec</code> Metric spec, defining the metric's behavior.</td>
</tr>
<tr>
<td><code>instance</code></td>
<td>Optional: <code>SummarizationQualityInstance</code> Evaluation input, consisting of inference inputs and corresponding response.</td>
</tr>
<tr>
<td><code>instance.prediction</code></td>
<td>Optional: <code>string</code> LLM response.</td>
</tr>
<tr>
<td><code>instance.instruction</code></td>
<td>Optional: <code>string</code> Instruction used at inference time.</td>
</tr>
<tr>
<td><code>instance.context</code></td>
<td>Optional: <code>string</code> Inference-time text containing all information, which can be used in the LLM response.</td>
</tr>
</tbody>
</table>
<h4 id="summarizationqualityresult"><code>SummarizationQualityResult</code><a class="headerlink" href="#summarizationqualityresult" title="Permanent link">&para;</a></h4>
<div class="language-python highlight"><pre><span></span><code><span id="__span-19-1"><a id="__codelineno-19-1" name="__codelineno-19-1" href="#__codelineno-19-1"></a><span class="p">{</span>
</span><span id="__span-19-2"><a id="__codelineno-19-2" name="__codelineno-19-2" href="#__codelineno-19-2"></a> <span class="s2">&quot;summarization_quality_result&quot;</span><span class="p">:</span> <span class="p">{</span>
</span><span id="__span-19-3"><a id="__codelineno-19-3" name="__codelineno-19-3" href="#__codelineno-19-3"></a> <span class="s2">&quot;score&quot;</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span>
</span><span id="__span-19-4"><a id="__codelineno-19-4" name="__codelineno-19-4" href="#__codelineno-19-4"></a> <span class="s2">&quot;explanation&quot;</span><span class="p">:</span> <span class="n">string</span><span class="p">,</span>
</span><span id="__span-19-5"><a id="__codelineno-19-5" name="__codelineno-19-5" href="#__codelineno-19-5"></a> <span class="s2">&quot;confidence&quot;</span><span class="p">:</span> <span class="nb">float</span>
</span><span id="__span-19-6"><a id="__codelineno-19-6" name="__codelineno-19-6" href="#__codelineno-19-6"></a> <span class="p">}</span>
</span><span id="__span-19-7"><a id="__codelineno-19-7" name="__codelineno-19-7" href="#__codelineno-19-7"></a><span class="p">}</span>
</span></code></pre></div>
<table>
<thead>
<tr>
<th>Output</th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td><code>score</code></td>
<td><code>float</code>: One of the following: - <code>1</code>: Very bad - <code>2</code>: Bad - <code>3</code>: Ok - <code>4</code>: Good - <code>5</code>: Very good</td>
</tr>
<tr>
<td><code>explanation</code></td>
<td><code>string</code>: Justification for score assignment.</td>
</tr>
<tr>
<td><code>confidence</code></td>
<td><code>float</code>: <code>[0, 1]</code> Confidence score of our result.</td>
</tr>
</tbody>
</table>
<h4 id="pairwisesummarizationqualityinput"><code>PairwiseSummarizationQualityInput</code><a class="headerlink" href="#pairwisesummarizationqualityinput" title="Permanent link">&para;</a></h4>
<div class="language-python highlight"><pre><span></span><code><span id="__span-20-1"><a id="__codelineno-20-1" name="__codelineno-20-1" href="#__codelineno-20-1"></a><span class="p">{</span>
</span><span id="__span-20-2"><a id="__codelineno-20-2" name="__codelineno-20-2" href="#__codelineno-20-2"></a> <span class="s2">&quot;pairwise_summarization_quality_input&quot;</span><span class="p">:</span> <span class="p">{</span>
</span><span id="__span-20-3"><a id="__codelineno-20-3" name="__codelineno-20-3" href="#__codelineno-20-3"></a> <span class="s2">&quot;metric_spec&quot;</span><span class="p">:</span> <span class="p">{},</span>
</span><span id="__span-20-4"><a id="__codelineno-20-4" name="__codelineno-20-4" href="#__codelineno-20-4"></a> <span class="s2">&quot;instance&quot;</span><span class="p">:</span> <span class="p">{</span>
</span><span id="__span-20-5"><a id="__codelineno-20-5" name="__codelineno-20-5" href="#__codelineno-20-5"></a> <span class="s2">&quot;baseline_prediction&quot;</span><span class="p">:</span> <span class="n">string</span><span class="p">,</span>
</span><span id="__span-20-6"><a id="__codelineno-20-6" name="__codelineno-20-6" href="#__codelineno-20-6"></a> <span class="s2">&quot;prediction&quot;</span><span class="p">:</span> <span class="n">string</span><span class="p">,</span>
</span><span id="__span-20-7"><a id="__codelineno-20-7" name="__codelineno-20-7" href="#__codelineno-20-7"></a> <span class="s2">&quot;instruction&quot;</span><span class="p">:</span> <span class="n">string</span><span class="p">,</span>
</span><span id="__span-20-8"><a id="__codelineno-20-8" name="__codelineno-20-8" href="#__codelineno-20-8"></a> <span class="s2">&quot;context&quot;</span><span class="p">:</span> <span class="n">string</span><span class="p">,</span>
</span><span id="__span-20-9"><a id="__codelineno-20-9" name="__codelineno-20-9" href="#__codelineno-20-9"></a> <span class="p">}</span>
</span><span id="__span-20-10"><a id="__codelineno-20-10" name="__codelineno-20-10" href="#__codelineno-20-10"></a> <span class="p">}</span>
</span><span id="__span-20-11"><a id="__codelineno-20-11" name="__codelineno-20-11" href="#__codelineno-20-11"></a><span class="p">}</span>
</span></code></pre></div>
<table>
<thead>
<tr>
<th>Parameters</th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td><code>metric_spec</code></td>
<td>Optional: <code>PairwiseSummarizationQualitySpec</code> Metric spec, defining the metric's behavior.</td>
</tr>
<tr>
<td><code>instance</code></td>
<td>Optional: <code>PairwiseSummarizationQualityInstance</code> Evaluation input, consisting of inference inputs and corresponding response.</td>
</tr>
<tr>
<td><code>instance.baseline_prediction</code></td>
<td>Optional: <code>string</code> Baseline model LLM response.</td>
</tr>
<tr>
<td><code>instance.prediction</code></td>
<td>Optional: <code>string</code> Candidate model LLM response.</td>
</tr>
<tr>
<td><code>instance.instruction</code></td>
<td>Optional: <code>string</code> Instruction used at inference time.</td>
</tr>
<tr>
<td><code>instance.context</code></td>
<td>Optional: <code>string</code> Inference-time text containing all information, which can be used in the LLM response.</td>
</tr>
</tbody>
</table>
<h4 id="pairwisesummarizationqualityresult"><code>PairwiseSummarizationQualityResult</code><a class="headerlink" href="#pairwisesummarizationqualityresult" title="Permanent link">&para;</a></h4>
<div class="language-python highlight"><pre><span></span><code><span id="__span-21-1"><a id="__codelineno-21-1" name="__codelineno-21-1" href="#__codelineno-21-1"></a><span class="p">{</span>
</span><span id="__span-21-2"><a id="__codelineno-21-2" name="__codelineno-21-2" href="#__codelineno-21-2"></a> <span class="s2">&quot;pairwise_summarization_quality_result&quot;</span><span class="p">:</span> <span class="p">{</span>
</span><span id="__span-21-3"><a id="__codelineno-21-3" name="__codelineno-21-3" href="#__codelineno-21-3"></a> <span class="s2">&quot;pairwise_choice&quot;</span><span class="p">:</span> <span class="n">PairwiseChoice</span><span class="p">,</span>
</span><span id="__span-21-4"><a id="__codelineno-21-4" name="__codelineno-21-4" href="#__codelineno-21-4"></a> <span class="s2">&quot;explanation&quot;</span><span class="p">:</span> <span class="n">string</span><span class="p">,</span>
</span><span id="__span-21-5"><a id="__codelineno-21-5" name="__codelineno-21-5" href="#__codelineno-21-5"></a> <span class="s2">&quot;confidence&quot;</span><span class="p">:</span> <span class="nb">float</span>
</span><span id="__span-21-6"><a id="__codelineno-21-6" name="__codelineno-21-6" href="#__codelineno-21-6"></a> <span class="p">}</span>
</span><span id="__span-21-7"><a id="__codelineno-21-7" name="__codelineno-21-7" href="#__codelineno-21-7"></a><span class="p">}</span>
</span></code></pre></div>
<table>
<thead>
<tr>
<th>Output</th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td><code>pairwise_choice</code></td>
<td><code>PairwiseChoice</code>: Enum with possible values as follows: - <code>BASELINE</code>: Baseline prediction is better - <code>CANDIDATE</code>: Candidate prediction is better - <code>TIE</code>: Tie between Baseline and Candidate predictions.</td>
</tr>
<tr>
<td><code>explanation</code></td>
<td><code>string</code>: Justification for pairwise_choice assignment.</td>
</tr>
<tr>
<td><code>confidence</code></td>
<td><code>float</code>: <code>[0, 1]</code> Confidence score of our result.</td>
</tr>
</tbody>
</table>
<h4 id="summarizationhelpfulnessinput"><code>SummarizationHelpfulnessInput</code><a class="headerlink" href="#summarizationhelpfulnessinput" title="Permanent link">&para;</a></h4>
<div class="language-python highlight"><pre><span></span><code><span id="__span-22-1"><a id="__codelineno-22-1" name="__codelineno-22-1" href="#__codelineno-22-1"></a><span class="p">{</span>
</span><span id="__span-22-2"><a id="__codelineno-22-2" name="__codelineno-22-2" href="#__codelineno-22-2"></a> <span class="s2">&quot;summarization_helpfulness_input&quot;</span><span class="p">:</span> <span class="p">{</span>
</span><span id="__span-22-3"><a id="__codelineno-22-3" name="__codelineno-22-3" href="#__codelineno-22-3"></a> <span class="s2">&quot;metric_spec&quot;</span><span class="p">:</span> <span class="p">{},</span>
</span><span id="__span-22-4"><a id="__codelineno-22-4" name="__codelineno-22-4" href="#__codelineno-22-4"></a> <span class="s2">&quot;instance&quot;</span><span class="p">:</span> <span class="p">{</span>
</span><span id="__span-22-5"><a id="__codelineno-22-5" name="__codelineno-22-5" href="#__codelineno-22-5"></a> <span class="s2">&quot;prediction&quot;</span><span class="p">:</span> <span class="n">string</span><span class="p">,</span>
</span><span id="__span-22-6"><a id="__codelineno-22-6" name="__codelineno-22-6" href="#__codelineno-22-6"></a> <span class="s2">&quot;instruction&quot;</span><span class="p">:</span> <span class="n">string</span><span class="p">,</span>
</span><span id="__span-22-7"><a id="__codelineno-22-7" name="__codelineno-22-7" href="#__codelineno-22-7"></a> <span class="s2">&quot;context&quot;</span><span class="p">:</span> <span class="n">string</span><span class="p">,</span>
</span><span id="__span-22-8"><a id="__codelineno-22-8" name="__codelineno-22-8" href="#__codelineno-22-8"></a> <span class="p">}</span>
</span><span id="__span-22-9"><a id="__codelineno-22-9" name="__codelineno-22-9" href="#__codelineno-22-9"></a> <span class="p">}</span>
</span><span id="__span-22-10"><a id="__codelineno-22-10" name="__codelineno-22-10" href="#__codelineno-22-10"></a><span class="p">}</span>
</span></code></pre></div>
<table>
<thead>
<tr>
<th>Parameters</th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td><code>metric_spec</code></td>
<td>Optional: <code>SummarizationHelpfulnessSpec</code> Metric spec, defining the metric's behavior.</td>
</tr>
<tr>
<td><code>instance</code></td>
<td>Optional: <code>SummarizationHelpfulnessInstance</code> Evaluation input, consisting of inference inputs and corresponding response.</td>
</tr>
<tr>
<td><code>instance.prediction</code></td>
<td>Optional: <code>string</code> LLM response.</td>
</tr>
<tr>
<td><code>instance.instruction</code></td>
<td>Optional: <code>string</code> Instruction used at inference time.</td>
</tr>
<tr>
<td><code>instance.context</code></td>
<td>Optional: <code>string</code> Inference-time text containing all information, which can be used in the LLM response.</td>
</tr>
</tbody>
</table>
<h4 id="summarizationhelpfulnessresult"><code>SummarizationHelpfulnessResult</code><a class="headerlink" href="#summarizationhelpfulnessresult" title="Permanent link">&para;</a></h4>
<div class="language-python highlight"><pre><span></span><code><span id="__span-23-1"><a id="__codelineno-23-1" name="__codelineno-23-1" href="#__codelineno-23-1"></a><span class="p">{</span>
</span><span id="__span-23-2"><a id="__codelineno-23-2" name="__codelineno-23-2" href="#__codelineno-23-2"></a> <span class="s2">&quot;summarization_helpfulness_result&quot;</span><span class="p">:</span> <span class="p">{</span>
</span><span id="__span-23-3"><a id="__codelineno-23-3" name="__codelineno-23-3" href="#__codelineno-23-3"></a> <span class="s2">&quot;score&quot;</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span>
</span><span id="__span-23-4"><a id="__codelineno-23-4" name="__codelineno-23-4" href="#__codelineno-23-4"></a> <span class="s2">&quot;explanation&quot;</span><span class="p">:</span> <span class="n">string</span><span class="p">,</span>
</span><span id="__span-23-5"><a id="__codelineno-23-5" name="__codelineno-23-5" href="#__codelineno-23-5"></a> <span class="s2">&quot;confidence&quot;</span><span class="p">:</span> <span class="nb">float</span>
</span><span id="__span-23-6"><a id="__codelineno-23-6" name="__codelineno-23-6" href="#__codelineno-23-6"></a> <span class="p">}</span>
</span><span id="__span-23-7"><a id="__codelineno-23-7" name="__codelineno-23-7" href="#__codelineno-23-7"></a><span class="p">}</span>
</span></code></pre></div>
<table>
<thead>
<tr>
<th>Output</th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td><code>score</code></td>
<td><code>float</code>: One of the following: - <code>1</code>: Unhelpful - <code>2</code>: Somewhat unhelpful - <code>3</code>: Neutral - <code>4</code>: Somewhat helpful - <code>5</code>: Helpful</td>
</tr>
<tr>
<td><code>explanation</code></td>
<td><code>string</code>: Justification for score assignment.</td>
</tr>
<tr>
<td><code>confidence</code></td>
<td><code>float</code>: <code>[0, 1]</code> Confidence score of our result.</td>
</tr>
</tbody>
</table>
<h4 id="summarizationverbosityinput"><code>SummarizationVerbosityInput</code><a class="headerlink" href="#summarizationverbosityinput" title="Permanent link">&para;</a></h4>
<div class="language-python highlight"><pre><span></span><code><span id="__span-24-1"><a id="__codelineno-24-1" name="__codelineno-24-1" href="#__codelineno-24-1"></a><span class="p">{</span>
</span><span id="__span-24-2"><a id="__codelineno-24-2" name="__codelineno-24-2" href="#__codelineno-24-2"></a> <span class="s2">&quot;summarization_verbosity_input&quot;</span><span class="p">:</span> <span class="p">{</span>
</span><span id="__span-24-3"><a id="__codelineno-24-3" name="__codelineno-24-3" href="#__codelineno-24-3"></a> <span class="s2">&quot;metric_spec&quot;</span><span class="p">:</span> <span class="p">{},</span>
</span><span id="__span-24-4"><a id="__codelineno-24-4" name="__codelineno-24-4" href="#__codelineno-24-4"></a> <span class="s2">&quot;instance&quot;</span><span class="p">:</span> <span class="p">{</span>
</span><span id="__span-24-5"><a id="__codelineno-24-5" name="__codelineno-24-5" href="#__codelineno-24-5"></a> <span class="s2">&quot;prediction&quot;</span><span class="p">:</span> <span class="n">string</span><span class="p">,</span>
</span><span id="__span-24-6"><a id="__codelineno-24-6" name="__codelineno-24-6" href="#__codelineno-24-6"></a> <span class="s2">&quot;instruction&quot;</span><span class="p">:</span> <span class="n">string</span><span class="p">,</span>
</span><span id="__span-24-7"><a id="__codelineno-24-7" name="__codelineno-24-7" href="#__codelineno-24-7"></a> <span class="s2">&quot;context&quot;</span><span class="p">:</span> <span class="n">string</span><span class="p">,</span>
</span><span id="__span-24-8"><a id="__codelineno-24-8" name="__codelineno-24-8" href="#__codelineno-24-8"></a> <span class="p">}</span>
</span><span id="__span-24-9"><a id="__codelineno-24-9" name="__codelineno-24-9" href="#__codelineno-24-9"></a> <span class="p">}</span>
</span><span id="__span-24-10"><a id="__codelineno-24-10" name="__codelineno-24-10" href="#__codelineno-24-10"></a><span class="p">}</span>
</span></code></pre></div>
<table>
<thead>
<tr>
<th>Parameters</th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td><code>metric_spec</code></td>
<td>Optional: <code>SummarizationVerbositySpec</code> Metric spec, defining the metric's behavior.</td>
</tr>
<tr>
<td><code>instance</code></td>
<td>Optional: <code>SummarizationVerbosityInstance</code> Evaluation input, consisting of inference inputs and corresponding response.</td>
</tr>
<tr>
<td><code>instance.prediction</code></td>
<td>Optional: <code>string</code> LLM response.</td>
</tr>
<tr>
<td><code>instance.instruction</code></td>
<td>Optional: <code>string</code> Instruction used at inference time.</td>
</tr>
<tr>
<td><code>instance.context</code></td>
<td>Optional: <code>string</code> Inference-time text containing all information, which can be used in the LLM response.</td>
</tr>
</tbody>
</table>
<h4 id="summarizationverbosityresult"><code>SummarizationVerbosityResult</code><a class="headerlink" href="#summarizationverbosityresult" title="Permanent link">&para;</a></h4>
<div class="language-python highlight"><pre><span></span><code><span id="__span-25-1"><a id="__codelineno-25-1" name="__codelineno-25-1" href="#__codelineno-25-1"></a><span class="p">{</span>
</span><span id="__span-25-2"><a id="__codelineno-25-2" name="__codelineno-25-2" href="#__codelineno-25-2"></a> <span class="s2">&quot;summarization_verbosity_result&quot;</span><span class="p">:</span> <span class="p">{</span>
</span><span id="__span-25-3"><a id="__codelineno-25-3" name="__codelineno-25-3" href="#__codelineno-25-3"></a> <span class="s2">&quot;score&quot;</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span>
</span><span id="__span-25-4"><a id="__codelineno-25-4" name="__codelineno-25-4" href="#__codelineno-25-4"></a> <span class="s2">&quot;explanation&quot;</span><span class="p">:</span> <span class="n">string</span><span class="p">,</span>
</span><span id="__span-25-5"><a id="__codelineno-25-5" name="__codelineno-25-5" href="#__codelineno-25-5"></a> <span class="s2">&quot;confidence&quot;</span><span class="p">:</span> <span class="nb">float</span>
</span><span id="__span-25-6"><a id="__codelineno-25-6" name="__codelineno-25-6" href="#__codelineno-25-6"></a> <span class="p">}</span>
</span><span id="__span-25-7"><a id="__codelineno-25-7" name="__codelineno-25-7" href="#__codelineno-25-7"></a><span class="p">}</span>
</span></code></pre></div>
<table>
<thead>
<tr>
<th>Output</th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td><code>score</code></td>
<td><code>float</code>. One of the following: - <code>-2</code>: Terse - <code>-1</code>: Somewhat terse - <code>0</code>: Optimal - <code>1</code>: Somewhat verbose - <code>2</code>: Verbose</td>
</tr>
<tr>
<td><code>explanation</code></td>
<td><code>string</code>: Justification for score assignment.</td>
</tr>
<tr>
<td><code>confidence</code></td>
<td><code>float</code>: <code>[0, 1]</code> Confidence score of our result.</td>
</tr>
</tbody>
</table>
<h4 id="questionansweringqualityinput"><code>QuestionAnsweringQualityInput</code><a class="headerlink" href="#questionansweringqualityinput" title="Permanent link">&para;</a></h4>
<div class="language-python highlight"><pre><span></span><code><span id="__span-26-1"><a id="__codelineno-26-1" name="__codelineno-26-1" href="#__codelineno-26-1"></a><span class="p">{</span>
</span><span id="__span-26-2"><a id="__codelineno-26-2" name="__codelineno-26-2" href="#__codelineno-26-2"></a> <span class="s2">&quot;question_answering_quality_input&quot;</span><span class="p">:</span> <span class="p">{</span>
</span><span id="__span-26-3"><a id="__codelineno-26-3" name="__codelineno-26-3" href="#__codelineno-26-3"></a> <span class="s2">&quot;metric_spec&quot;</span><span class="p">:</span> <span class="p">{},</span>
</span><span id="__span-26-4"><a id="__codelineno-26-4" name="__codelineno-26-4" href="#__codelineno-26-4"></a> <span class="s2">&quot;instance&quot;</span><span class="p">:</span> <span class="p">{</span>
</span><span id="__span-26-5"><a id="__codelineno-26-5" name="__codelineno-26-5" href="#__codelineno-26-5"></a> <span class="s2">&quot;prediction&quot;</span><span class="p">:</span> <span class="n">string</span><span class="p">,</span>
</span><span id="__span-26-6"><a id="__codelineno-26-6" name="__codelineno-26-6" href="#__codelineno-26-6"></a> <span class="s2">&quot;instruction&quot;</span><span class="p">:</span> <span class="n">string</span><span class="p">,</span>
</span><span id="__span-26-7"><a id="__codelineno-26-7" name="__codelineno-26-7" href="#__codelineno-26-7"></a> <span class="s2">&quot;context&quot;</span><span class="p">:</span> <span class="n">string</span><span class="p">,</span>
</span><span id="__span-26-8"><a id="__codelineno-26-8" name="__codelineno-26-8" href="#__codelineno-26-8"></a> <span class="p">}</span>
</span><span id="__span-26-9"><a id="__codelineno-26-9" name="__codelineno-26-9" href="#__codelineno-26-9"></a> <span class="p">}</span>
</span><span id="__span-26-10"><a id="__codelineno-26-10" name="__codelineno-26-10" href="#__codelineno-26-10"></a><span class="p">}</span>
</span></code></pre></div>
<table>
<thead>
<tr>
<th>Parameters</th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td><code>metric_spec</code></td>
<td>Optional: <code>QuestionAnsweringQualitySpec</code> Metric spec, defining the metric's behavior.</td>
</tr>
<tr>
<td><code>instance</code></td>
<td>Optional: <code>QuestionAnsweringQualityInstance</code> Evaluation input, consisting of inference inputs and corresponding response.</td>
</tr>
<tr>
<td><code>instance.prediction</code></td>
<td>Optional: <code>string</code> LLM response.</td>
</tr>
<tr>
<td><code>instance.instruction</code></td>
<td>Optional: <code>string</code> Instruction used at inference time.</td>
</tr>
<tr>
<td><code>instance.context</code></td>
<td>Optional: <code>string</code> Inference-time text containing all information, which can be used in the LLM response.</td>
</tr>
</tbody>
</table>
<h4 id="questionansweringqualityresult"><code>QuestionAnsweringQualityResult</code><a class="headerlink" href="#questionansweringqualityresult" title="Permanent link">&para;</a></h4>
<div class="language-python highlight"><pre><span></span><code><span id="__span-27-1"><a id="__codelineno-27-1" name="__codelineno-27-1" href="#__codelineno-27-1"></a><span class="p">{</span>
</span><span id="__span-27-2"><a id="__codelineno-27-2" name="__codelineno-27-2" href="#__codelineno-27-2"></a> <span class="s2">&quot;question_answering_quality_result&quot;</span><span class="p">:</span> <span class="p">{</span>
</span><span id="__span-27-3"><a id="__codelineno-27-3" name="__codelineno-27-3" href="#__codelineno-27-3"></a> <span class="s2">&quot;score&quot;</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span>
</span><span id="__span-27-4"><a id="__codelineno-27-4" name="__codelineno-27-4" href="#__codelineno-27-4"></a> <span class="s2">&quot;explanation&quot;</span><span class="p">:</span> <span class="n">string</span><span class="p">,</span>
</span><span id="__span-27-5"><a id="__codelineno-27-5" name="__codelineno-27-5" href="#__codelineno-27-5"></a> <span class="s2">&quot;confidence&quot;</span><span class="p">:</span> <span class="nb">float</span>
</span><span id="__span-27-6"><a id="__codelineno-27-6" name="__codelineno-27-6" href="#__codelineno-27-6"></a> <span class="p">}</span>
</span><span id="__span-27-7"><a id="__codelineno-27-7" name="__codelineno-27-7" href="#__codelineno-27-7"></a><span class="p">}</span>
</span></code></pre></div>
<table>
<thead>
<tr>
<th>Output</th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td><code>score</code></td>
<td><code>float</code>: One of the following: - <code>1</code>: Very bad - <code>2</code>: Bad - <code>3</code>: Ok - <code>4</code>: Good - <code>5</code>: Very good</td>
</tr>
<tr>
<td><code>explanation</code></td>
<td><code>string</code>: Justification for score assignment.</td>
</tr>
<tr>
<td><code>confidence</code></td>
<td><code>float</code>: <code>[0, 1]</code> Confidence score of our result.</td>
</tr>
</tbody>
</table>
<h4 id="pairwisequestionansweringqualityinput"><code>PairwiseQuestionAnsweringQualityInput</code><a class="headerlink" href="#pairwisequestionansweringqualityinput" title="Permanent link">&para;</a></h4>
<div class="language-python highlight"><pre><span></span><code><span id="__span-28-1"><a id="__codelineno-28-1" name="__codelineno-28-1" href="#__codelineno-28-1"></a><span class="p">{</span>
</span><span id="__span-28-2"><a id="__codelineno-28-2" name="__codelineno-28-2" href="#__codelineno-28-2"></a> <span class="s2">&quot;question_answering_quality_input&quot;</span><span class="p">:</span> <span class="p">{</span>
</span><span id="__span-28-3"><a id="__codelineno-28-3" name="__codelineno-28-3" href="#__codelineno-28-3"></a> <span class="s2">&quot;metric_spec&quot;</span><span class="p">:</span> <span class="p">{},</span>
</span><span id="__span-28-4"><a id="__codelineno-28-4" name="__codelineno-28-4" href="#__codelineno-28-4"></a> <span class="s2">&quot;instance&quot;</span><span class="p">:</span> <span class="p">{</span>
</span><span id="__span-28-5"><a id="__codelineno-28-5" name="__codelineno-28-5" href="#__codelineno-28-5"></a> <span class="s2">&quot;baseline_prediction&quot;</span><span class="p">:</span> <span class="n">string</span><span class="p">,</span>
</span><span id="__span-28-6"><a id="__codelineno-28-6" name="__codelineno-28-6" href="#__codelineno-28-6"></a> <span class="s2">&quot;prediction&quot;</span><span class="p">:</span> <span class="n">string</span><span class="p">,</span>
</span><span id="__span-28-7"><a id="__codelineno-28-7" name="__codelineno-28-7" href="#__codelineno-28-7"></a> <span class="s2">&quot;instruction&quot;</span><span class="p">:</span> <span class="n">string</span><span class="p">,</span>
</span><span id="__span-28-8"><a id="__codelineno-28-8" name="__codelineno-28-8" href="#__codelineno-28-8"></a> <span class="s2">&quot;context&quot;</span><span class="p">:</span> <span class="n">string</span>
</span><span id="__span-28-9"><a id="__codelineno-28-9" name="__codelineno-28-9" href="#__codelineno-28-9"></a> <span class="p">}</span>
</span><span id="__span-28-10"><a id="__codelineno-28-10" name="__codelineno-28-10" href="#__codelineno-28-10"></a> <span class="p">}</span>
</span><span id="__span-28-11"><a id="__codelineno-28-11" name="__codelineno-28-11" href="#__codelineno-28-11"></a><span class="p">}</span>
</span></code></pre></div>
<table>
<thead>
<tr>
<th>Parameters</th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td><code>metric_spec</code></td>
<td>Optional: <code>QuestionAnsweringQualitySpec</code> Metric spec, defining the metric's behavior.</td>
</tr>
<tr>
<td><code>instance</code></td>
<td>Optional: <code>QuestionAnsweringQualityInstance</code> Evaluation input, consisting of inference inputs and corresponding response.</td>
</tr>
<tr>
<td><code>instance.baseline_prediction</code></td>
<td>Optional: <code>string</code> Baseline model LLM response.</td>
</tr>
<tr>
<td><code>instance.prediction</code></td>
<td>Optional: <code>string</code> Candidate model LLM response.</td>
</tr>
<tr>
<td><code>instance.instruction</code></td>
<td>Optional: <code>string</code> Instruction used at inference time.</td>
</tr>
<tr>
<td><code>instance.context</code></td>
<td>Optional: <code>string</code> Inference-time text containing all information, which can be used in the LLM response.</td>
</tr>
</tbody>
</table>
<h4 id="pairwisequestionansweringqualityresult"><code>PairwiseQuestionAnsweringQualityResult</code><a class="headerlink" href="#pairwisequestionansweringqualityresult" title="Permanent link">&para;</a></h4>
<div class="language-python highlight"><pre><span></span><code><span id="__span-29-1"><a id="__codelineno-29-1" name="__codelineno-29-1" href="#__codelineno-29-1"></a><span class="p">{</span>
</span><span id="__span-29-2"><a id="__codelineno-29-2" name="__codelineno-29-2" href="#__codelineno-29-2"></a> <span class="s2">&quot;pairwise_question_answering_quality_result&quot;</span><span class="p">:</span> <span class="p">{</span>
</span><span id="__span-29-3"><a id="__codelineno-29-3" name="__codelineno-29-3" href="#__codelineno-29-3"></a> <span class="s2">&quot;pairwise_choice&quot;</span><span class="p">:</span> <span class="n">PairwiseChoice</span><span class="p">,</span>
</span><span id="__span-29-4"><a id="__codelineno-29-4" name="__codelineno-29-4" href="#__codelineno-29-4"></a> <span class="s2">&quot;explanation&quot;</span><span class="p">:</span> <span class="n">string</span><span class="p">,</span>
</span><span id="__span-29-5"><a id="__codelineno-29-5" name="__codelineno-29-5" href="#__codelineno-29-5"></a> <span class="s2">&quot;confidence&quot;</span><span class="p">:</span> <span class="nb">float</span>
</span><span id="__span-29-6"><a id="__codelineno-29-6" name="__codelineno-29-6" href="#__codelineno-29-6"></a> <span class="p">}</span>
</span><span id="__span-29-7"><a id="__codelineno-29-7" name="__codelineno-29-7" href="#__codelineno-29-7"></a><span class="p">}</span>
</span></code></pre></div>
<table>
<thead>
<tr>
<th>Output</th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td><code>pairwise_choice</code></td>
<td><code>PairwiseChoice</code>: Enum with possible values as follows: - <code>BASELINE</code>: Baseline prediction is better - <code>CANDIDATE</code>: Candidate prediction is better - <code>TIE</code>: Tie between Baseline and Candidate predictions.</td>
</tr>
<tr>
<td><code>explanation</code></td>
<td><code>string</code>: Justification for <code>pairwise_choice</code> assignment.</td>
</tr>
<tr>
<td><code>confidence</code></td>
<td><code>float</code>: <code>[0, 1]</code> Confidence score of our result.</td>
</tr>
</tbody>
</table>
<h4 id="questionansweringrelevanceinput"><code>QuestionAnsweringRelevanceInput</code><a class="headerlink" href="#questionansweringrelevanceinput" title="Permanent link">&para;</a></h4>
<div class="language-python highlight"><pre><span></span><code><span id="__span-30-1"><a id="__codelineno-30-1" name="__codelineno-30-1" href="#__codelineno-30-1"></a><span class="p">{</span>
</span><span id="__span-30-2"><a id="__codelineno-30-2" name="__codelineno-30-2" href="#__codelineno-30-2"></a> <span class="s2">&quot;question_answering_quality_input&quot;</span><span class="p">:</span> <span class="p">{</span>
</span><span id="__span-30-3"><a id="__codelineno-30-3" name="__codelineno-30-3" href="#__codelineno-30-3"></a> <span class="s2">&quot;metric_spec&quot;</span><span class="p">:</span> <span class="p">{},</span>
</span><span id="__span-30-4"><a id="__codelineno-30-4" name="__codelineno-30-4" href="#__codelineno-30-4"></a> <span class="s2">&quot;instance&quot;</span><span class="p">:</span> <span class="p">{</span>
</span><span id="__span-30-5"><a id="__codelineno-30-5" name="__codelineno-30-5" href="#__codelineno-30-5"></a> <span class="s2">&quot;prediction&quot;</span><span class="p">:</span> <span class="n">string</span><span class="p">,</span>
</span><span id="__span-30-6"><a id="__codelineno-30-6" name="__codelineno-30-6" href="#__codelineno-30-6"></a> <span class="s2">&quot;instruction&quot;</span><span class="p">:</span> <span class="n">string</span><span class="p">,</span>
</span><span id="__span-30-7"><a id="__codelineno-30-7" name="__codelineno-30-7" href="#__codelineno-30-7"></a> <span class="s2">&quot;context&quot;</span><span class="p">:</span> <span class="n">string</span>
</span><span id="__span-30-8"><a id="__codelineno-30-8" name="__codelineno-30-8" href="#__codelineno-30-8"></a> <span class="p">}</span>
</span><span id="__span-30-9"><a id="__codelineno-30-9" name="__codelineno-30-9" href="#__codelineno-30-9"></a> <span class="p">}</span>
</span><span id="__span-30-10"><a id="__codelineno-30-10" name="__codelineno-30-10" href="#__codelineno-30-10"></a><span class="p">}</span>
</span></code></pre></div>
<table>
<thead>
<tr>
<th>Parameters</th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td><code>metric_spec</code></td>
<td>Optional: <code>QuestionAnsweringRelevanceSpec</code> Metric spec, defining the metric's behavior.</td>
</tr>
<tr>
<td><code>instance</code></td>
<td>Optional: <code>QuestionAnsweringRelevanceInstance</code> Evaluation input, consisting of inference inputs and corresponding response.</td>
</tr>
<tr>
<td><code>instance.prediction</code></td>
<td>Optional: <code>string</code> LLM response.</td>
</tr>
<tr>
<td><code>instance.instruction</code></td>
<td>Optional: <code>string</code> Instruction used at inference time.</td>
</tr>
<tr>
<td><code>instance.context</code></td>
<td>Optional: <code>string</code> Inference-time text containing all information, which can be used in the LLM response.</td>
</tr>
</tbody>
</table>
<h4 id="questionansweringrelevancyresult"><code>QuestionAnsweringRelevancyResult</code><a class="headerlink" href="#questionansweringrelevancyresult" title="Permanent link">&para;</a></h4>
<div class="language-python highlight"><pre><span></span><code><span id="__span-31-1"><a id="__codelineno-31-1" name="__codelineno-31-1" href="#__codelineno-31-1"></a><span class="p">{</span>
</span><span id="__span-31-2"><a id="__codelineno-31-2" name="__codelineno-31-2" href="#__codelineno-31-2"></a> <span class="s2">&quot;question_answering_relevancy_result&quot;</span><span class="p">:</span> <span class="p">{</span>
</span><span id="__span-31-3"><a id="__codelineno-31-3" name="__codelineno-31-3" href="#__codelineno-31-3"></a> <span class="s2">&quot;score&quot;</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span>
</span><span id="__span-31-4"><a id="__codelineno-31-4" name="__codelineno-31-4" href="#__codelineno-31-4"></a> <span class="s2">&quot;explanation&quot;</span><span class="p">:</span> <span class="n">string</span><span class="p">,</span>
</span><span id="__span-31-5"><a id="__codelineno-31-5" name="__codelineno-31-5" href="#__codelineno-31-5"></a> <span class="s2">&quot;confidence&quot;</span><span class="p">:</span> <span class="nb">float</span>
</span><span id="__span-31-6"><a id="__codelineno-31-6" name="__codelineno-31-6" href="#__codelineno-31-6"></a> <span class="p">}</span>
</span><span id="__span-31-7"><a id="__codelineno-31-7" name="__codelineno-31-7" href="#__codelineno-31-7"></a><span class="p">}</span>
</span></code></pre></div>
<table>
<thead>
<tr>
<th>Output</th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td><code>score</code></td>
<td><code>float</code>: One of the following: - <code>1</code>: Irrelevant - <code>2</code>: Somewhat irrelevant - <code>3</code>: Neutral - <code>4</code>: Somewhat relevant - <code>5</code>: Relevant</td>
</tr>
<tr>
<td><code>explanation</code></td>
<td><code>string</code>: Justification for score assignment.</td>
</tr>
<tr>
<td><code>confidence</code></td>
<td><code>float</code>: <code>[0, 1]</code> Confidence score of our result.</td>
</tr>
</tbody>
</table>
<h4 id="questionansweringhelpfulnessinput"><code>QuestionAnsweringHelpfulnessInput</code><a class="headerlink" href="#questionansweringhelpfulnessinput" title="Permanent link">&para;</a></h4>
<div class="language-python highlight"><pre><span></span><code><span id="__span-32-1"><a id="__codelineno-32-1" name="__codelineno-32-1" href="#__codelineno-32-1"></a><span class="p">{</span>
</span><span id="__span-32-2"><a id="__codelineno-32-2" name="__codelineno-32-2" href="#__codelineno-32-2"></a> <span class="s2">&quot;question_answering_helpfulness_input&quot;</span><span class="p">:</span> <span class="p">{</span>
</span><span id="__span-32-3"><a id="__codelineno-32-3" name="__codelineno-32-3" href="#__codelineno-32-3"></a> <span class="s2">&quot;metric_spec&quot;</span><span class="p">:</span> <span class="p">{},</span>
</span><span id="__span-32-4"><a id="__codelineno-32-4" name="__codelineno-32-4" href="#__codelineno-32-4"></a> <span class="s2">&quot;instance&quot;</span><span class="p">:</span> <span class="p">{</span>
</span><span id="__span-32-5"><a id="__codelineno-32-5" name="__codelineno-32-5" href="#__codelineno-32-5"></a> <span class="s2">&quot;prediction&quot;</span><span class="p">:</span> <span class="n">string</span><span class="p">,</span>
</span><span id="__span-32-6"><a id="__codelineno-32-6" name="__codelineno-32-6" href="#__codelineno-32-6"></a> <span class="s2">&quot;instruction&quot;</span><span class="p">:</span> <span class="n">string</span><span class="p">,</span>
</span><span id="__span-32-7"><a id="__codelineno-32-7" name="__codelineno-32-7" href="#__codelineno-32-7"></a> <span class="s2">&quot;context&quot;</span><span class="p">:</span> <span class="n">string</span>
</span><span id="__span-32-8"><a id="__codelineno-32-8" name="__codelineno-32-8" href="#__codelineno-32-8"></a> <span class="p">}</span>
</span><span id="__span-32-9"><a id="__codelineno-32-9" name="__codelineno-32-9" href="#__codelineno-32-9"></a> <span class="p">}</span>
</span><span id="__span-32-10"><a id="__codelineno-32-10" name="__codelineno-32-10" href="#__codelineno-32-10"></a><span class="p">}</span>
</span></code></pre></div>
<table>
<thead>
<tr>
<th>Parameters</th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td><code>metric_spec</code></td>
<td>Optional: <code>QuestionAnsweringHelpfulnessSpec</code> Metric spec, defining the metric's behavior.</td>
</tr>
<tr>
<td><code>instance</code></td>
<td>Optional: <code>QuestionAnsweringHelpfulnessInstance</code> Evaluation input, consisting of inference inputs and corresponding response.</td>
</tr>
<tr>
<td><code>instance.prediction</code></td>
<td>Optional: <code>string</code> LLM response.</td>
</tr>
<tr>
<td><code>instance.instruction</code></td>
<td>Optional: <code>string</code> Instruction used at inference time.</td>
</tr>
<tr>
<td><code>instance.context</code></td>
<td>Optional: <code>string</code> Inference-time text containing all information, which can be used in the LLM response.</td>
</tr>
</tbody>
</table>
<h4 id="questionansweringhelpfulnessresult"><code>QuestionAnsweringHelpfulnessResult</code><a class="headerlink" href="#questionansweringhelpfulnessresult" title="Permanent link">&para;</a></h4>
<div class="language-python highlight"><pre><span></span><code><span id="__span-33-1"><a id="__codelineno-33-1" name="__codelineno-33-1" href="#__codelineno-33-1"></a><span class="p">{</span>
</span><span id="__span-33-2"><a id="__codelineno-33-2" name="__codelineno-33-2" href="#__codelineno-33-2"></a> <span class="s2">&quot;question_answering_helpfulness_result&quot;</span><span class="p">:</span> <span class="p">{</span>
</span><span id="__span-33-3"><a id="__codelineno-33-3" name="__codelineno-33-3" href="#__codelineno-33-3"></a> <span class="s2">&quot;score&quot;</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span>
</span><span id="__span-33-4"><a id="__codelineno-33-4" name="__codelineno-33-4" href="#__codelineno-33-4"></a> <span class="s2">&quot;explanation&quot;</span><span class="p">:</span> <span class="n">string</span><span class="p">,</span>
</span><span id="__span-33-5"><a id="__codelineno-33-5" name="__codelineno-33-5" href="#__codelineno-33-5"></a> <span class="s2">&quot;confidence&quot;</span><span class="p">:</span> <span class="nb">float</span>
</span><span id="__span-33-6"><a id="__codelineno-33-6" name="__codelineno-33-6" href="#__codelineno-33-6"></a> <span class="p">}</span>
</span><span id="__span-33-7"><a id="__codelineno-33-7" name="__codelineno-33-7" href="#__codelineno-33-7"></a><span class="p">}</span>
</span></code></pre></div>
<table>
<thead>
<tr>
<th>Output</th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td><code>score</code></td>
<td><code>float</code>: One of the following: - <code>1</code>: Unhelpful - <code>2</code>: Somewhat unhelpful - <code>3</code>: Neutral - <code>4</code>: Somewhat helpful - <code>5</code>: Helpful</td>
</tr>
<tr>
<td><code>explanation</code></td>
<td><code>string</code>: Justification for score assignment.</td>
</tr>
<tr>
<td><code>confidence</code></td>
<td><code>float</code>: <code>[0, 1]</code> Confidence score of our result.</td>
</tr>
</tbody>
</table>
<h4 id="questionansweringcorrectnessinput"><code>QuestionAnsweringCorrectnessInput</code><a class="headerlink" href="#questionansweringcorrectnessinput" title="Permanent link">&para;</a></h4>
<div class="language-python highlight"><pre><span></span><code><span id="__span-34-1"><a id="__codelineno-34-1" name="__codelineno-34-1" href="#__codelineno-34-1"></a><span class="p">{</span>
</span><span id="__span-34-2"><a id="__codelineno-34-2" name="__codelineno-34-2" href="#__codelineno-34-2"></a> <span class="s2">&quot;question_answering_correctness_input&quot;</span><span class="p">:</span> <span class="p">{</span>
</span><span id="__span-34-3"><a id="__codelineno-34-3" name="__codelineno-34-3" href="#__codelineno-34-3"></a> <span class="s2">&quot;metric_spec&quot;</span><span class="p">:</span> <span class="p">{</span>
</span><span id="__span-34-4"><a id="__codelineno-34-4" name="__codelineno-34-4" href="#__codelineno-34-4"></a> <span class="s2">&quot;use_reference&quot;</span><span class="p">:</span> <span class="nb">bool</span>
</span><span id="__span-34-5"><a id="__codelineno-34-5" name="__codelineno-34-5" href="#__codelineno-34-5"></a> <span class="p">},</span>
</span><span id="__span-34-6"><a id="__codelineno-34-6" name="__codelineno-34-6" href="#__codelineno-34-6"></a> <span class="s2">&quot;instance&quot;</span><span class="p">:</span> <span class="p">{</span>
</span><span id="__span-34-7"><a id="__codelineno-34-7" name="__codelineno-34-7" href="#__codelineno-34-7"></a> <span class="s2">&quot;prediction&quot;</span><span class="p">:</span> <span class="n">string</span><span class="p">,</span>
</span><span id="__span-34-8"><a id="__codelineno-34-8" name="__codelineno-34-8" href="#__codelineno-34-8"></a> <span class="s2">&quot;reference&quot;</span><span class="p">:</span> <span class="n">string</span><span class="p">,</span>
</span><span id="__span-34-9"><a id="__codelineno-34-9" name="__codelineno-34-9" href="#__codelineno-34-9"></a> <span class="s2">&quot;instruction&quot;</span><span class="p">:</span> <span class="n">string</span><span class="p">,</span>
</span><span id="__span-34-10"><a id="__codelineno-34-10" name="__codelineno-34-10" href="#__codelineno-34-10"></a> <span class="s2">&quot;context&quot;</span><span class="p">:</span> <span class="n">string</span>
</span><span id="__span-34-11"><a id="__codelineno-34-11" name="__codelineno-34-11" href="#__codelineno-34-11"></a> <span class="p">}</span>
</span><span id="__span-34-12"><a id="__codelineno-34-12" name="__codelineno-34-12" href="#__codelineno-34-12"></a> <span class="p">}</span>
</span><span id="__span-34-13"><a id="__codelineno-34-13" name="__codelineno-34-13" href="#__codelineno-34-13"></a><span class="p">}</span>
</span></code></pre></div>
<table>
<thead>
<tr>
<th>Parameters</th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td><code>metric_spec</code></td>
<td>Optional: <code>QuestionAnsweringCorrectnessSpec</code> Metric spec, defining the metric's behavior.</td>
</tr>
<tr>
<td><code>metric_spec.use_reference</code></td>
<td>Optional: <code>bool</code> If reference is used or not in the evaluation.</td>
</tr>
<tr>
<td><code>instance</code></td>
<td>Optional: <code>QuestionAnsweringCorrectnessInstance</code> Evaluation input, consisting of inference inputs and corresponding response.</td>
</tr>
<tr>
<td><code>instance.prediction</code></td>
<td>Optional: <code>string</code> LLM response.</td>
</tr>
<tr>
<td><code>instance.reference</code></td>
<td>Optional: <code>string</code> Golden LLM response for reference.</td>
</tr>
<tr>
<td><code>instance.instruction</code></td>
<td>Optional: <code>string</code> Instruction used at inference time.</td>
</tr>
<tr>
<td><code>instance.context</code></td>
<td>Optional: <code>string</code> Inference-time text containing all information, which can be used in the LLM response.</td>
</tr>
</tbody>
</table>
<h4 id="questionansweringcorrectnessresult"><code>QuestionAnsweringCorrectnessResult</code><a class="headerlink" href="#questionansweringcorrectnessresult" title="Permanent link">&para;</a></h4>
<div class="language-python highlight"><pre><span></span><code><span id="__span-35-1"><a id="__codelineno-35-1" name="__codelineno-35-1" href="#__codelineno-35-1"></a><span class="p">{</span>
</span><span id="__span-35-2"><a id="__codelineno-35-2" name="__codelineno-35-2" href="#__codelineno-35-2"></a> <span class="s2">&quot;question_answering_correctness_result&quot;</span><span class="p">:</span> <span class="p">{</span>
</span><span id="__span-35-3"><a id="__codelineno-35-3" name="__codelineno-35-3" href="#__codelineno-35-3"></a> <span class="s2">&quot;score&quot;</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span>
</span><span id="__span-35-4"><a id="__codelineno-35-4" name="__codelineno-35-4" href="#__codelineno-35-4"></a> <span class="s2">&quot;explanation&quot;</span><span class="p">:</span> <span class="n">string</span><span class="p">,</span>
</span><span id="__span-35-5"><a id="__codelineno-35-5" name="__codelineno-35-5" href="#__codelineno-35-5"></a> <span class="s2">&quot;confidence&quot;</span><span class="p">:</span> <span class="nb">float</span>
</span><span id="__span-35-6"><a id="__codelineno-35-6" name="__codelineno-35-6" href="#__codelineno-35-6"></a> <span class="p">}</span>
</span><span id="__span-35-7"><a id="__codelineno-35-7" name="__codelineno-35-7" href="#__codelineno-35-7"></a><span class="p">}</span>
</span></code></pre></div>
<table>
<thead>
<tr>
<th>Output</th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td><code>score</code></td>
<td><code>float</code>: One of the following: - <code>0</code>: Incorrect - <code>1</code>: Correct</td>
</tr>
<tr>
<td><code>explanation</code></td>
<td><code>string</code>: Justification for score assignment.</td>
</tr>
<tr>
<td><code>confidence</code></td>
<td><code>float</code>: <code>[0, 1]</code> Confidence score of our result.</td>
</tr>
</tbody>
</table>
<h4 id="pointwisemetricinput"><code>PointwiseMetricInput</code><a class="headerlink" href="#pointwisemetricinput" title="Permanent link">&para;</a></h4>
<div class="language-python highlight"><pre><span></span><code><span id="__span-36-1"><a id="__codelineno-36-1" name="__codelineno-36-1" href="#__codelineno-36-1"></a><span class="p">{</span>
</span><span id="__span-36-2"><a id="__codelineno-36-2" name="__codelineno-36-2" href="#__codelineno-36-2"></a> <span class="s2">&quot;pointwise_metric_input&quot;</span><span class="p">:</span> <span class="p">{</span>
</span><span id="__span-36-3"><a id="__codelineno-36-3" name="__codelineno-36-3" href="#__codelineno-36-3"></a> <span class="s2">&quot;metric_spec&quot;</span><span class="p">:</span> <span class="p">{</span>
</span><span id="__span-36-4"><a id="__codelineno-36-4" name="__codelineno-36-4" href="#__codelineno-36-4"></a> <span class="s2">&quot;metric_prompt_template&quot;</span><span class="p">:</span> <span class="n">string</span>
</span><span id="__span-36-5"><a id="__codelineno-36-5" name="__codelineno-36-5" href="#__codelineno-36-5"></a> <span class="p">},</span>
</span><span id="__span-36-6"><a id="__codelineno-36-6" name="__codelineno-36-6" href="#__codelineno-36-6"></a> <span class="s2">&quot;instance&quot;</span><span class="p">:</span> <span class="p">{</span>
</span><span id="__span-36-7"><a id="__codelineno-36-7" name="__codelineno-36-7" href="#__codelineno-36-7"></a> <span class="s2">&quot;json_instance&quot;</span><span class="p">:</span> <span class="n">string</span><span class="p">,</span>
</span><span id="__span-36-8"><a id="__codelineno-36-8" name="__codelineno-36-8" href="#__codelineno-36-8"></a> <span class="p">}</span>
</span><span id="__span-36-9"><a id="__codelineno-36-9" name="__codelineno-36-9" href="#__codelineno-36-9"></a> <span class="p">}</span>
</span><span id="__span-36-10"><a id="__codelineno-36-10" name="__codelineno-36-10" href="#__codelineno-36-10"></a><span class="p">}</span>
</span></code></pre></div>
<table>
<thead>
<tr>
<th>Parameters</th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td><code>metric_spec</code></td>
<td>Required: <code>PointwiseMetricSpec</code> Metric spec, defining the metric's behavior.</td>
</tr>
<tr>
<td><code>metric_spec.metric_prompt_template</code></td>
<td>Required: <code>string</code> A prompt template defining the metric. It is rendered by the key-value pairs in instance.json_instance</td>
</tr>
<tr>
<td><code>instance</code></td>
<td>Required: <code>PointwiseMetricInstance</code> Evaluation input, consisting of json_instance.</td>
</tr>
<tr>
<td><code>instance.json_instance</code></td>
<td>Optional: <code>string</code> The key-value pairs in Json format. For example, {"key_1": "value_1", "key_2": "value_2"}. It is used to render metric_spec.metric_prompt_template.</td>
</tr>
</tbody>
</table>
<h4 id="pointwisemetricresult"><code>PointwiseMetricResult</code><a class="headerlink" href="#pointwisemetricresult" title="Permanent link">&para;</a></h4>
<div class="language-python highlight"><pre><span></span><code><span id="__span-37-1"><a id="__codelineno-37-1" name="__codelineno-37-1" href="#__codelineno-37-1"></a><span class="p">{</span>
</span><span id="__span-37-2"><a id="__codelineno-37-2" name="__codelineno-37-2" href="#__codelineno-37-2"></a> <span class="s2">&quot;pointwise_metric_result&quot;</span><span class="p">:</span> <span class="p">{</span>
</span><span id="__span-37-3"><a id="__codelineno-37-3" name="__codelineno-37-3" href="#__codelineno-37-3"></a> <span class="s2">&quot;score&quot;</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span>
</span><span id="__span-37-4"><a id="__codelineno-37-4" name="__codelineno-37-4" href="#__codelineno-37-4"></a> <span class="s2">&quot;explanation&quot;</span><span class="p">:</span> <span class="n">string</span><span class="p">,</span>
</span><span id="__span-37-5"><a id="__codelineno-37-5" name="__codelineno-37-5" href="#__codelineno-37-5"></a> <span class="p">}</span>
</span><span id="__span-37-6"><a id="__codelineno-37-6" name="__codelineno-37-6" href="#__codelineno-37-6"></a><span class="p">}</span>
</span></code></pre></div>
<table>
<thead>
<tr>
<th>Output</th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td><code>score</code></td>
<td><code>float</code>: A score for pointwise metric evaluation result.</td>
</tr>
<tr>
<td><code>explanation</code></td>
<td><code>string</code>: Justification for score assignment.</td>
</tr>
</tbody>
</table>
<h4 id="pairwisemetricinput"><code>PairwiseMetricInput</code><a class="headerlink" href="#pairwisemetricinput" title="Permanent link">&para;</a></h4>
<div class="language-python highlight"><pre><span></span><code><span id="__span-38-1"><a id="__codelineno-38-1" name="__codelineno-38-1" href="#__codelineno-38-1"></a><span class="p">{</span>
</span><span id="__span-38-2"><a id="__codelineno-38-2" name="__codelineno-38-2" href="#__codelineno-38-2"></a> <span class="s2">&quot;pairwise_metric_input&quot;</span><span class="p">:</span> <span class="p">{</span>
</span><span id="__span-38-3"><a id="__codelineno-38-3" name="__codelineno-38-3" href="#__codelineno-38-3"></a> <span class="s2">&quot;metric_spec&quot;</span><span class="p">:</span> <span class="p">{</span>
</span><span id="__span-38-4"><a id="__codelineno-38-4" name="__codelineno-38-4" href="#__codelineno-38-4"></a> <span class="s2">&quot;metric_prompt_template&quot;</span><span class="p">:</span> <span class="n">string</span>
</span><span id="__span-38-5"><a id="__codelineno-38-5" name="__codelineno-38-5" href="#__codelineno-38-5"></a> <span class="p">},</span>
</span><span id="__span-38-6"><a id="__codelineno-38-6" name="__codelineno-38-6" href="#__codelineno-38-6"></a> <span class="s2">&quot;instance&quot;</span><span class="p">:</span> <span class="p">{</span>
</span><span id="__span-38-7"><a id="__codelineno-38-7" name="__codelineno-38-7" href="#__codelineno-38-7"></a> <span class="s2">&quot;json_instance&quot;</span><span class="p">:</span> <span class="n">string</span><span class="p">,</span>
</span><span id="__span-38-8"><a id="__codelineno-38-8" name="__codelineno-38-8" href="#__codelineno-38-8"></a> <span class="p">}</span>
</span><span id="__span-38-9"><a id="__codelineno-38-9" name="__codelineno-38-9" href="#__codelineno-38-9"></a> <span class="p">}</span>
</span><span id="__span-38-10"><a id="__codelineno-38-10" name="__codelineno-38-10" href="#__codelineno-38-10"></a><span class="p">}</span>
</span></code></pre></div>
<table>
<thead>
<tr>
<th>Parameters</th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td><code>metric_spec</code></td>
<td>Required: <code>PairwiseMetricSpec</code> Metric spec, defining the metric's behavior.</td>
</tr>
<tr>
<td><code>metric_spec.metric_prompt_template</code></td>
<td>Required: <code>string</code> A prompt template defining the metric. It is rendered by the key-value pairs in instance.json_instance</td>
</tr>
<tr>
<td><code>instance</code></td>
<td>Required: <code>PairwiseMetricInstance</code> Evaluation input, consisting of json_instance.</td>
</tr>
<tr>
<td><code>instance.json_instance</code></td>
<td>Optional: <code>string</code> The key-value pairs in JSON format. For example, {"key_1": "value_1", "key_2": "value_2"}. It is used to render metric_spec.metric_prompt_template.</td>
</tr>
</tbody>
</table>
<h4 id="pairwisemetricresult"><code>PairwiseMetricResult</code><a class="headerlink" href="#pairwisemetricresult" title="Permanent link">&para;</a></h4>
<div class="language-python highlight"><pre><span></span><code><span id="__span-39-1"><a id="__codelineno-39-1" name="__codelineno-39-1" href="#__codelineno-39-1"></a><span class="p">{</span>
</span><span id="__span-39-2"><a id="__codelineno-39-2" name="__codelineno-39-2" href="#__codelineno-39-2"></a> <span class="s2">&quot;pairwise_metric_result&quot;</span><span class="p">:</span> <span class="p">{</span>
</span><span id="__span-39-3"><a id="__codelineno-39-3" name="__codelineno-39-3" href="#__codelineno-39-3"></a> <span class="s2">&quot;score&quot;</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span>
</span><span id="__span-39-4"><a id="__codelineno-39-4" name="__codelineno-39-4" href="#__codelineno-39-4"></a> <span class="s2">&quot;explanation&quot;</span><span class="p">:</span> <span class="n">string</span><span class="p">,</span>
</span><span id="__span-39-5"><a id="__codelineno-39-5" name="__codelineno-39-5" href="#__codelineno-39-5"></a> <span class="p">}</span>
</span><span id="__span-39-6"><a id="__codelineno-39-6" name="__codelineno-39-6" href="#__codelineno-39-6"></a><span class="p">}</span>
</span></code></pre></div>
<table>
<thead>
<tr>
<th>Output</th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td><code>score</code></td>
<td><code>float</code>: A score for pairwise metric evaluation result.</td>
</tr>
<tr>
<td><code>explanation</code></td>
<td><code>string</code>: Justification for score assignment.</td>
</tr>
</tbody>
</table>
<h4 id="toolcallvalidinput"><code>ToolCallValidInput</code><a class="headerlink" href="#toolcallvalidinput" title="Permanent link">&para;</a></h4>
<div class="language-python highlight"><pre><span></span><code><span id="__span-40-1"><a id="__codelineno-40-1" name="__codelineno-40-1" href="#__codelineno-40-1"></a><span class="p">{</span>
</span><span id="__span-40-2"><a id="__codelineno-40-2" name="__codelineno-40-2" href="#__codelineno-40-2"></a> <span class="s2">&quot;tool_call_valid_input&quot;</span><span class="p">:</span> <span class="p">{</span>
</span><span id="__span-40-3"><a id="__codelineno-40-3" name="__codelineno-40-3" href="#__codelineno-40-3"></a> <span class="s2">&quot;metric_spec&quot;</span><span class="p">:</span> <span class="p">{},</span>
</span><span id="__span-40-4"><a id="__codelineno-40-4" name="__codelineno-40-4" href="#__codelineno-40-4"></a> <span class="s2">&quot;instance&quot;</span><span class="p">:</span> <span class="p">{</span>
</span><span id="__span-40-5"><a id="__codelineno-40-5" name="__codelineno-40-5" href="#__codelineno-40-5"></a> <span class="s2">&quot;prediction&quot;</span><span class="p">:</span> <span class="n">string</span><span class="p">,</span>
</span><span id="__span-40-6"><a id="__codelineno-40-6" name="__codelineno-40-6" href="#__codelineno-40-6"></a> <span class="s2">&quot;reference&quot;</span><span class="p">:</span> <span class="n">string</span>
</span><span id="__span-40-7"><a id="__codelineno-40-7" name="__codelineno-40-7" href="#__codelineno-40-7"></a> <span class="p">}</span>
</span><span id="__span-40-8"><a id="__codelineno-40-8" name="__codelineno-40-8" href="#__codelineno-40-8"></a> <span class="p">}</span>
</span><span id="__span-40-9"><a id="__codelineno-40-9" name="__codelineno-40-9" href="#__codelineno-40-9"></a><span class="p">}</span>
</span></code></pre></div>
<table>
<thead>
<tr>
<th>Parameters</th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td><code>metric_spec</code></td>
<td>Optional: <code>ToolCallValidSpec</code> Metric spec, defining the metric's behavior.</td>
</tr>
<tr>
<td><code>instance</code></td>
<td>Optional: <code>ToolCallValidInstance</code> Evaluation input, consisting of LLM response and reference.</td>
</tr>
<tr>
<td><code>instance.prediction</code></td>
<td>Optional: <code>string</code> Candidate model LLM response, which is a JSON serialized string that contains <code>content</code> and <code>tool_calls</code> keys. The <code>content</code> value is the text output from the model. The <code>tool_call</code> value is a JSON serialized string of a list of tool calls. An example is: <code>python { "content": "", "tool_calls": [ { "name": "book_tickets", "arguments": { "movie": "Mission Impossible Dead Reckoning Part 1", "theater": "Regal Edwards 14", "location": "Mountain View CA", "showtime": "7:30", "date": "2024-03-30", "num_tix": "2" } } ] }</code></td>
</tr>
<tr>
<td><code>instance.reference</code></td>
<td>Optional: <code>string</code> Golden model output in the same format as prediction.</td>
</tr>
</tbody>
</table>
<h4 id="toolcallvalidresults"><code>ToolCallValidResults</code><a class="headerlink" href="#toolcallvalidresults" title="Permanent link">&para;</a></h4>
<div class="language-python highlight"><pre><span></span><code><span id="__span-41-1"><a id="__codelineno-41-1" name="__codelineno-41-1" href="#__codelineno-41-1"></a><span class="p">{</span>
</span><span id="__span-41-2"><a id="__codelineno-41-2" name="__codelineno-41-2" href="#__codelineno-41-2"></a> <span class="s2">&quot;tool_call_valid_results&quot;</span><span class="p">:</span> <span class="p">{</span>
</span><span id="__span-41-3"><a id="__codelineno-41-3" name="__codelineno-41-3" href="#__codelineno-41-3"></a> <span class="s2">&quot;tool_call_valid_metric_values&quot;</span><span class="p">:</span> <span class="p">[</span>
</span><span id="__span-41-4"><a id="__codelineno-41-4" name="__codelineno-41-4" href="#__codelineno-41-4"></a> <span class="p">{</span>
</span><span id="__span-41-5"><a id="__codelineno-41-5" name="__codelineno-41-5" href="#__codelineno-41-5"></a> <span class="s2">&quot;score&quot;</span><span class="p">:</span> <span class="nb">float</span>
</span><span id="__span-41-6"><a id="__codelineno-41-6" name="__codelineno-41-6" href="#__codelineno-41-6"></a> <span class="p">}</span>
</span><span id="__span-41-7"><a id="__codelineno-41-7" name="__codelineno-41-7" href="#__codelineno-41-7"></a> <span class="p">]</span>
</span><span id="__span-41-8"><a id="__codelineno-41-8" name="__codelineno-41-8" href="#__codelineno-41-8"></a> <span class="p">}</span>
</span><span id="__span-41-9"><a id="__codelineno-41-9" name="__codelineno-41-9" href="#__codelineno-41-9"></a><span class="p">}</span>
</span></code></pre></div>
<table>
<thead>
<tr>
<th>Output</th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td><code>tool_call_valid_metric_values</code></td>
<td>repeated <code>ToolCallValidMetricValue</code>: Evaluation results per instance input.</td>
</tr>
<tr>
<td><code>tool_call_valid_metric_values.score</code></td>
<td><code>float</code>: One of the following: - <code>0</code>: Invalid tool call - <code>1</code>: Valid tool call</td>
</tr>
</tbody>
</table>
<h4 id="toolnamematchinput"><code>ToolNameMatchInput</code><a class="headerlink" href="#toolnamematchinput" title="Permanent link">&para;</a></h4>
<div class="language-python highlight"><pre><span></span><code><span id="__span-42-1"><a id="__codelineno-42-1" name="__codelineno-42-1" href="#__codelineno-42-1"></a><span class="p">{</span>
</span><span id="__span-42-2"><a id="__codelineno-42-2" name="__codelineno-42-2" href="#__codelineno-42-2"></a> <span class="s2">&quot;tool_name_match_input&quot;</span><span class="p">:</span> <span class="p">{</span>
</span><span id="__span-42-3"><a id="__codelineno-42-3" name="__codelineno-42-3" href="#__codelineno-42-3"></a> <span class="s2">&quot;metric_spec&quot;</span><span class="p">:</span> <span class="p">{},</span>
</span><span id="__span-42-4"><a id="__codelineno-42-4" name="__codelineno-42-4" href="#__codelineno-42-4"></a> <span class="s2">&quot;instance&quot;</span><span class="p">:</span> <span class="p">{</span>
</span><span id="__span-42-5"><a id="__codelineno-42-5" name="__codelineno-42-5" href="#__codelineno-42-5"></a> <span class="s2">&quot;prediction&quot;</span><span class="p">:</span> <span class="n">string</span><span class="p">,</span>
</span><span id="__span-42-6"><a id="__codelineno-42-6" name="__codelineno-42-6" href="#__codelineno-42-6"></a> <span class="s2">&quot;reference&quot;</span><span class="p">:</span> <span class="n">string</span>
</span><span id="__span-42-7"><a id="__codelineno-42-7" name="__codelineno-42-7" href="#__codelineno-42-7"></a> <span class="p">}</span>
</span><span id="__span-42-8"><a id="__codelineno-42-8" name="__codelineno-42-8" href="#__codelineno-42-8"></a> <span class="p">}</span>
</span><span id="__span-42-9"><a id="__codelineno-42-9" name="__codelineno-42-9" href="#__codelineno-42-9"></a><span class="p">}</span>
</span></code></pre></div>
<table>
<thead>
<tr>
<th>Parameters</th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td><code>metric_spec</code></td>
<td>Optional: <code>ToolNameMatchSpec</code> Metric spec, defining the metric's behavior.</td>
</tr>
<tr>
<td><code>instance</code></td>
<td>Optional: <code>ToolNameMatchInstance</code> Evaluation input, consisting of LLM response and reference.</td>
</tr>
<tr>
<td><code>instance.prediction</code></td>
<td>Optional: <code>string</code> Candidate model LLM response, which is a JSON serialized string that contains <code>content</code> and <code>tool_calls</code> keys. The <code>content</code> value is the text output from the model. The <code>tool_call</code> value is a JSON serialized string of a list of tool calls.</td>
</tr>
<tr>
<td><code>instance.reference</code></td>
<td>Optional: <code>string</code> Golden model output in the same format as prediction.</td>
</tr>
</tbody>
</table>
<h4 id="toolnamematchresults"><code>ToolNameMatchResults</code><a class="headerlink" href="#toolnamematchresults" title="Permanent link">&para;</a></h4>
<div class="language-python highlight"><pre><span></span><code><span id="__span-43-1"><a id="__codelineno-43-1" name="__codelineno-43-1" href="#__codelineno-43-1"></a><span class="p">{</span>
</span><span id="__span-43-2"><a id="__codelineno-43-2" name="__codelineno-43-2" href="#__codelineno-43-2"></a> <span class="s2">&quot;tool_name_match_results&quot;</span><span class="p">:</span> <span class="p">{</span>
</span><span id="__span-43-3"><a id="__codelineno-43-3" name="__codelineno-43-3" href="#__codelineno-43-3"></a> <span class="s2">&quot;tool_name_match_metric_values&quot;</span><span class="p">:</span> <span class="p">[</span>
</span><span id="__span-43-4"><a id="__codelineno-43-4" name="__codelineno-43-4" href="#__codelineno-43-4"></a> <span class="p">{</span>
</span><span id="__span-43-5"><a id="__codelineno-43-5" name="__codelineno-43-5" href="#__codelineno-43-5"></a> <span class="s2">&quot;score&quot;</span><span class="p">:</span> <span class="nb">float</span>
</span><span id="__span-43-6"><a id="__codelineno-43-6" name="__codelineno-43-6" href="#__codelineno-43-6"></a> <span class="p">}</span>
</span><span id="__span-43-7"><a id="__codelineno-43-7" name="__codelineno-43-7" href="#__codelineno-43-7"></a> <span class="p">]</span>
</span><span id="__span-43-8"><a id="__codelineno-43-8" name="__codelineno-43-8" href="#__codelineno-43-8"></a> <span class="p">}</span>
</span><span id="__span-43-9"><a id="__codelineno-43-9" name="__codelineno-43-9" href="#__codelineno-43-9"></a><span class="p">}</span>
</span></code></pre></div>
<table>
<thead>
<tr>
<th>Output</th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td><code>tool_name_match_metric_values</code></td>
<td>repeated <code>ToolNameMatchMetricValue</code>: Evaluation results per instance input.</td>
</tr>
<tr>
<td><code>tool_name_match_metric_values.score</code></td>
<td><code>float</code>: One of the following: - <code>0</code>: Tool call name doesn't match the reference. - <code>1</code>: Tool call name matches the reference.</td>
</tr>
</tbody>
</table>
<h4 id="toolparameterkeymatchinput"><code>ToolParameterKeyMatchInput</code><a class="headerlink" href="#toolparameterkeymatchinput" title="Permanent link">&para;</a></h4>
<div class="language-python highlight"><pre><span></span><code><span id="__span-44-1"><a id="__codelineno-44-1" name="__codelineno-44-1" href="#__codelineno-44-1"></a><span class="p">{</span>
</span><span id="__span-44-2"><a id="__codelineno-44-2" name="__codelineno-44-2" href="#__codelineno-44-2"></a> <span class="s2">&quot;tool_parameter_key_match_input&quot;</span><span class="p">:</span> <span class="p">{</span>
</span><span id="__span-44-3"><a id="__codelineno-44-3" name="__codelineno-44-3" href="#__codelineno-44-3"></a> <span class="s2">&quot;metric_spec&quot;</span><span class="p">:</span> <span class="p">{},</span>
</span><span id="__span-44-4"><a id="__codelineno-44-4" name="__codelineno-44-4" href="#__codelineno-44-4"></a> <span class="s2">&quot;instance&quot;</span><span class="p">:</span> <span class="p">{</span>
</span><span id="__span-44-5"><a id="__codelineno-44-5" name="__codelineno-44-5" href="#__codelineno-44-5"></a> <span class="s2">&quot;prediction&quot;</span><span class="p">:</span> <span class="n">string</span><span class="p">,</span>
</span><span id="__span-44-6"><a id="__codelineno-44-6" name="__codelineno-44-6" href="#__codelineno-44-6"></a> <span class="s2">&quot;reference&quot;</span><span class="p">:</span> <span class="n">string</span>
</span><span id="__span-44-7"><a id="__codelineno-44-7" name="__codelineno-44-7" href="#__codelineno-44-7"></a> <span class="p">}</span>
</span><span id="__span-44-8"><a id="__codelineno-44-8" name="__codelineno-44-8" href="#__codelineno-44-8"></a> <span class="p">}</span>
</span><span id="__span-44-9"><a id="__codelineno-44-9" name="__codelineno-44-9" href="#__codelineno-44-9"></a><span class="p">}</span>
</span></code></pre></div>
<table>
<thead>
<tr>
<th>Parameters</th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td><code>metric_spec</code></td>
<td>Optional: <code>ToolParameterKeyMatchSpec</code> Metric spec, defining the metric's behavior.</td>
</tr>
<tr>
<td><code>instance</code></td>
<td>Optional: <code>ToolParameterKeyMatchInstance</code> Evaluation input, consisting of LLM response and reference.</td>
</tr>
<tr>
<td><code>instance.prediction</code></td>
<td>Optional: <code>string</code> Candidate model LLM response, which is a JSON serialized string that contains <code>content</code> and <code>tool_calls</code> keys. The <code>content</code> value is the text output from the model. The <code>tool_call</code> value is a JSON serialized string of a list of tool calls.</td>
</tr>
<tr>
<td><code>instance.reference</code></td>
<td>Optional: <code>string</code> Golden model output in the same format as prediction.</td>
</tr>
</tbody>
</table>
<h4 id="toolparameterkeymatchresults"><code>ToolParameterKeyMatchResults</code><a class="headerlink" href="#toolparameterkeymatchresults" title="Permanent link">&para;</a></h4>
<div class="language-python highlight"><pre><span></span><code><span id="__span-45-1"><a id="__codelineno-45-1" name="__codelineno-45-1" href="#__codelineno-45-1"></a><span class="p">{</span>
</span><span id="__span-45-2"><a id="__codelineno-45-2" name="__codelineno-45-2" href="#__codelineno-45-2"></a> <span class="s2">&quot;tool_parameter_key_match_results&quot;</span><span class="p">:</span> <span class="p">{</span>
</span><span id="__span-45-3"><a id="__codelineno-45-3" name="__codelineno-45-3" href="#__codelineno-45-3"></a> <span class="s2">&quot;tool_parameter_key_match_metric_values&quot;</span><span class="p">:</span> <span class="p">[</span>
</span><span id="__span-45-4"><a id="__codelineno-45-4" name="__codelineno-45-4" href="#__codelineno-45-4"></a> <span class="p">{</span>
</span><span id="__span-45-5"><a id="__codelineno-45-5" name="__codelineno-45-5" href="#__codelineno-45-5"></a> <span class="s2">&quot;score&quot;</span><span class="p">:</span> <span class="nb">float</span>
</span><span id="__span-45-6"><a id="__codelineno-45-6" name="__codelineno-45-6" href="#__codelineno-45-6"></a> <span class="p">}</span>
</span><span id="__span-45-7"><a id="__codelineno-45-7" name="__codelineno-45-7" href="#__codelineno-45-7"></a> <span class="p">]</span>
</span><span id="__span-45-8"><a id="__codelineno-45-8" name="__codelineno-45-8" href="#__codelineno-45-8"></a> <span class="p">}</span>
</span><span id="__span-45-9"><a id="__codelineno-45-9" name="__codelineno-45-9" href="#__codelineno-45-9"></a><span class="p">}</span>
</span></code></pre></div>
<table>
<thead>
<tr>
<th>Output</th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td><code>tool_parameter_key_match_metric_values</code></td>
<td>repeated <code>ToolParameterKeyMatchMetricValue</code>: Evaluation results per instance input.</td>
</tr>
<tr>
<td><code>tool_parameter_key_match_metric_values.score</code></td>
<td><code>float</code>: <code>[0, 1]</code>, where higher scores mean more parameters match the reference parameters' names.</td>
</tr>
</tbody>
</table>
<h4 id="toolparameterkvmatchinput"><code>ToolParameterKVMatchInput</code><a class="headerlink" href="#toolparameterkvmatchinput" title="Permanent link">&para;</a></h4>
<div class="language-python highlight"><pre><span></span><code><span id="__span-46-1"><a id="__codelineno-46-1" name="__codelineno-46-1" href="#__codelineno-46-1"></a><span class="p">{</span>
</span><span id="__span-46-2"><a id="__codelineno-46-2" name="__codelineno-46-2" href="#__codelineno-46-2"></a> <span class="s2">&quot;tool_parameter_kv_match_input&quot;</span><span class="p">:</span> <span class="p">{</span>
</span><span id="__span-46-3"><a id="__codelineno-46-3" name="__codelineno-46-3" href="#__codelineno-46-3"></a> <span class="s2">&quot;metric_spec&quot;</span><span class="p">:</span> <span class="p">{},</span>
</span><span id="__span-46-4"><a id="__codelineno-46-4" name="__codelineno-46-4" href="#__codelineno-46-4"></a> <span class="s2">&quot;instance&quot;</span><span class="p">:</span> <span class="p">{</span>
</span><span id="__span-46-5"><a id="__codelineno-46-5" name="__codelineno-46-5" href="#__codelineno-46-5"></a> <span class="s2">&quot;prediction&quot;</span><span class="p">:</span> <span class="n">string</span><span class="p">,</span>
</span><span id="__span-46-6"><a id="__codelineno-46-6" name="__codelineno-46-6" href="#__codelineno-46-6"></a> <span class="s2">&quot;reference&quot;</span><span class="p">:</span> <span class="n">string</span>
</span><span id="__span-46-7"><a id="__codelineno-46-7" name="__codelineno-46-7" href="#__codelineno-46-7"></a> <span class="p">}</span>
</span><span id="__span-46-8"><a id="__codelineno-46-8" name="__codelineno-46-8" href="#__codelineno-46-8"></a> <span class="p">}</span>
</span><span id="__span-46-9"><a id="__codelineno-46-9" name="__codelineno-46-9" href="#__codelineno-46-9"></a><span class="p">}</span>
</span></code></pre></div>
<table>
<thead>
<tr>
<th>Parameters</th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td><code>metric_spec</code></td>
<td>Optional: <code>ToolParameterKVMatchSpec</code> Metric spec, defining the metric's behavior.</td>
</tr>
<tr>
<td><code>instance</code></td>
<td>Optional: <code>ToolParameterKVMatchInstance</code> Evaluation input, consisting of LLM response and reference.</td>
</tr>
<tr>
<td><code>instance.prediction</code></td>
<td>Optional: <code>string</code> Candidate model LLM response, which is a JSON serialized string that contains <code>content</code> and <code>tool_calls</code> keys. The <code>content</code> value is the text output from the model. The <code>tool_call</code> value is a JSON serialized string of a list of tool calls.</td>
</tr>
<tr>
<td><code>instance.reference</code></td>
<td>Optional: <code>string</code> Golden model output in the same format as prediction.</td>
</tr>
</tbody>
</table>
<h4 id="toolparameterkvmatchresults"><code>ToolParameterKVMatchResults</code><a class="headerlink" href="#toolparameterkvmatchresults" title="Permanent link">&para;</a></h4>
<div class="language-python highlight"><pre><span></span><code><span id="__span-47-1"><a id="__codelineno-47-1" name="__codelineno-47-1" href="#__codelineno-47-1"></a><span class="p">{</span>
</span><span id="__span-47-2"><a id="__codelineno-47-2" name="__codelineno-47-2" href="#__codelineno-47-2"></a> <span class="s2">&quot;tool_parameter_kv_match_results&quot;</span><span class="p">:</span> <span class="p">{</span>
</span><span id="__span-47-3"><a id="__codelineno-47-3" name="__codelineno-47-3" href="#__codelineno-47-3"></a> <span class="s2">&quot;tool_parameter_kv_match_metric_values&quot;</span><span class="p">:</span> <span class="p">[</span>
</span><span id="__span-47-4"><a id="__codelineno-47-4" name="__codelineno-47-4" href="#__codelineno-47-4"></a> <span class="p">{</span>
</span><span id="__span-47-5"><a id="__codelineno-47-5" name="__codelineno-47-5" href="#__codelineno-47-5"></a> <span class="s2">&quot;score&quot;</span><span class="p">:</span> <span class="nb">float</span>
</span><span id="__span-47-6"><a id="__codelineno-47-6" name="__codelineno-47-6" href="#__codelineno-47-6"></a> <span class="p">}</span>
</span><span id="__span-47-7"><a id="__codelineno-47-7" name="__codelineno-47-7" href="#__codelineno-47-7"></a> <span class="p">]</span>
</span><span id="__span-47-8"><a id="__codelineno-47-8" name="__codelineno-47-8" href="#__codelineno-47-8"></a> <span class="p">}</span>
</span><span id="__span-47-9"><a id="__codelineno-47-9" name="__codelineno-47-9" href="#__codelineno-47-9"></a><span class="p">}</span>
</span></code></pre></div>
<table>
<thead>
<tr>
<th>Output</th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td><code>tool_parameter_kv_match_metric_values</code></td>
<td>repeated <code>ToolParameterKVMatchMetricValue</code>: Evaluation results per instance input.</td>
</tr>
<tr>
<td><code>tool_parameter_kv_match_metric_values.score</code></td>
<td><code>float</code>: <code>[0, 1]</code>, where higher scores mean more parameters match the reference parameters' names and values.</td>
</tr>
</tbody>
</table>
<h4 id="cometinput"><code>CometInput</code><a class="headerlink" href="#cometinput" title="Permanent link">&para;</a></h4>
<div class="language-python highlight"><pre><span></span><code><span id="__span-48-1"><a id="__codelineno-48-1" name="__codelineno-48-1" href="#__codelineno-48-1"></a><span class="p">{</span>
</span><span id="__span-48-2"><a id="__codelineno-48-2" name="__codelineno-48-2" href="#__codelineno-48-2"></a> <span class="s2">&quot;comet_input&quot;</span> <span class="p">:</span> <span class="p">{</span>
</span><span id="__span-48-3"><a id="__codelineno-48-3" name="__codelineno-48-3" href="#__codelineno-48-3"></a> <span class="s2">&quot;metric_spec&quot;</span> <span class="p">:</span> <span class="p">{</span>
</span><span id="__span-48-4"><a id="__codelineno-48-4" name="__codelineno-48-4" href="#__codelineno-48-4"></a> <span class="s2">&quot;version&quot;</span><span class="p">:</span> <span class="n">string</span>
</span><span id="__span-48-5"><a id="__codelineno-48-5" name="__codelineno-48-5" href="#__codelineno-48-5"></a> <span class="p">},</span>
</span><span id="__span-48-6"><a id="__codelineno-48-6" name="__codelineno-48-6" href="#__codelineno-48-6"></a> <span class="s2">&quot;instance&quot;</span><span class="p">:</span> <span class="p">{</span>
</span><span id="__span-48-7"><a id="__codelineno-48-7" name="__codelineno-48-7" href="#__codelineno-48-7"></a> <span class="s2">&quot;prediction&quot;</span><span class="p">:</span> <span class="n">string</span><span class="p">,</span>
</span><span id="__span-48-8"><a id="__codelineno-48-8" name="__codelineno-48-8" href="#__codelineno-48-8"></a> <span class="s2">&quot;source&quot;</span><span class="p">:</span> <span class="n">string</span><span class="p">,</span>
</span><span id="__span-48-9"><a id="__codelineno-48-9" name="__codelineno-48-9" href="#__codelineno-48-9"></a> <span class="s2">&quot;reference&quot;</span><span class="p">:</span> <span class="n">string</span><span class="p">,</span>
</span><span id="__span-48-10"><a id="__codelineno-48-10" name="__codelineno-48-10" href="#__codelineno-48-10"></a> <span class="p">},</span>
</span><span id="__span-48-11"><a id="__codelineno-48-11" name="__codelineno-48-11" href="#__codelineno-48-11"></a> <span class="p">}</span>
</span><span id="__span-48-12"><a id="__codelineno-48-12" name="__codelineno-48-12" href="#__codelineno-48-12"></a><span class="p">}</span>
</span></code></pre></div>
<table>
<thead>
<tr>
<th>Parameters</th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td><code>metric_spec</code></td>
<td>Optional: <code>CometSpec</code> Metric spec, defining the metric's behavior.</td>
</tr>
<tr>
<td><code>metric_spec.version</code></td>
<td>Optional: <code>string</code> <code>COMET_22_SRC_REF</code>: COMET 22 for translation, source, and reference. It evaluates the translation (prediction) using all three inputs.</td>
</tr>
<tr>
<td><code>metric_spec.source_language</code></td>
<td>Optional: <code>string</code> Source language in <a href="https://en.wikipedia.org/wiki/IETF_language_tag">BCP-47 format</a>. For example, "es".</td>
</tr>
<tr>
<td><code>metric_spec.target_language</code></td>
<td>Optional: <code>string</code> Target language in <a href="https://en.wikipedia.org/wiki/IETF_language_tag">BCP-47 format</a>. For example, "es"</td>
</tr>
<tr>
<td><code>instance</code></td>
<td>Optional: <code>CometInstance</code> Evaluation input, consisting of LLM response and reference. The exact fields used for evaluation are dependent on the COMET version.</td>
</tr>
<tr>
<td><code>instance.prediction</code></td>
<td>Optional: <code>string</code> Candidate model LLM response. This is the output of the LLM which is being evaluated.</td>
</tr>
<tr>
<td><code>instance.source</code></td>
<td>Optional: <code>string</code> Source text. This is in the original language that the prediction was translated from.</td>
</tr>
<tr>
<td><code>instance.reference</code></td>
<td>Optional: <code>string</code> Ground truth used to compare against the prediction. This is in the same language as the prediction.</td>
</tr>
</tbody>
</table>
<h4 id="cometresult"><code>CometResult</code><a class="headerlink" href="#cometresult" title="Permanent link">&para;</a></h4>
<div class="language-python highlight"><pre><span></span><code><span id="__span-49-1"><a id="__codelineno-49-1" name="__codelineno-49-1" href="#__codelineno-49-1"></a><span class="p">{</span>
</span><span id="__span-49-2"><a id="__codelineno-49-2" name="__codelineno-49-2" href="#__codelineno-49-2"></a> <span class="s2">&quot;comet_result&quot;</span> <span class="p">:</span> <span class="p">{</span>
</span><span id="__span-49-3"><a id="__codelineno-49-3" name="__codelineno-49-3" href="#__codelineno-49-3"></a> <span class="s2">&quot;score&quot;</span><span class="p">:</span> <span class="nb">float</span>
</span><span id="__span-49-4"><a id="__codelineno-49-4" name="__codelineno-49-4" href="#__codelineno-49-4"></a> <span class="p">}</span>
</span><span id="__span-49-5"><a id="__codelineno-49-5" name="__codelineno-49-5" href="#__codelineno-49-5"></a><span class="p">}</span>
</span></code></pre></div>
<table>
<thead>
<tr>
<th>Output</th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td><code>score</code></td>
<td><code>float</code>: <code>[0, 1]</code>, where 1 represents a perfect translation.</td>
</tr>
</tbody>
</table>
<h4 id="metricxinput"><code>MetricxInput</code><a class="headerlink" href="#metricxinput" title="Permanent link">&para;</a></h4>
<div class="language-python highlight"><pre><span></span><code><span id="__span-50-1"><a id="__codelineno-50-1" name="__codelineno-50-1" href="#__codelineno-50-1"></a><span class="p">{</span>
</span><span id="__span-50-2"><a id="__codelineno-50-2" name="__codelineno-50-2" href="#__codelineno-50-2"></a> <span class="s2">&quot;metricx_input&quot;</span> <span class="p">:</span> <span class="p">{</span>
</span><span id="__span-50-3"><a id="__codelineno-50-3" name="__codelineno-50-3" href="#__codelineno-50-3"></a> <span class="s2">&quot;metric_spec&quot;</span> <span class="p">:</span> <span class="p">{</span>
</span><span id="__span-50-4"><a id="__codelineno-50-4" name="__codelineno-50-4" href="#__codelineno-50-4"></a> <span class="s2">&quot;version&quot;</span><span class="p">:</span> <span class="n">string</span>
</span><span id="__span-50-5"><a id="__codelineno-50-5" name="__codelineno-50-5" href="#__codelineno-50-5"></a> <span class="p">},</span>
</span><span id="__span-50-6"><a id="__codelineno-50-6" name="__codelineno-50-6" href="#__codelineno-50-6"></a> <span class="s2">&quot;instance&quot;</span><span class="p">:</span> <span class="p">{</span>
</span><span id="__span-50-7"><a id="__codelineno-50-7" name="__codelineno-50-7" href="#__codelineno-50-7"></a> <span class="s2">&quot;prediction&quot;</span><span class="p">:</span> <span class="n">string</span><span class="p">,</span>
</span><span id="__span-50-8"><a id="__codelineno-50-8" name="__codelineno-50-8" href="#__codelineno-50-8"></a> <span class="s2">&quot;source&quot;</span><span class="p">:</span> <span class="n">string</span><span class="p">,</span>
</span><span id="__span-50-9"><a id="__codelineno-50-9" name="__codelineno-50-9" href="#__codelineno-50-9"></a> <span class="s2">&quot;reference&quot;</span><span class="p">:</span> <span class="n">string</span><span class="p">,</span>
</span><span id="__span-50-10"><a id="__codelineno-50-10" name="__codelineno-50-10" href="#__codelineno-50-10"></a> <span class="p">},</span>
</span><span id="__span-50-11"><a id="__codelineno-50-11" name="__codelineno-50-11" href="#__codelineno-50-11"></a> <span class="p">}</span>
</span><span id="__span-50-12"><a id="__codelineno-50-12" name="__codelineno-50-12" href="#__codelineno-50-12"></a><span class="p">}</span>
</span></code></pre></div>
<table>
<thead>
<tr>
<th>Parameters</th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td><code>metric_spec</code></td>
<td>Optional: <code>MetricxSpec</code> Metric spec, defining the metric's behavior.</td>
</tr>
<tr>
<td><code>metric_spec.version</code></td>
<td>Optional: <code>string</code> One of the following: - <code>METRICX_24_REF</code>: MetricX 24 for translation and reference. It evaluates the prediction (translation) by comparing with the provided reference text input. - <code>METRICX_24_SRC</code>: MetricX 24 for translation and source. It evaluates the translation (prediction) by Quality Estimation (QE), without a reference text input. - <code>METRICX_24_SRC_REF</code>: MetricX 24 for translation, source and reference. It evaluates the translation (prediction) using all three inputs.</td>
</tr>
<tr>
<td><code>metric_spec.source_language</code></td>
<td>Optional: <code>string</code> Source language in <a href="https://en.wikipedia.org/wiki/IETF_language_tag">BCP-47 format</a>. For example, "es".</td>
</tr>
<tr>
<td><code>metric_spec.target_language</code></td>
<td>Optional: <code>string</code> Target language in <a href="https://en.wikipedia.org/wiki/IETF_language_tag">BCP-47 format</a>. For example, "es".</td>
</tr>
<tr>
<td><code>instance</code></td>
<td>Optional: <code>MetricxInstance</code> Evaluation input, consisting of LLM response and reference. The exact fields used for evaluation are dependent on the MetricX version.</td>
</tr>
<tr>
<td><code>instance.prediction</code></td>
<td>Optional: <code>string</code> Candidate model LLM response. This is the output of the LLM which is being evaluated.</td>
</tr>
<tr>
<td><code>instance.source</code></td>
<td>Optional: <code>string</code> Source text which is in the original language that the prediction was translated from.</td>
</tr>
<tr>
<td><code>instance.reference</code></td>
<td>Optional: <code>string</code> Ground truth used to compare against the prediction. It is in the same language as the prediction.</td>
</tr>
</tbody>
</table>
<h4 id="metricxresult"><code>MetricxResult</code><a class="headerlink" href="#metricxresult" title="Permanent link">&para;</a></h4>
<div class="language-python highlight"><pre><span></span><code><span id="__span-51-1"><a id="__codelineno-51-1" name="__codelineno-51-1" href="#__codelineno-51-1"></a><span class="p">{</span>
</span><span id="__span-51-2"><a id="__codelineno-51-2" name="__codelineno-51-2" href="#__codelineno-51-2"></a> <span class="s2">&quot;metricx_result&quot;</span> <span class="p">:</span> <span class="p">{</span>
</span><span id="__span-51-3"><a id="__codelineno-51-3" name="__codelineno-51-3" href="#__codelineno-51-3"></a> <span class="s2">&quot;score&quot;</span><span class="p">:</span> <span class="nb">float</span>
</span><span id="__span-51-4"><a id="__codelineno-51-4" name="__codelineno-51-4" href="#__codelineno-51-4"></a> <span class="p">}</span>
</span><span id="__span-51-5"><a id="__codelineno-51-5" name="__codelineno-51-5" href="#__codelineno-51-5"></a><span class="p">}</span>
</span></code></pre></div>
<table>
<thead>
<tr>
<th>Output</th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td><code>score</code></td>
<td><code>float</code>: <code>[0, 25]</code>, where 0 represents a perfect translation.</td>
</tr>
</tbody>
</table>
<h2 id="examples">Examples<a class="headerlink" href="#examples" title="Permanent link">&para;</a></h2>
<h3 id="evaluate-an-output">Evaluate an output<a class="headerlink" href="#evaluate-an-output" title="Permanent link">&para;</a></h3>
<p>The following example demonstrates how to call the Gen AI Evaluation API to evaluate
the output of an LLM using a variety of evaluation metrics, including the following:</p>
<ul>
<li><code>summarization_quality</code></li>
<li><code>groundedness</code></li>
<li><code>fulfillment</code></li>
<li><code>summarization_helpfulness</code></li>
<li><code>summarization_verbosity</code></li>
</ul>
<h3 id="python_1">Python<a class="headerlink" href="#python_1" title="Permanent link">&para;</a></h3>
<div class="language-python highlight"><pre><span></span><code><span id="__span-52-1"><a id="__codelineno-52-1" name="__codelineno-52-1" href="#__codelineno-52-1"></a><span class="kn">import</span><span class="w"> </span><span class="nn">pandas</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">pd</span>
</span><span id="__span-52-2"><a id="__codelineno-52-2" name="__codelineno-52-2" href="#__codelineno-52-2"></a>
</span><span id="__span-52-3"><a id="__codelineno-52-3" name="__codelineno-52-3" href="#__codelineno-52-3"></a><span class="kn">import</span><span class="w"> </span><span class="nn">vertexai</span>
</span><span id="__span-52-4"><a id="__codelineno-52-4" name="__codelineno-52-4" href="#__codelineno-52-4"></a><span class="kn">from</span><span class="w"> </span><span class="nn">vertexai.preview.evaluation</span><span class="w"> </span><span class="kn">import</span> <span class="n">EvalTask</span><span class="p">,</span> <span class="n">MetricPromptTemplateExamples</span>
</span><span id="__span-52-5"><a id="__codelineno-52-5" name="__codelineno-52-5" href="#__codelineno-52-5"></a>
</span><span id="__span-52-6"><a id="__codelineno-52-6" name="__codelineno-52-6" href="#__codelineno-52-6"></a><span class="c1"># TODO(developer): Update and un-comment below line</span>
</span><span id="__span-52-7"><a id="__codelineno-52-7" name="__codelineno-52-7" href="#__codelineno-52-7"></a><span class="c1"># PROJECT_ID = &quot;your-project-id&quot;</span>
</span><span id="__span-52-8"><a id="__codelineno-52-8" name="__codelineno-52-8" href="#__codelineno-52-8"></a><span class="n">vertexai</span><span class="o">.</span><span class="n">init</span><span class="p">(</span><span class="n">project</span><span class="o">=</span><span class="n">PROJECT_ID</span><span class="p">,</span> <span class="n">location</span><span class="o">=</span><span class="s2">&quot;us-central1&quot;</span><span class="p">)</span>
</span><span id="__span-52-9"><a id="__codelineno-52-9" name="__codelineno-52-9" href="#__codelineno-52-9"></a>
</span><span id="__span-52-10"><a id="__codelineno-52-10" name="__codelineno-52-10" href="#__codelineno-52-10"></a><span class="n">eval_dataset</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span>
</span><span id="__span-52-11"><a id="__codelineno-52-11" name="__codelineno-52-11" href="#__codelineno-52-11"></a> <span class="p">{</span>
</span><span id="__span-52-12"><a id="__codelineno-52-12" name="__codelineno-52-12" href="#__codelineno-52-12"></a> <span class="s2">&quot;instruction&quot;</span><span class="p">:</span> <span class="p">[</span>
</span><span id="__span-52-13"><a id="__codelineno-52-13" name="__codelineno-52-13" href="#__codelineno-52-13"></a> <span class="s2">&quot;Summarize the text in one sentence.&quot;</span><span class="p">,</span>
</span><span id="__span-52-14"><a id="__codelineno-52-14" name="__codelineno-52-14" href="#__codelineno-52-14"></a> <span class="s2">&quot;Summarize the text such that a five-year-old can understand.&quot;</span><span class="p">,</span>
</span><span id="__span-52-15"><a id="__codelineno-52-15" name="__codelineno-52-15" href="#__codelineno-52-15"></a> <span class="p">],</span>
</span><span id="__span-52-16"><a id="__codelineno-52-16" name="__codelineno-52-16" href="#__codelineno-52-16"></a> <span class="s2">&quot;context&quot;</span><span class="p">:</span> <span class="p">[</span>
</span><span id="__span-52-17"><a id="__codelineno-52-17" name="__codelineno-52-17" href="#__codelineno-52-17"></a><span class="w"> </span><span class="sd">&quot;&quot;&quot;As part of a comprehensive initiative to tackle urban congestion and foster</span>
</span><span id="__span-52-18"><a id="__codelineno-52-18" name="__codelineno-52-18" href="#__codelineno-52-18"></a><span class="sd"> sustainable urban living, a major city has revealed ambitious plans for an</span>
</span><span id="__span-52-19"><a id="__codelineno-52-19" name="__codelineno-52-19" href="#__codelineno-52-19"></a><span class="sd"> extensive overhaul of its public transportation system. The project aims not</span>
</span><span id="__span-52-20"><a id="__codelineno-52-20" name="__codelineno-52-20" href="#__codelineno-52-20"></a><span class="sd"> only to improve the efficiency and reliability of public transit but also to</span>
</span><span id="__span-52-21"><a id="__codelineno-52-21" name="__codelineno-52-21" href="#__codelineno-52-21"></a><span class="sd"> reduce the city\&#39;s carbon footprint and promote eco-friendly commuting options.</span>
</span><span id="__span-52-22"><a id="__codelineno-52-22" name="__codelineno-52-22" href="#__codelineno-52-22"></a><span class="sd"> City officials anticipate that this strategic investment will enhance</span>
</span><span id="__span-52-23"><a id="__codelineno-52-23" name="__codelineno-52-23" href="#__codelineno-52-23"></a><span class="sd"> accessibility for residents and visitors alike, ushering in a new era of</span>
</span><span id="__span-52-24"><a id="__codelineno-52-24" name="__codelineno-52-24" href="#__codelineno-52-24"></a><span class="sd"> efficient, environmentally conscious urban transportation.&quot;&quot;&quot;</span><span class="p">,</span>
</span><span id="__span-52-25"><a id="__codelineno-52-25" name="__codelineno-52-25" href="#__codelineno-52-25"></a><span class="w"> </span><span class="sd">&quot;&quot;&quot;A team of archaeologists has unearthed ancient artifacts shedding light on a</span>
</span><span id="__span-52-26"><a id="__codelineno-52-26" name="__codelineno-52-26" href="#__codelineno-52-26"></a><span class="sd"> previously unknown civilization. The findings challenge existing historical</span>
</span><span id="__span-52-27"><a id="__codelineno-52-27" name="__codelineno-52-27" href="#__codelineno-52-27"></a><span class="sd"> narratives and provide valuable insights into human history.&quot;&quot;&quot;</span><span class="p">,</span>
</span><span id="__span-52-28"><a id="__codelineno-52-28" name="__codelineno-52-28" href="#__codelineno-52-28"></a> <span class="p">],</span>
</span><span id="__span-52-29"><a id="__codelineno-52-29" name="__codelineno-52-29" href="#__codelineno-52-29"></a> <span class="s2">&quot;response&quot;</span><span class="p">:</span> <span class="p">[</span>
</span><span id="__span-52-30"><a id="__codelineno-52-30" name="__codelineno-52-30" href="#__codelineno-52-30"></a> <span class="s2">&quot;A major city is revamping its public transportation system to fight congestion, reduce emissions, and make getting around greener and easier.&quot;</span><span class="p">,</span>
</span><span id="__span-52-31"><a id="__codelineno-52-31" name="__codelineno-52-31" href="#__codelineno-52-31"></a> <span class="s2">&quot;Some people who dig for old things found some very special tools and objects that tell us about people who lived a long, long time ago! What they found is like a new puzzle piece that helps us understand how people used to live.&quot;</span><span class="p">,</span>
</span><span id="__span-52-32"><a id="__codelineno-52-32" name="__codelineno-52-32" href="#__codelineno-52-32"></a> <span class="p">],</span>
</span><span id="__span-52-33"><a id="__codelineno-52-33" name="__codelineno-52-33" href="#__codelineno-52-33"></a> <span class="p">}</span>
</span><span id="__span-52-34"><a id="__codelineno-52-34" name="__codelineno-52-34" href="#__codelineno-52-34"></a><span class="p">)</span>
</span><span id="__span-52-35"><a id="__codelineno-52-35" name="__codelineno-52-35" href="#__codelineno-52-35"></a>
</span><span id="__span-52-36"><a id="__codelineno-52-36" name="__codelineno-52-36" href="#__codelineno-52-36"></a><span class="n">eval_task</span> <span class="o">=</span> <span class="n">EvalTask</span><span class="p">(</span>
</span><span id="__span-52-37"><a id="__codelineno-52-37" name="__codelineno-52-37" href="#__codelineno-52-37"></a> <span class="n">dataset</span><span class="o">=</span><span class="n">eval_dataset</span><span class="p">,</span>
</span><span id="__span-52-38"><a id="__codelineno-52-38" name="__codelineno-52-38" href="#__codelineno-52-38"></a> <span class="n">metrics</span><span class="o">=</span><span class="p">[</span>
</span><span id="__span-52-39"><a id="__codelineno-52-39" name="__codelineno-52-39" href="#__codelineno-52-39"></a> <span class="n">MetricPromptTemplateExamples</span><span class="o">.</span><span class="n">Pointwise</span><span class="o">.</span><span class="n">SUMMARIZATION_QUALITY</span><span class="p">,</span>
</span><span id="__span-52-40"><a id="__codelineno-52-40" name="__codelineno-52-40" href="#__codelineno-52-40"></a> <span class="n">MetricPromptTemplateExamples</span><span class="o">.</span><span class="n">Pointwise</span><span class="o">.</span><span class="n">GROUNDEDNESS</span><span class="p">,</span>
</span><span id="__span-52-41"><a id="__codelineno-52-41" name="__codelineno-52-41" href="#__codelineno-52-41"></a> <span class="n">MetricPromptTemplateExamples</span><span class="o">.</span><span class="n">Pointwise</span><span class="o">.</span><span class="n">VERBOSITY</span><span class="p">,</span>
</span><span id="__span-52-42"><a id="__codelineno-52-42" name="__codelineno-52-42" href="#__codelineno-52-42"></a> <span class="n">MetricPromptTemplateExamples</span><span class="o">.</span><span class="n">Pointwise</span><span class="o">.</span><span class="n">INSTRUCTION_FOLLOWING</span><span class="p">,</span>
</span><span id="__span-52-43"><a id="__codelineno-52-43" name="__codelineno-52-43" href="#__codelineno-52-43"></a> <span class="p">],</span>
</span><span id="__span-52-44"><a id="__codelineno-52-44" name="__codelineno-52-44" href="#__codelineno-52-44"></a><span class="p">)</span>
</span><span id="__span-52-45"><a id="__codelineno-52-45" name="__codelineno-52-45" href="#__codelineno-52-45"></a>
</span><span id="__span-52-46"><a id="__codelineno-52-46" name="__codelineno-52-46" href="#__codelineno-52-46"></a><span class="n">prompt_template</span> <span class="o">=</span> <span class="p">(</span>
</span><span id="__span-52-47"><a id="__codelineno-52-47" name="__codelineno-52-47" href="#__codelineno-52-47"></a> <span class="s2">&quot;Instruction: </span><span class="si">{instruction}</span><span class="s2">. Article: </span><span class="si">{context}</span><span class="s2">. Summary: </span><span class="si">{response}</span><span class="s2">&quot;</span>
</span><span id="__span-52-48"><a id="__codelineno-52-48" name="__codelineno-52-48" href="#__codelineno-52-48"></a><span class="p">)</span>
</span><span id="__span-52-49"><a id="__codelineno-52-49" name="__codelineno-52-49" href="#__codelineno-52-49"></a><span class="n">result</span> <span class="o">=</span> <span class="n">eval_task</span><span class="o">.</span><span class="n">evaluate</span><span class="p">(</span><span class="n">prompt_template</span><span class="o">=</span><span class="n">prompt_template</span><span class="p">)</span>
</span><span id="__span-52-50"><a id="__codelineno-52-50" name="__codelineno-52-50" href="#__codelineno-52-50"></a>
</span><span id="__span-52-51"><a id="__codelineno-52-51" name="__codelineno-52-51" href="#__codelineno-52-51"></a><span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Summary Metrics:</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)</span>
</span><span id="__span-52-52"><a id="__codelineno-52-52" name="__codelineno-52-52" href="#__codelineno-52-52"></a>
</span><span id="__span-52-53"><a id="__codelineno-52-53" name="__codelineno-52-53" href="#__codelineno-52-53"></a><span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">result</span><span class="o">.</span><span class="n">summary_metrics</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
</span><span id="__span-52-54"><a id="__codelineno-52-54" name="__codelineno-52-54" href="#__codelineno-52-54"></a> <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">key</span><span class="si">}</span><span class="s2">: </span><span class="se">\t</span><span class="si">{</span><span class="n">value</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</span><span id="__span-52-55"><a id="__codelineno-52-55" name="__codelineno-52-55" href="#__codelineno-52-55"></a>
</span><span id="__span-52-56"><a id="__codelineno-52-56" name="__codelineno-52-56" href="#__codelineno-52-56"></a><span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n\n</span><span class="s2">Metrics Table:</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)</span>
</span><span id="__span-52-57"><a id="__codelineno-52-57" name="__codelineno-52-57" href="#__codelineno-52-57"></a><span class="nb">print</span><span class="p">(</span><span class="n">result</span><span class="o">.</span><span class="n">metrics_table</span><span class="p">)</span>
</span><span id="__span-52-58"><a id="__codelineno-52-58" name="__codelineno-52-58" href="#__codelineno-52-58"></a><span class="c1"># Example response:</span>
</span><span id="__span-52-59"><a id="__codelineno-52-59" name="__codelineno-52-59" href="#__codelineno-52-59"></a><span class="c1"># Summary Metrics:</span>
</span><span id="__span-52-60"><a id="__codelineno-52-60" name="__codelineno-52-60" href="#__codelineno-52-60"></a><span class="c1"># row_count: 2</span>
</span><span id="__span-52-61"><a id="__codelineno-52-61" name="__codelineno-52-61" href="#__codelineno-52-61"></a><span class="c1"># summarization_quality/mean: 3.5</span>
</span><span id="__span-52-62"><a id="__codelineno-52-62" name="__codelineno-52-62" href="#__codelineno-52-62"></a><span class="c1"># summarization_quality/std: 2.1213203435596424</span>
</span><span id="__span-52-63"><a id="__codelineno-52-63" name="__codelineno-52-63" href="#__codelineno-52-63"></a><span class="c1"># ...</span>
</span></code></pre></div>
<h3 id="go">Go<a class="headerlink" href="#go" title="Permanent link">&para;</a></h3>
<div class="language-python highlight"><pre><span></span><code><span id="__span-53-1"><a id="__codelineno-53-1" name="__codelineno-53-1" href="#__codelineno-53-1"></a><span class="kn">import</span><span class="w"> </span><span class="p">(</span>
</span><span id="__span-53-2"><a id="__codelineno-53-2" name="__codelineno-53-2" href="#__codelineno-53-2"></a> <span class="n">context_pkg</span> <span class="s2">&quot;context&quot;</span>
</span><span id="__span-53-3"><a id="__codelineno-53-3" name="__codelineno-53-3" href="#__codelineno-53-3"></a> <span class="s2">&quot;fmt&quot;</span>
</span><span id="__span-53-4"><a id="__codelineno-53-4" name="__codelineno-53-4" href="#__codelineno-53-4"></a> <span class="s2">&quot;io&quot;</span>
</span><span id="__span-53-5"><a id="__codelineno-53-5" name="__codelineno-53-5" href="#__codelineno-53-5"></a>
</span><span id="__span-53-6"><a id="__codelineno-53-6" name="__codelineno-53-6" href="#__codelineno-53-6"></a> <span class="n">aiplatform</span> <span class="s2">&quot;cloud.google.com/go/aiplatform/apiv1beta1&quot;</span>
</span><span id="__span-53-7"><a id="__codelineno-53-7" name="__codelineno-53-7" href="#__codelineno-53-7"></a> <span class="n">aiplatformpb</span> <span class="s2">&quot;cloud.google.com/go/aiplatform/apiv1beta1/aiplatformpb&quot;</span>
</span><span id="__span-53-8"><a id="__codelineno-53-8" name="__codelineno-53-8" href="#__codelineno-53-8"></a> <span class="s2">&quot;google.golang.org/api/option&quot;</span>
</span><span id="__span-53-9"><a id="__codelineno-53-9" name="__codelineno-53-9" href="#__codelineno-53-9"></a><span class="p">)</span>
</span><span id="__span-53-10"><a id="__codelineno-53-10" name="__codelineno-53-10" href="#__codelineno-53-10"></a>
</span><span id="__span-53-11"><a id="__codelineno-53-11" name="__codelineno-53-11" href="#__codelineno-53-11"></a><span class="o">//</span> <span class="n">evaluateModelResponse</span> <span class="n">evaluates</span> <span class="n">the</span> <span class="n">output</span> <span class="n">of</span> <span class="n">an</span> <span class="n">LLM</span> <span class="k">for</span> <span class="n">groundedness</span><span class="p">,</span> <span class="n">i</span><span class="o">.</span><span class="n">e</span><span class="o">.</span><span class="p">,</span> <span class="n">how</span> <span class="n">well</span>
</span><span id="__span-53-12"><a id="__codelineno-53-12" name="__codelineno-53-12" href="#__codelineno-53-12"></a><span class="o">//</span> <span class="n">the</span> <span class="n">model</span> <span class="n">response</span> <span class="n">connects</span> <span class="k">with</span> <span class="n">verifiable</span> <span class="n">sources</span> <span class="n">of</span> <span class="n">information</span>
</span><span id="__span-53-13"><a id="__codelineno-53-13" name="__codelineno-53-13" href="#__codelineno-53-13"></a><span class="n">func</span> <span class="n">evaluateModelResponse</span><span class="p">(</span><span class="n">w</span> <span class="n">io</span><span class="o">.</span><span class="n">Writer</span><span class="p">,</span> <span class="n">projectID</span><span class="p">,</span> <span class="n">location</span> <span class="n">string</span><span class="p">)</span> <span class="n">error</span> <span class="p">{</span>
</span><span id="__span-53-14"><a id="__codelineno-53-14" name="__codelineno-53-14" href="#__codelineno-53-14"></a> <span class="o">//</span> <span class="n">location</span> <span class="o">=</span> <span class="s2">&quot;us-central1&quot;</span>
</span><span id="__span-53-15"><a id="__codelineno-53-15" name="__codelineno-53-15" href="#__codelineno-53-15"></a> <span class="n">ctx</span> <span class="o">:=</span> <span class="n">context_pkg</span><span class="o">.</span><span class="n">Background</span><span class="p">()</span>
</span><span id="__span-53-16"><a id="__codelineno-53-16" name="__codelineno-53-16" href="#__codelineno-53-16"></a> <span class="n">apiEndpoint</span> <span class="o">:=</span> <span class="n">fmt</span><span class="o">.</span><span class="n">Sprintf</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">%s</span><span class="s2">-aiplatform.googleapis.com:443&quot;</span><span class="p">,</span> <span class="n">location</span><span class="p">)</span>
</span><span id="__span-53-17"><a id="__codelineno-53-17" name="__codelineno-53-17" href="#__codelineno-53-17"></a> <span class="n">client</span><span class="p">,</span> <span class="n">err</span> <span class="o">:=</span> <span class="n">aiplatform</span><span class="o">.</span><span class="n">NewEvaluationClient</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="n">option</span><span class="o">.</span><span class="n">WithEndpoint</span><span class="p">(</span><span class="n">apiEndpoint</span><span class="p">))</span>
</span><span id="__span-53-18"><a id="__codelineno-53-18" name="__codelineno-53-18" href="#__codelineno-53-18"></a>
</span><span id="__span-53-19"><a id="__codelineno-53-19" name="__codelineno-53-19" href="#__codelineno-53-19"></a> <span class="k">if</span> <span class="n">err</span> <span class="o">!=</span> <span class="n">nil</span> <span class="p">{</span>
</span><span id="__span-53-20"><a id="__codelineno-53-20" name="__codelineno-53-20" href="#__codelineno-53-20"></a> <span class="k">return</span> <span class="n">fmt</span><span class="o">.</span><span class="n">Errorf</span><span class="p">(</span><span class="s2">&quot;unable to create aiplatform client: %w&quot;</span><span class="p">,</span> <span class="n">err</span><span class="p">)</span>
</span><span id="__span-53-21"><a id="__codelineno-53-21" name="__codelineno-53-21" href="#__codelineno-53-21"></a> <span class="p">}</span>
</span><span id="__span-53-22"><a id="__codelineno-53-22" name="__codelineno-53-22" href="#__codelineno-53-22"></a> <span class="n">defer</span> <span class="n">client</span><span class="o">.</span><span class="n">Close</span><span class="p">()</span>
</span><span id="__span-53-23"><a id="__codelineno-53-23" name="__codelineno-53-23" href="#__codelineno-53-23"></a>
</span><span id="__span-53-24"><a id="__codelineno-53-24" name="__codelineno-53-24" href="#__codelineno-53-24"></a> <span class="o">//</span> <span class="n">evaluate</span> <span class="n">the</span> <span class="n">pre</span><span class="o">-</span><span class="n">generated</span> <span class="n">model</span> <span class="n">response</span> <span class="n">against</span> <span class="n">the</span> <span class="n">reference</span> <span class="p">(</span><span class="n">ground</span> <span class="n">truth</span><span class="p">)</span>
</span><span id="__span-53-25"><a id="__codelineno-53-25" name="__codelineno-53-25" href="#__codelineno-53-25"></a> <span class="n">responseToEvaluate</span> <span class="o">:=</span> <span class="err">`</span>
</span><span id="__span-53-26"><a id="__codelineno-53-26" name="__codelineno-53-26" href="#__codelineno-53-26"></a><span class="n">The</span> <span class="n">city</span> <span class="ow">is</span> <span class="n">undertaking</span> <span class="n">a</span> <span class="n">major</span> <span class="n">project</span> <span class="n">to</span> <span class="n">revamp</span> <span class="n">its</span> <span class="n">public</span> <span class="n">transportation</span> <span class="n">system</span><span class="o">.</span>
</span><span id="__span-53-27"><a id="__codelineno-53-27" name="__codelineno-53-27" href="#__codelineno-53-27"></a><span class="n">This</span> <span class="n">initiative</span> <span class="ow">is</span> <span class="n">designed</span> <span class="n">to</span> <span class="n">improve</span> <span class="n">efficiency</span><span class="p">,</span> <span class="n">reduce</span> <span class="n">carbon</span> <span class="n">emissions</span><span class="p">,</span> <span class="ow">and</span> <span class="n">promote</span>
</span><span id="__span-53-28"><a id="__codelineno-53-28" name="__codelineno-53-28" href="#__codelineno-53-28"></a><span class="n">eco</span><span class="o">-</span><span class="n">friendly</span> <span class="n">commuting</span><span class="o">.</span> <span class="n">The</span> <span class="n">city</span> <span class="n">expects</span> <span class="n">that</span> <span class="n">this</span> <span class="n">investment</span> <span class="n">will</span> <span class="n">enhance</span> <span class="n">accessibility</span>
</span><span id="__span-53-29"><a id="__codelineno-53-29" name="__codelineno-53-29" href="#__codelineno-53-29"></a><span class="ow">and</span> <span class="n">usher</span> <span class="ow">in</span> <span class="n">a</span> <span class="n">new</span> <span class="n">era</span> <span class="n">of</span> <span class="n">sustainable</span> <span class="n">urban</span> <span class="n">transportation</span><span class="o">.</span>
</span><span id="__span-53-30"><a id="__codelineno-53-30" name="__codelineno-53-30" href="#__codelineno-53-30"></a><span class="err">`</span>
</span><span id="__span-53-31"><a id="__codelineno-53-31" name="__codelineno-53-31" href="#__codelineno-53-31"></a> <span class="n">reference</span> <span class="o">:=</span> <span class="err">`</span>
</span><span id="__span-53-32"><a id="__codelineno-53-32" name="__codelineno-53-32" href="#__codelineno-53-32"></a><span class="n">As</span> <span class="n">part</span> <span class="n">of</span> <span class="n">a</span> <span class="n">comprehensive</span> <span class="n">initiative</span> <span class="n">to</span> <span class="n">tackle</span> <span class="n">urban</span> <span class="n">congestion</span> <span class="ow">and</span> <span class="n">foster</span>
</span><span id="__span-53-33"><a id="__codelineno-53-33" name="__codelineno-53-33" href="#__codelineno-53-33"></a><span class="n">sustainable</span> <span class="n">urban</span> <span class="n">living</span><span class="p">,</span> <span class="n">a</span> <span class="n">major</span> <span class="n">city</span> <span class="n">has</span> <span class="n">revealed</span> <span class="n">ambitious</span> <span class="n">plans</span> <span class="k">for</span> <span class="n">an</span>
</span><span id="__span-53-34"><a id="__codelineno-53-34" name="__codelineno-53-34" href="#__codelineno-53-34"></a><span class="n">extensive</span> <span class="n">overhaul</span> <span class="n">of</span> <span class="n">its</span> <span class="n">public</span> <span class="n">transportation</span> <span class="n">system</span><span class="o">.</span> <span class="n">The</span> <span class="n">project</span> <span class="n">aims</span> <span class="ow">not</span>
</span><span id="__span-53-35"><a id="__codelineno-53-35" name="__codelineno-53-35" href="#__codelineno-53-35"></a><span class="n">only</span> <span class="n">to</span> <span class="n">improve</span> <span class="n">the</span> <span class="n">efficiency</span> <span class="ow">and</span> <span class="n">reliability</span> <span class="n">of</span> <span class="n">public</span> <span class="n">transit</span> <span class="n">but</span> <span class="n">also</span> <span class="n">to</span>
</span><span id="__span-53-36"><a id="__codelineno-53-36" name="__codelineno-53-36" href="#__codelineno-53-36"></a><span class="n">reduce</span> <span class="n">the</span> <span class="n">city</span>\<span class="s1">&#39;s carbon footprint and promote eco-friendly commuting options.</span>
</span><span id="__span-53-37"><a id="__codelineno-53-37" name="__codelineno-53-37" href="#__codelineno-53-37"></a><span class="n">City</span> <span class="n">officials</span> <span class="n">anticipate</span> <span class="n">that</span> <span class="n">this</span> <span class="n">strategic</span> <span class="n">investment</span> <span class="n">will</span> <span class="n">enhance</span>
</span><span id="__span-53-38"><a id="__codelineno-53-38" name="__codelineno-53-38" href="#__codelineno-53-38"></a><span class="n">accessibility</span> <span class="k">for</span> <span class="n">residents</span> <span class="ow">and</span> <span class="n">visitors</span> <span class="n">alike</span><span class="p">,</span> <span class="n">ushering</span> <span class="ow">in</span> <span class="n">a</span> <span class="n">new</span> <span class="n">era</span> <span class="n">of</span>
</span><span id="__span-53-39"><a id="__codelineno-53-39" name="__codelineno-53-39" href="#__codelineno-53-39"></a><span class="n">efficient</span><span class="p">,</span> <span class="n">environmentally</span> <span class="n">conscious</span> <span class="n">urban</span> <span class="n">transportation</span><span class="o">.</span>
</span><span id="__span-53-40"><a id="__codelineno-53-40" name="__codelineno-53-40" href="#__codelineno-53-40"></a><span class="err">`</span>
</span><span id="__span-53-41"><a id="__codelineno-53-41" name="__codelineno-53-41" href="#__codelineno-53-41"></a> <span class="n">req</span> <span class="o">:=</span> <span class="n">aiplatformpb</span><span class="o">.</span><span class="n">EvaluateInstancesRequest</span><span class="p">{</span>
</span><span id="__span-53-42"><a id="__codelineno-53-42" name="__codelineno-53-42" href="#__codelineno-53-42"></a> <span class="n">Location</span><span class="p">:</span> <span class="n">fmt</span><span class="o">.</span><span class="n">Sprintf</span><span class="p">(</span><span class="s2">&quot;projects/</span><span class="si">%s</span><span class="s2">/locations/</span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">projectID</span><span class="p">,</span> <span class="n">location</span><span class="p">),</span>
</span><span id="__span-53-43"><a id="__codelineno-53-43" name="__codelineno-53-43" href="#__codelineno-53-43"></a> <span class="o">//</span> <span class="n">Check</span> <span class="n">the</span> <span class="n">API</span> <span class="n">reference</span> <span class="k">for</span> <span class="n">a</span> <span class="n">full</span> <span class="nb">list</span> <span class="n">of</span> <span class="n">supported</span> <span class="n">metric</span> <span class="n">inputs</span><span class="p">:</span>
</span><span id="__span-53-44"><a id="__codelineno-53-44" name="__codelineno-53-44" href="#__codelineno-53-44"></a> <span class="o">//</span> <span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">cloud</span><span class="o">.</span><span class="n">google</span><span class="o">.</span><span class="n">com</span><span class="o">/</span><span class="n">vertex</span><span class="o">-</span><span class="n">ai</span><span class="o">/</span><span class="n">docs</span><span class="o">/</span><span class="n">reference</span><span class="o">/</span><span class="n">rpc</span><span class="o">/</span><span class="n">google</span><span class="o">.</span><span class="n">cloud</span><span class="o">.</span><span class="n">aiplatform</span><span class="o">.</span><span class="n">v1beta1</span><span class="c1">#evaluateinstancesrequest</span>
</span><span id="__span-53-45"><a id="__codelineno-53-45" name="__codelineno-53-45" href="#__codelineno-53-45"></a> <span class="n">MetricInputs</span><span class="p">:</span> <span class="o">&amp;</span><span class="n">aiplatformpb</span><span class="o">.</span><span class="n">EvaluateInstancesRequest_GroundednessInput</span><span class="p">{</span>
</span><span id="__span-53-46"><a id="__codelineno-53-46" name="__codelineno-53-46" href="#__codelineno-53-46"></a> <span class="n">GroundednessInput</span><span class="p">:</span> <span class="o">&amp;</span><span class="n">aiplatformpb</span><span class="o">.</span><span class="n">GroundednessInput</span><span class="p">{</span>
</span><span id="__span-53-47"><a id="__codelineno-53-47" name="__codelineno-53-47" href="#__codelineno-53-47"></a> <span class="n">MetricSpec</span><span class="p">:</span> <span class="o">&amp;</span><span class="n">aiplatformpb</span><span class="o">.</span><span class="n">GroundednessSpec</span><span class="p">{},</span>
</span><span id="__span-53-48"><a id="__codelineno-53-48" name="__codelineno-53-48" href="#__codelineno-53-48"></a> <span class="n">Instance</span><span class="p">:</span> <span class="o">&amp;</span><span class="n">aiplatformpb</span><span class="o">.</span><span class="n">GroundednessInstance</span><span class="p">{</span>
</span><span id="__span-53-49"><a id="__codelineno-53-49" name="__codelineno-53-49" href="#__codelineno-53-49"></a> <span class="n">Context</span><span class="p">:</span> <span class="o">&amp;</span><span class="n">reference</span><span class="p">,</span>
</span><span id="__span-53-50"><a id="__codelineno-53-50" name="__codelineno-53-50" href="#__codelineno-53-50"></a> <span class="n">Prediction</span><span class="p">:</span> <span class="o">&amp;</span><span class="n">responseToEvaluate</span><span class="p">,</span>
</span><span id="__span-53-51"><a id="__codelineno-53-51" name="__codelineno-53-51" href="#__codelineno-53-51"></a> <span class="p">},</span>
</span><span id="__span-53-52"><a id="__codelineno-53-52" name="__codelineno-53-52" href="#__codelineno-53-52"></a> <span class="p">},</span>
</span><span id="__span-53-53"><a id="__codelineno-53-53" name="__codelineno-53-53" href="#__codelineno-53-53"></a> <span class="p">},</span>
</span><span id="__span-53-54"><a id="__codelineno-53-54" name="__codelineno-53-54" href="#__codelineno-53-54"></a> <span class="p">}</span>
</span><span id="__span-53-55"><a id="__codelineno-53-55" name="__codelineno-53-55" href="#__codelineno-53-55"></a>
</span><span id="__span-53-56"><a id="__codelineno-53-56" name="__codelineno-53-56" href="#__codelineno-53-56"></a> <span class="n">resp</span><span class="p">,</span> <span class="n">err</span> <span class="o">:=</span> <span class="n">client</span><span class="o">.</span><span class="n">EvaluateInstances</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">req</span><span class="p">)</span>
</span><span id="__span-53-57"><a id="__codelineno-53-57" name="__codelineno-53-57" href="#__codelineno-53-57"></a> <span class="k">if</span> <span class="n">err</span> <span class="o">!=</span> <span class="n">nil</span> <span class="p">{</span>
</span><span id="__span-53-58"><a id="__codelineno-53-58" name="__codelineno-53-58" href="#__codelineno-53-58"></a> <span class="k">return</span> <span class="n">fmt</span><span class="o">.</span><span class="n">Errorf</span><span class="p">(</span><span class="s2">&quot;evaluateInstances failed: %v&quot;</span><span class="p">,</span> <span class="n">err</span><span class="p">)</span>
</span><span id="__span-53-59"><a id="__codelineno-53-59" name="__codelineno-53-59" href="#__codelineno-53-59"></a> <span class="p">}</span>
</span><span id="__span-53-60"><a id="__codelineno-53-60" name="__codelineno-53-60" href="#__codelineno-53-60"></a>
</span><span id="__span-53-61"><a id="__codelineno-53-61" name="__codelineno-53-61" href="#__codelineno-53-61"></a> <span class="n">results</span> <span class="o">:=</span> <span class="n">resp</span><span class="o">.</span><span class="n">GetGroundednessResult</span><span class="p">()</span>
</span><span id="__span-53-62"><a id="__codelineno-53-62" name="__codelineno-53-62" href="#__codelineno-53-62"></a> <span class="n">fmt</span><span class="o">.</span><span class="n">Fprintf</span><span class="p">(</span><span class="n">w</span><span class="p">,</span> <span class="s2">&quot;score: </span><span class="si">%.2f</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">results</span><span class="o">.</span><span class="n">GetScore</span><span class="p">())</span>
</span><span id="__span-53-63"><a id="__codelineno-53-63" name="__codelineno-53-63" href="#__codelineno-53-63"></a> <span class="n">fmt</span><span class="o">.</span><span class="n">Fprintf</span><span class="p">(</span><span class="n">w</span><span class="p">,</span> <span class="s2">&quot;confidence: </span><span class="si">%.2f</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">results</span><span class="o">.</span><span class="n">GetConfidence</span><span class="p">())</span>
</span><span id="__span-53-64"><a id="__codelineno-53-64" name="__codelineno-53-64" href="#__codelineno-53-64"></a> <span class="n">fmt</span><span class="o">.</span><span class="n">Fprintf</span><span class="p">(</span><span class="n">w</span><span class="p">,</span> <span class="s2">&quot;explanation:</span><span class="se">\n</span><span class="si">%s</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">results</span><span class="o">.</span><span class="n">GetExplanation</span><span class="p">())</span>
</span><span id="__span-53-65"><a id="__codelineno-53-65" name="__codelineno-53-65" href="#__codelineno-53-65"></a> <span class="o">//</span> <span class="n">Example</span> <span class="n">response</span><span class="p">:</span>
</span><span id="__span-53-66"><a id="__codelineno-53-66" name="__codelineno-53-66" href="#__codelineno-53-66"></a> <span class="o">//</span> <span class="n">score</span><span class="p">:</span> <span class="mf">1.00</span>
</span><span id="__span-53-67"><a id="__codelineno-53-67" name="__codelineno-53-67" href="#__codelineno-53-67"></a> <span class="o">//</span> <span class="n">confidence</span><span class="p">:</span> <span class="mf">1.00</span>
</span><span id="__span-53-68"><a id="__codelineno-53-68" name="__codelineno-53-68" href="#__codelineno-53-68"></a> <span class="o">//</span> <span class="n">explanation</span><span class="p">:</span>
</span><span id="__span-53-69"><a id="__codelineno-53-69" name="__codelineno-53-69" href="#__codelineno-53-69"></a> <span class="o">//</span> <span class="n">STEP</span> <span class="mi">1</span><span class="p">:</span> <span class="n">All</span> <span class="n">aspects</span> <span class="n">of</span> <span class="n">the</span> <span class="n">response</span> <span class="n">are</span> <span class="n">found</span> <span class="ow">in</span> <span class="n">the</span> <span class="n">context</span><span class="o">.</span>
</span><span id="__span-53-70"><a id="__codelineno-53-70" name="__codelineno-53-70" href="#__codelineno-53-70"></a> <span class="o">//</span> <span class="n">The</span> <span class="n">response</span> <span class="n">accurately</span> <span class="n">summarizes</span> <span class="n">the</span> <span class="n">city</span><span class="s1">&#39;s plan to overhaul its public transportation system, highlighting the goals of ...</span>
</span><span id="__span-53-71"><a id="__codelineno-53-71" name="__codelineno-53-71" href="#__codelineno-53-71"></a> <span class="o">//</span> <span class="n">STEP</span> <span class="mi">2</span><span class="p">:</span> <span class="n">According</span> <span class="n">to</span> <span class="n">the</span> <span class="n">rubric</span><span class="p">,</span> <span class="n">the</span> <span class="n">response</span> <span class="ow">is</span> <span class="n">scored</span> <span class="mi">1</span> <span class="n">because</span> <span class="nb">all</span> <span class="n">aspects</span> <span class="n">of</span> <span class="n">the</span> <span class="n">response</span> <span class="n">are</span> <span class="n">attributable</span> <span class="n">to</span> <span class="n">the</span> <span class="n">context</span><span class="o">.</span>
</span><span id="__span-53-72"><a id="__codelineno-53-72" name="__codelineno-53-72" href="#__codelineno-53-72"></a>
</span><span id="__span-53-73"><a id="__codelineno-53-73" name="__codelineno-53-73" href="#__codelineno-53-73"></a> <span class="k">return</span> <span class="n">nil</span>
</span><span id="__span-53-74"><a id="__codelineno-53-74" name="__codelineno-53-74" href="#__codelineno-53-74"></a><span class="p">}</span>
</span></code></pre></div>
<h3 id="evaluate-an-output-pairwise-summarization-quality">Evaluate an output: pairwise summarization quality<a class="headerlink" href="#evaluate-an-output-pairwise-summarization-quality" title="Permanent link">&para;</a></h3>
<p>The following example demonstrates how to call the Gen AI evaluation service API to evaluate
the output of an LLM using a pairwise summarization quality comparison.</p>
<h3 id="rest">REST<a class="headerlink" href="#rest" title="Permanent link">&para;</a></h3>
<p>Before using any of the request data,
make the following replacements:</p>
<ul>
<li>PROJECT_ID: Your <a href="https://cloud.google.com/resource-manager/docs/creating-managing-projects#identifiers">project ID</a>.</li>
<li>LOCATION: The region to process the request.</li>
<li>PREDICTION: LLM response.</li>
<li>BASELINE_PREDICTION: Baseline model LLM response.</li>
<li>INSTRUCTION: The instruction used at inference time.</li>
<li>CONTEXT: Inference-time text containing all relevant information, that can be used in the LLM response.</li>
</ul>
<p>HTTP method and URL:</p>
<div class="language-python highlight"><pre><span></span><code><span id="__span-54-1"><a id="__codelineno-54-1" name="__codelineno-54-1" href="#__codelineno-54-1"></a><span class="n">POST</span> <span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">LOCATION</span><span class="o">-</span><span class="n">aiplatform</span><span class="o">.</span><span class="n">googleapis</span><span class="o">.</span><span class="n">com</span><span class="o">/</span><span class="n">v1beta1</span><span class="o">/</span><span class="n">projects</span><span class="o">/</span><span class="n">PROJECT_ID</span><span class="o">-/</span><span class="n">locations</span><span class="o">/</span><span class="n">LOCATION</span><span class="p">:</span><span class="n">evaluateInstances</span> \
</span></code></pre></div>
<p>Request JSON body:</p>
<div class="language-python highlight"><pre><span></span><code><span id="__span-55-1"><a id="__codelineno-55-1" name="__codelineno-55-1" href="#__codelineno-55-1"></a><span class="p">{</span>
</span><span id="__span-55-2"><a id="__codelineno-55-2" name="__codelineno-55-2" href="#__codelineno-55-2"></a> <span class="s2">&quot;pairwise_summarization_quality_input&quot;</span><span class="p">:</span> <span class="p">{</span>
</span><span id="__span-55-3"><a id="__codelineno-55-3" name="__codelineno-55-3" href="#__codelineno-55-3"></a> <span class="s2">&quot;metric_spec&quot;</span><span class="p">:</span> <span class="p">{},</span>
</span><span id="__span-55-4"><a id="__codelineno-55-4" name="__codelineno-55-4" href="#__codelineno-55-4"></a> <span class="s2">&quot;instance&quot;</span><span class="p">:</span> <span class="p">{</span>
</span><span id="__span-55-5"><a id="__codelineno-55-5" name="__codelineno-55-5" href="#__codelineno-55-5"></a> <span class="s2">&quot;prediction&quot;</span><span class="p">:</span> <span class="s2">&quot;PREDICTION&quot;</span><span class="p">,</span>
</span><span id="__span-55-6"><a id="__codelineno-55-6" name="__codelineno-55-6" href="#__codelineno-55-6"></a> <span class="s2">&quot;baseline_prediction&quot;</span><span class="p">:</span> <span class="s2">&quot;BASELINE_PREDICTION&quot;</span><span class="p">,</span>
</span><span id="__span-55-7"><a id="__codelineno-55-7" name="__codelineno-55-7" href="#__codelineno-55-7"></a> <span class="s2">&quot;instruction&quot;</span><span class="p">:</span> <span class="s2">&quot;INSTRUCTION&quot;</span><span class="p">,</span>
</span><span id="__span-55-8"><a id="__codelineno-55-8" name="__codelineno-55-8" href="#__codelineno-55-8"></a> <span class="s2">&quot;context&quot;</span><span class="p">:</span> <span class="s2">&quot;CONTEXT&quot;</span><span class="p">,</span>
</span><span id="__span-55-9"><a id="__codelineno-55-9" name="__codelineno-55-9" href="#__codelineno-55-9"></a> <span class="p">}</span>
</span><span id="__span-55-10"><a id="__codelineno-55-10" name="__codelineno-55-10" href="#__codelineno-55-10"></a> <span class="p">}</span>
</span><span id="__span-55-11"><a id="__codelineno-55-11" name="__codelineno-55-11" href="#__codelineno-55-11"></a><span class="p">}</span>
</span></code></pre></div>
<p>To send your request, choose one of these options:</p>
<h4 id="curl_1">curl<a class="headerlink" href="#curl_1" title="Permanent link">&para;</a></h4>
<p><strong>Note:</strong>
The following command assumes that you have logged in to
the <code>gcloud</code> CLI with your user account by running
<a href="https://cloud.google.com/sdk/gcloud/reference/init"><code>gcloud init</code></a>
or
<a href="https://cloud.google.com/sdk/gcloud/reference/auth/login"><code>gcloud auth login</code></a>
, or by using <a href="https://cloud.google.com/shell/docs">Cloud Shell</a>,
which automatically logs you into the <code>gcloud</code> CLI
.
You can check the currently active account by running
<a href="https://cloud.google.com/sdk/gcloud/reference/auth/list"><code>gcloud auth list</code></a>.</p>
<p>Save the request body in a file named <code>request.json</code>,
and execute the following command:</p>
<div class="language-python highlight"><pre><span></span><code><span id="__span-56-1"><a id="__codelineno-56-1" name="__codelineno-56-1" href="#__codelineno-56-1"></a><span class="n">curl</span> <span class="o">-</span><span class="n">X</span> <span class="n">POST</span> \ 
</span><span id="__span-56-2"><a id="__codelineno-56-2" name="__codelineno-56-2" href="#__codelineno-56-2"></a> <span class="o">-</span><span class="n">H</span> <span class="s2">&quot;Authorization: Bearer $(gcloud auth print-access-token)&quot;</span> \ 
</span><span id="__span-56-3"><a id="__codelineno-56-3" name="__codelineno-56-3" href="#__codelineno-56-3"></a> <span class="o">-</span><span class="n">H</span> <span class="s2">&quot;Content-Type: application/json; charset=utf-8&quot;</span> \ 
</span><span id="__span-56-4"><a id="__codelineno-56-4" name="__codelineno-56-4" href="#__codelineno-56-4"></a> <span class="o">-</span><span class="n">d</span> <span class="nd">@request</span><span class="o">.</span><span class="n">json</span> \ 
</span><span id="__span-56-5"><a id="__codelineno-56-5" name="__codelineno-56-5" href="#__codelineno-56-5"></a> <span class="s2">&quot;https://LOCATION-aiplatform.googleapis.com/v1beta1/projects/PROJECT_ID-/locations/LOCATION:evaluateInstances </span><span class="se">\&quot;</span>
</span></code></pre></div>
<h4 id="powershell">PowerShell<a class="headerlink" href="#powershell" title="Permanent link">&para;</a></h4>
<p><strong>Note:</strong>
The following command assumes that you have logged in to
the <code>gcloud</code> CLI with your user account by running
<a href="https://cloud.google.com/sdk/gcloud/reference/init"><code>gcloud init</code></a>
or
<a href="https://cloud.google.com/sdk/gcloud/reference/auth/login"><code>gcloud auth login</code></a>
.
You can check the currently active account by running
<a href="https://cloud.google.com/sdk/gcloud/reference/auth/list"><code>gcloud auth list</code></a>.</p>
<p>Save the request body in a file named <code>request.json</code>,
and execute the following command:</p>
<div class="language-python highlight"><pre><span></span><code><span id="__span-57-1"><a id="__codelineno-57-1" name="__codelineno-57-1" href="#__codelineno-57-1"></a><span class="err">$</span><span class="n">cred</span> <span class="o">=</span> <span class="n">gcloud</span> <span class="n">auth</span> <span class="nb">print</span><span class="o">-</span><span class="n">access</span><span class="o">-</span><span class="n">token</span> 
</span><span id="__span-57-2"><a id="__codelineno-57-2" name="__codelineno-57-2" href="#__codelineno-57-2"></a><span class="err">$</span><span class="n">headers</span> <span class="o">=</span> <span class="o">@</span><span class="p">{</span> <span class="s2">&quot;Authorization&quot;</span> <span class="o">=</span> <span class="s2">&quot;Bearer $cred&quot;</span> <span class="p">}</span> 
</span><span id="__span-57-3"><a id="__codelineno-57-3" name="__codelineno-57-3" href="#__codelineno-57-3"></a>
</span><span id="__span-57-4"><a id="__codelineno-57-4" name="__codelineno-57-4" href="#__codelineno-57-4"></a><span class="n">Invoke</span><span class="o">-</span><span class="n">WebRequest</span> <span class="err">`</span> 
</span><span id="__span-57-5"><a id="__codelineno-57-5" name="__codelineno-57-5" href="#__codelineno-57-5"></a> <span class="o">-</span><span class="n">Method</span> <span class="n">POST</span> <span class="err">`</span> 
</span><span id="__span-57-6"><a id="__codelineno-57-6" name="__codelineno-57-6" href="#__codelineno-57-6"></a> <span class="o">-</span><span class="n">Headers</span> <span class="err">$</span><span class="n">headers</span> <span class="err">`</span> 
</span><span id="__span-57-7"><a id="__codelineno-57-7" name="__codelineno-57-7" href="#__codelineno-57-7"></a> <span class="o">-</span><span class="n">ContentType</span><span class="p">:</span> <span class="s2">&quot;application/json; charset=utf-8&quot;</span> <span class="err">`</span> 
</span><span id="__span-57-8"><a id="__codelineno-57-8" name="__codelineno-57-8" href="#__codelineno-57-8"></a> <span class="o">-</span><span class="n">InFile</span> <span class="n">request</span><span class="o">.</span><span class="n">json</span> <span class="err">`</span> 
</span><span id="__span-57-9"><a id="__codelineno-57-9" name="__codelineno-57-9" href="#__codelineno-57-9"></a> <span class="o">-</span><span class="n">Uri</span> <span class="s2">&quot;https://LOCATION-aiplatform.googleapis.com/v1beta1/projects/PROJECT_ID-/locations/LOCATION:evaluateInstances </span><span class="se">\&quot;</span><span class="s2"> | Select-Object -Expand Content</span>
</span></code></pre></div>
<h3 id="python_2">Python<a class="headerlink" href="#python_2" title="Permanent link">&para;</a></h3>
<h3 id="vertex-ai-sdk-for-python">Vertex AI SDK for Python<a class="headerlink" href="#vertex-ai-sdk-for-python" title="Permanent link">&para;</a></h3>
<p>To learn how to install or update the Vertex AI SDK for Python, see <a href="https://cloud.google.com/vertex-ai/docs/start/use-vertex-ai-python-sdk">Install the Vertex AI SDK for Python</a>.
For more information, see the
<a href="https://cloud.google.com/python/docs/reference/aiplatform/latest">Vertex AI SDK for Python API reference documentation</a>.</p>
<div class="language-python highlight"><pre><span></span><code><span id="__span-58-1"><a id="__codelineno-58-1" name="__codelineno-58-1" href="#__codelineno-58-1"></a><span class="kn">import</span><span class="w"> </span><span class="nn">pandas</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">pd</span>
</span><span id="__span-58-2"><a id="__codelineno-58-2" name="__codelineno-58-2" href="#__codelineno-58-2"></a>
</span><span id="__span-58-3"><a id="__codelineno-58-3" name="__codelineno-58-3" href="#__codelineno-58-3"></a><span class="kn">import</span><span class="w"> </span><span class="nn">vertexai</span>
</span><span id="__span-58-4"><a id="__codelineno-58-4" name="__codelineno-58-4" href="#__codelineno-58-4"></a><span class="kn">from</span><span class="w"> </span><span class="nn">vertexai.generative_models</span><span class="w"> </span><span class="kn">import</span> <span class="n">GenerativeModel</span>
</span><span id="__span-58-5"><a id="__codelineno-58-5" name="__codelineno-58-5" href="#__codelineno-58-5"></a><span class="kn">from</span><span class="w"> </span><span class="nn">vertexai.evaluation</span><span class="w"> </span><span class="kn">import</span> <span class="p">(</span>
</span><span id="__span-58-6"><a id="__codelineno-58-6" name="__codelineno-58-6" href="#__codelineno-58-6"></a> <span class="n">EvalTask</span><span class="p">,</span>
</span><span id="__span-58-7"><a id="__codelineno-58-7" name="__codelineno-58-7" href="#__codelineno-58-7"></a> <span class="n">PairwiseMetric</span><span class="p">,</span>
</span><span id="__span-58-8"><a id="__codelineno-58-8" name="__codelineno-58-8" href="#__codelineno-58-8"></a> <span class="n">MetricPromptTemplateExamples</span><span class="p">,</span>
</span><span id="__span-58-9"><a id="__codelineno-58-9" name="__codelineno-58-9" href="#__codelineno-58-9"></a><span class="p">)</span>
</span><span id="__span-58-10"><a id="__codelineno-58-10" name="__codelineno-58-10" href="#__codelineno-58-10"></a>
</span><span id="__span-58-11"><a id="__codelineno-58-11" name="__codelineno-58-11" href="#__codelineno-58-11"></a><span class="c1"># TODO(developer): Update &amp; uncomment line below</span>
</span><span id="__span-58-12"><a id="__codelineno-58-12" name="__codelineno-58-12" href="#__codelineno-58-12"></a><span class="c1"># PROJECT_ID = &quot;your-project-id&quot;</span>
</span><span id="__span-58-13"><a id="__codelineno-58-13" name="__codelineno-58-13" href="#__codelineno-58-13"></a><span class="n">vertexai</span><span class="o">.</span><span class="n">init</span><span class="p">(</span><span class="n">project</span><span class="o">=</span><span class="n">PROJECT_ID</span><span class="p">,</span> <span class="n">location</span><span class="o">=</span><span class="s2">&quot;us-central1&quot;</span><span class="p">)</span>
</span><span id="__span-58-14"><a id="__codelineno-58-14" name="__codelineno-58-14" href="#__codelineno-58-14"></a>
</span><span id="__span-58-15"><a id="__codelineno-58-15" name="__codelineno-58-15" href="#__codelineno-58-15"></a><span class="n">prompt</span> <span class="o">=</span> <span class="s2">&quot;&quot;&quot;</span>
</span><span id="__span-58-16"><a id="__codelineno-58-16" name="__codelineno-58-16" href="#__codelineno-58-16"></a><span class="s2">Summarize the text such that a five-year-old can understand.</span>
</span><span id="__span-58-17"><a id="__codelineno-58-17" name="__codelineno-58-17" href="#__codelineno-58-17"></a>
</span><span id="__span-58-18"><a id="__codelineno-58-18" name="__codelineno-58-18" href="#__codelineno-58-18"></a><span class="s2"># Text</span>
</span><span id="__span-58-19"><a id="__codelineno-58-19" name="__codelineno-58-19" href="#__codelineno-58-19"></a>
</span><span id="__span-58-20"><a id="__codelineno-58-20" name="__codelineno-58-20" href="#__codelineno-58-20"></a><span class="s2">As part of a comprehensive initiative to tackle urban congestion and foster</span>
</span><span id="__span-58-21"><a id="__codelineno-58-21" name="__codelineno-58-21" href="#__codelineno-58-21"></a><span class="s2">sustainable urban living, a major city has revealed ambitious plans for an</span>
</span><span id="__span-58-22"><a id="__codelineno-58-22" name="__codelineno-58-22" href="#__codelineno-58-22"></a><span class="s2">extensive overhaul of its public transportation system. The project aims not</span>
</span><span id="__span-58-23"><a id="__codelineno-58-23" name="__codelineno-58-23" href="#__codelineno-58-23"></a><span class="s2">only to improve the efficiency and reliability of public transit but also to</span>
</span><span id="__span-58-24"><a id="__codelineno-58-24" name="__codelineno-58-24" href="#__codelineno-58-24"></a><span class="s2">reduce the city</span><span class="se">\&#39;</span><span class="s2">s carbon footprint and promote eco-friendly commuting options.</span>
</span><span id="__span-58-25"><a id="__codelineno-58-25" name="__codelineno-58-25" href="#__codelineno-58-25"></a><span class="s2">City officials anticipate that this strategic investment will enhance</span>
</span><span id="__span-58-26"><a id="__codelineno-58-26" name="__codelineno-58-26" href="#__codelineno-58-26"></a><span class="s2">accessibility for residents and visitors alike, ushering in a new era of</span>
</span><span id="__span-58-27"><a id="__codelineno-58-27" name="__codelineno-58-27" href="#__codelineno-58-27"></a><span class="s2">efficient, environmentally conscious urban transportation.</span>
</span><span id="__span-58-28"><a id="__codelineno-58-28" name="__codelineno-58-28" href="#__codelineno-58-28"></a><span class="s2">&quot;&quot;&quot;</span>
</span><span id="__span-58-29"><a id="__codelineno-58-29" name="__codelineno-58-29" href="#__codelineno-58-29"></a>
</span><span id="__span-58-30"><a id="__codelineno-58-30" name="__codelineno-58-30" href="#__codelineno-58-30"></a><span class="n">eval_dataset</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span><span class="s2">&quot;prompt&quot;</span><span class="p">:</span> <span class="p">[</span><span class="n">prompt</span><span class="p">]})</span>
</span><span id="__span-58-31"><a id="__codelineno-58-31" name="__codelineno-58-31" href="#__codelineno-58-31"></a>
</span><span id="__span-58-32"><a id="__codelineno-58-32" name="__codelineno-58-32" href="#__codelineno-58-32"></a><span class="c1"># Baseline model for pairwise comparison</span>
</span><span id="__span-58-33"><a id="__codelineno-58-33" name="__codelineno-58-33" href="#__codelineno-58-33"></a><span class="n">baseline_model</span> <span class="o">=</span> <span class="n">GenerativeModel</span><span class="p">(</span><span class="s2">&quot;gemini-2.0-flash-lite-001&quot;</span><span class="p">)</span>
</span><span id="__span-58-34"><a id="__codelineno-58-34" name="__codelineno-58-34" href="#__codelineno-58-34"></a>
</span><span id="__span-58-35"><a id="__codelineno-58-35" name="__codelineno-58-35" href="#__codelineno-58-35"></a><span class="c1"># Candidate model for pairwise comparison</span>
</span><span id="__span-58-36"><a id="__codelineno-58-36" name="__codelineno-58-36" href="#__codelineno-58-36"></a><span class="n">candidate_model</span> <span class="o">=</span> <span class="n">GenerativeModel</span><span class="p">(</span>
</span><span id="__span-58-37"><a id="__codelineno-58-37" name="__codelineno-58-37" href="#__codelineno-58-37"></a> <span class="s2">&quot;gemini-2.0-flash-001&quot;</span><span class="p">,</span> <span class="n">generation_config</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;temperature&quot;</span><span class="p">:</span> <span class="mf">0.4</span><span class="p">}</span>
</span><span id="__span-58-38"><a id="__codelineno-58-38" name="__codelineno-58-38" href="#__codelineno-58-38"></a><span class="p">)</span>
</span><span id="__span-58-39"><a id="__codelineno-58-39" name="__codelineno-58-39" href="#__codelineno-58-39"></a>
</span><span id="__span-58-40"><a id="__codelineno-58-40" name="__codelineno-58-40" href="#__codelineno-58-40"></a><span class="n">prompt_template</span> <span class="o">=</span> <span class="n">MetricPromptTemplateExamples</span><span class="o">.</span><span class="n">get_prompt_template</span><span class="p">(</span>
</span><span id="__span-58-41"><a id="__codelineno-58-41" name="__codelineno-58-41" href="#__codelineno-58-41"></a> <span class="s2">&quot;pairwise_summarization_quality&quot;</span>
</span><span id="__span-58-42"><a id="__codelineno-58-42" name="__codelineno-58-42" href="#__codelineno-58-42"></a><span class="p">)</span>
</span><span id="__span-58-43"><a id="__codelineno-58-43" name="__codelineno-58-43" href="#__codelineno-58-43"></a>
</span><span id="__span-58-44"><a id="__codelineno-58-44" name="__codelineno-58-44" href="#__codelineno-58-44"></a><span class="n">summarization_quality_metric</span> <span class="o">=</span> <span class="n">PairwiseMetric</span><span class="p">(</span>
</span><span id="__span-58-45"><a id="__codelineno-58-45" name="__codelineno-58-45" href="#__codelineno-58-45"></a> <span class="n">metric</span><span class="o">=</span><span class="s2">&quot;pairwise_summarization_quality&quot;</span><span class="p">,</span>
</span><span id="__span-58-46"><a id="__codelineno-58-46" name="__codelineno-58-46" href="#__codelineno-58-46"></a> <span class="n">metric_prompt_template</span><span class="o">=</span><span class="n">prompt_template</span><span class="p">,</span>
</span><span id="__span-58-47"><a id="__codelineno-58-47" name="__codelineno-58-47" href="#__codelineno-58-47"></a> <span class="n">baseline_model</span><span class="o">=</span><span class="n">baseline_model</span><span class="p">,</span>
</span><span id="__span-58-48"><a id="__codelineno-58-48" name="__codelineno-58-48" href="#__codelineno-58-48"></a><span class="p">)</span>
</span><span id="__span-58-49"><a id="__codelineno-58-49" name="__codelineno-58-49" href="#__codelineno-58-49"></a>
</span><span id="__span-58-50"><a id="__codelineno-58-50" name="__codelineno-58-50" href="#__codelineno-58-50"></a><span class="n">eval_task</span> <span class="o">=</span> <span class="n">EvalTask</span><span class="p">(</span>
</span><span id="__span-58-51"><a id="__codelineno-58-51" name="__codelineno-58-51" href="#__codelineno-58-51"></a> <span class="n">dataset</span><span class="o">=</span><span class="n">eval_dataset</span><span class="p">,</span>
</span><span id="__span-58-52"><a id="__codelineno-58-52" name="__codelineno-58-52" href="#__codelineno-58-52"></a> <span class="n">metrics</span><span class="o">=</span><span class="p">[</span><span class="n">summarization_quality_metric</span><span class="p">],</span>
</span><span id="__span-58-53"><a id="__codelineno-58-53" name="__codelineno-58-53" href="#__codelineno-58-53"></a> <span class="n">experiment</span><span class="o">=</span><span class="s2">&quot;pairwise-experiment&quot;</span><span class="p">,</span>
</span><span id="__span-58-54"><a id="__codelineno-58-54" name="__codelineno-58-54" href="#__codelineno-58-54"></a><span class="p">)</span>
</span><span id="__span-58-55"><a id="__codelineno-58-55" name="__codelineno-58-55" href="#__codelineno-58-55"></a><span class="n">result</span> <span class="o">=</span> <span class="n">eval_task</span><span class="o">.</span><span class="n">evaluate</span><span class="p">(</span><span class="n">model</span><span class="o">=</span><span class="n">candidate_model</span><span class="p">)</span>
</span><span id="__span-58-56"><a id="__codelineno-58-56" name="__codelineno-58-56" href="#__codelineno-58-56"></a>
</span><span id="__span-58-57"><a id="__codelineno-58-57" name="__codelineno-58-57" href="#__codelineno-58-57"></a><span class="n">baseline_model_response</span> <span class="o">=</span> <span class="n">result</span><span class="o">.</span><span class="n">metrics_table</span><span class="p">[</span><span class="s2">&quot;baseline_model_response&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
</span><span id="__span-58-58"><a id="__codelineno-58-58" name="__codelineno-58-58" href="#__codelineno-58-58"></a><span class="n">candidate_model_response</span> <span class="o">=</span> <span class="n">result</span><span class="o">.</span><span class="n">metrics_table</span><span class="p">[</span><span class="s2">&quot;response&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
</span><span id="__span-58-59"><a id="__codelineno-58-59" name="__codelineno-58-59" href="#__codelineno-58-59"></a><span class="n">winner_model</span> <span class="o">=</span> <span class="n">result</span><span class="o">.</span><span class="n">metrics_table</span><span class="p">[</span>
</span><span id="__span-58-60"><a id="__codelineno-58-60" name="__codelineno-58-60" href="#__codelineno-58-60"></a> <span class="s2">&quot;pairwise_summarization_quality/pairwise_choice&quot;</span>
</span><span id="__span-58-61"><a id="__codelineno-58-61" name="__codelineno-58-61" href="#__codelineno-58-61"></a><span class="p">]</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
</span><span id="__span-58-62"><a id="__codelineno-58-62" name="__codelineno-58-62" href="#__codelineno-58-62"></a><span class="n">explanation</span> <span class="o">=</span> <span class="n">result</span><span class="o">.</span><span class="n">metrics_table</span><span class="p">[</span>
</span><span id="__span-58-63"><a id="__codelineno-58-63" name="__codelineno-58-63" href="#__codelineno-58-63"></a> <span class="s2">&quot;pairwise_summarization_quality/explanation&quot;</span>
</span><span id="__span-58-64"><a id="__codelineno-58-64" name="__codelineno-58-64" href="#__codelineno-58-64"></a><span class="p">]</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
</span><span id="__span-58-65"><a id="__codelineno-58-65" name="__codelineno-58-65" href="#__codelineno-58-65"></a>
</span><span id="__span-58-66"><a id="__codelineno-58-66" name="__codelineno-58-66" href="#__codelineno-58-66"></a><span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Baseline&#39;s story:</span><span class="se">\n</span><span class="si">{</span><span class="n">baseline_model_response</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</span><span id="__span-58-67"><a id="__codelineno-58-67" name="__codelineno-58-67" href="#__codelineno-58-67"></a><span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Candidate&#39;s story:</span><span class="se">\n</span><span class="si">{</span><span class="n">candidate_model_response</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</span><span id="__span-58-68"><a id="__codelineno-58-68" name="__codelineno-58-68" href="#__codelineno-58-68"></a><span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Winner: </span><span class="si">{</span><span class="n">winner_model</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</span><span id="__span-58-69"><a id="__codelineno-58-69" name="__codelineno-58-69" href="#__codelineno-58-69"></a><span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Explanation: </span><span class="si">{</span><span class="n">explanation</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</span><span id="__span-58-70"><a id="__codelineno-58-70" name="__codelineno-58-70" href="#__codelineno-58-70"></a><span class="c1"># Example response:</span>
</span><span id="__span-58-71"><a id="__codelineno-58-71" name="__codelineno-58-71" href="#__codelineno-58-71"></a><span class="c1"># Baseline&#39;s story:</span>
</span><span id="__span-58-72"><a id="__codelineno-58-72" name="__codelineno-58-72" href="#__codelineno-58-72"></a><span class="c1"># A big city wants to make it easier for people to get around without using cars! They&#39;re going to make buses and trains ...</span>
</span><span id="__span-58-73"><a id="__codelineno-58-73" name="__codelineno-58-73" href="#__codelineno-58-73"></a><span class="c1">#</span>
</span><span id="__span-58-74"><a id="__codelineno-58-74" name="__codelineno-58-74" href="#__codelineno-58-74"></a><span class="c1"># Candidate&#39;s story:</span>
</span><span id="__span-58-75"><a id="__codelineno-58-75" name="__codelineno-58-75" href="#__codelineno-58-75"></a><span class="c1"># A big city wants to make it easier for people to get around without using cars! ... This will help keep the air clean ...</span>
</span><span id="__span-58-76"><a id="__codelineno-58-76" name="__codelineno-58-76" href="#__codelineno-58-76"></a><span class="c1">#</span>
</span><span id="__span-58-77"><a id="__codelineno-58-77" name="__codelineno-58-77" href="#__codelineno-58-77"></a><span class="c1"># Winner: CANDIDATE</span>
</span><span id="__span-58-78"><a id="__codelineno-58-78" name="__codelineno-58-78" href="#__codelineno-58-78"></a><span class="c1"># Explanation: Both responses adhere to the prompt&#39;s constraints, are grounded in the provided text, and ... However, Response B ...</span>
</span></code></pre></div>
<h3 id="go_1">Go<a class="headerlink" href="#go_1" title="Permanent link">&para;</a></h3>
<h3 id="go_2">Go<a class="headerlink" href="#go_2" title="Permanent link">&para;</a></h3>
<p>Before trying this sample, follow the Go setup instructions in the
<a href="https://cloud.google.com/vertex-ai/docs/start/client-libraries">Vertex AI quickstart using
client libraries</a>.
For more information, see the
<a href="/go/docs/reference/cloud.google.com/go/aiplatform/latest/apiv1">Vertex AI Go API
reference documentation</a>.</p>
<p>To authenticate to Vertex AI, set up Application Default Credentials.
For more information, see
<a href="https://cloud.google.com/docs/authentication/set-up-adc-local-dev-environment">Set up authentication for a local development environment</a>.</p>
<div class="language-python highlight"><pre><span></span><code><span id="__span-59-1"><a id="__codelineno-59-1" name="__codelineno-59-1" href="#__codelineno-59-1"></a><span class="kn">import</span><span class="w"> </span><span class="p">(</span>
</span><span id="__span-59-2"><a id="__codelineno-59-2" name="__codelineno-59-2" href="#__codelineno-59-2"></a> <span class="n">context_pkg</span> <span class="s2">&quot;context&quot;</span>
</span><span id="__span-59-3"><a id="__codelineno-59-3" name="__codelineno-59-3" href="#__codelineno-59-3"></a> <span class="s2">&quot;fmt&quot;</span>
</span><span id="__span-59-4"><a id="__codelineno-59-4" name="__codelineno-59-4" href="#__codelineno-59-4"></a> <span class="s2">&quot;io&quot;</span>
</span><span id="__span-59-5"><a id="__codelineno-59-5" name="__codelineno-59-5" href="#__codelineno-59-5"></a>
</span><span id="__span-59-6"><a id="__codelineno-59-6" name="__codelineno-59-6" href="#__codelineno-59-6"></a> <span class="n">aiplatform</span> <span class="s2">&quot;cloud.google.com/go/aiplatform/apiv1beta1&quot;</span>
</span><span id="__span-59-7"><a id="__codelineno-59-7" name="__codelineno-59-7" href="#__codelineno-59-7"></a> <span class="n">aiplatformpb</span> <span class="s2">&quot;cloud.google.com/go/aiplatform/apiv1beta1/aiplatformpb&quot;</span>
</span><span id="__span-59-8"><a id="__codelineno-59-8" name="__codelineno-59-8" href="#__codelineno-59-8"></a> <span class="s2">&quot;google.golang.org/api/option&quot;</span>
</span><span id="__span-59-9"><a id="__codelineno-59-9" name="__codelineno-59-9" href="#__codelineno-59-9"></a><span class="p">)</span>
</span><span id="__span-59-10"><a id="__codelineno-59-10" name="__codelineno-59-10" href="#__codelineno-59-10"></a>
</span><span id="__span-59-11"><a id="__codelineno-59-11" name="__codelineno-59-11" href="#__codelineno-59-11"></a><span class="o">//</span> <span class="n">pairwiseEvaluation</span> <span class="n">lets</span> <span class="n">the</span> <span class="n">judge</span> <span class="n">model</span> <span class="n">to</span> <span class="n">compare</span> <span class="n">the</span> <span class="n">responses</span> <span class="n">of</span> <span class="n">two</span> <span class="n">models</span> <span class="ow">and</span> <span class="n">pick</span> <span class="n">the</span> <span class="n">better</span> <span class="n">one</span>
</span><span id="__span-59-12"><a id="__codelineno-59-12" name="__codelineno-59-12" href="#__codelineno-59-12"></a><span class="n">func</span> <span class="n">pairwiseEvaluation</span><span class="p">(</span><span class="n">w</span> <span class="n">io</span><span class="o">.</span><span class="n">Writer</span><span class="p">,</span> <span class="n">projectID</span><span class="p">,</span> <span class="n">location</span> <span class="n">string</span><span class="p">)</span> <span class="n">error</span> <span class="p">{</span>
</span><span id="__span-59-13"><a id="__codelineno-59-13" name="__codelineno-59-13" href="#__codelineno-59-13"></a> <span class="o">//</span> <span class="n">location</span> <span class="o">=</span> <span class="s2">&quot;us-central1&quot;</span>
</span><span id="__span-59-14"><a id="__codelineno-59-14" name="__codelineno-59-14" href="#__codelineno-59-14"></a> <span class="n">ctx</span> <span class="o">:=</span> <span class="n">context_pkg</span><span class="o">.</span><span class="n">Background</span><span class="p">()</span>
</span><span id="__span-59-15"><a id="__codelineno-59-15" name="__codelineno-59-15" href="#__codelineno-59-15"></a> <span class="n">apiEndpoint</span> <span class="o">:=</span> <span class="n">fmt</span><span class="o">.</span><span class="n">Sprintf</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">%s</span><span class="s2">-aiplatform.googleapis.com:443&quot;</span><span class="p">,</span> <span class="n">location</span><span class="p">)</span>
</span><span id="__span-59-16"><a id="__codelineno-59-16" name="__codelineno-59-16" href="#__codelineno-59-16"></a> <span class="n">client</span><span class="p">,</span> <span class="n">err</span> <span class="o">:=</span> <span class="n">aiplatform</span><span class="o">.</span><span class="n">NewEvaluationClient</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="n">option</span><span class="o">.</span><span class="n">WithEndpoint</span><span class="p">(</span><span class="n">apiEndpoint</span><span class="p">))</span>
</span><span id="__span-59-17"><a id="__codelineno-59-17" name="__codelineno-59-17" href="#__codelineno-59-17"></a>
</span><span id="__span-59-18"><a id="__codelineno-59-18" name="__codelineno-59-18" href="#__codelineno-59-18"></a> <span class="k">if</span> <span class="n">err</span> <span class="o">!=</span> <span class="n">nil</span> <span class="p">{</span>
</span><span id="__span-59-19"><a id="__codelineno-59-19" name="__codelineno-59-19" href="#__codelineno-59-19"></a> <span class="k">return</span> <span class="n">fmt</span><span class="o">.</span><span class="n">Errorf</span><span class="p">(</span><span class="s2">&quot;unable to create aiplatform client: %w&quot;</span><span class="p">,</span> <span class="n">err</span><span class="p">)</span>
</span><span id="__span-59-20"><a id="__codelineno-59-20" name="__codelineno-59-20" href="#__codelineno-59-20"></a> <span class="p">}</span>
</span><span id="__span-59-21"><a id="__codelineno-59-21" name="__codelineno-59-21" href="#__codelineno-59-21"></a> <span class="n">defer</span> <span class="n">client</span><span class="o">.</span><span class="n">Close</span><span class="p">()</span>
</span><span id="__span-59-22"><a id="__codelineno-59-22" name="__codelineno-59-22" href="#__codelineno-59-22"></a>
</span><span id="__span-59-23"><a id="__codelineno-59-23" name="__codelineno-59-23" href="#__codelineno-59-23"></a> <span class="n">context</span> <span class="o">:=</span> <span class="err">`</span>
</span><span id="__span-59-24"><a id="__codelineno-59-24" name="__codelineno-59-24" href="#__codelineno-59-24"></a><span class="n">As</span> <span class="n">part</span> <span class="n">of</span> <span class="n">a</span> <span class="n">comprehensive</span> <span class="n">initiative</span> <span class="n">to</span> <span class="n">tackle</span> <span class="n">urban</span> <span class="n">congestion</span> <span class="ow">and</span> <span class="n">foster</span>
</span><span id="__span-59-25"><a id="__codelineno-59-25" name="__codelineno-59-25" href="#__codelineno-59-25"></a><span class="n">sustainable</span> <span class="n">urban</span> <span class="n">living</span><span class="p">,</span> <span class="n">a</span> <span class="n">major</span> <span class="n">city</span> <span class="n">has</span> <span class="n">revealed</span> <span class="n">ambitious</span> <span class="n">plans</span> <span class="k">for</span> <span class="n">an</span>
</span><span id="__span-59-26"><a id="__codelineno-59-26" name="__codelineno-59-26" href="#__codelineno-59-26"></a><span class="n">extensive</span> <span class="n">overhaul</span> <span class="n">of</span> <span class="n">its</span> <span class="n">public</span> <span class="n">transportation</span> <span class="n">system</span><span class="o">.</span> <span class="n">The</span> <span class="n">project</span> <span class="n">aims</span> <span class="ow">not</span>
</span><span id="__span-59-27"><a id="__codelineno-59-27" name="__codelineno-59-27" href="#__codelineno-59-27"></a><span class="n">only</span> <span class="n">to</span> <span class="n">improve</span> <span class="n">the</span> <span class="n">efficiency</span> <span class="ow">and</span> <span class="n">reliability</span> <span class="n">of</span> <span class="n">public</span> <span class="n">transit</span> <span class="n">but</span> <span class="n">also</span> <span class="n">to</span>
</span><span id="__span-59-28"><a id="__codelineno-59-28" name="__codelineno-59-28" href="#__codelineno-59-28"></a><span class="n">reduce</span> <span class="n">the</span> <span class="n">city</span>\<span class="s1">&#39;s carbon footprint and promote eco-friendly commuting options.</span>
</span><span id="__span-59-29"><a id="__codelineno-59-29" name="__codelineno-59-29" href="#__codelineno-59-29"></a><span class="n">City</span> <span class="n">officials</span> <span class="n">anticipate</span> <span class="n">that</span> <span class="n">this</span> <span class="n">strategic</span> <span class="n">investment</span> <span class="n">will</span> <span class="n">enhance</span>
</span><span id="__span-59-30"><a id="__codelineno-59-30" name="__codelineno-59-30" href="#__codelineno-59-30"></a><span class="n">accessibility</span> <span class="k">for</span> <span class="n">residents</span> <span class="ow">and</span> <span class="n">visitors</span> <span class="n">alike</span><span class="p">,</span> <span class="n">ushering</span> <span class="ow">in</span> <span class="n">a</span> <span class="n">new</span> <span class="n">era</span> <span class="n">of</span>
</span><span id="__span-59-31"><a id="__codelineno-59-31" name="__codelineno-59-31" href="#__codelineno-59-31"></a><span class="n">efficient</span><span class="p">,</span> <span class="n">environmentally</span> <span class="n">conscious</span> <span class="n">urban</span> <span class="n">transportation</span><span class="o">.</span>
</span><span id="__span-59-32"><a id="__codelineno-59-32" name="__codelineno-59-32" href="#__codelineno-59-32"></a><span class="err">`</span>
</span><span id="__span-59-33"><a id="__codelineno-59-33" name="__codelineno-59-33" href="#__codelineno-59-33"></a> <span class="n">instruction</span> <span class="o">:=</span> <span class="s2">&quot;Summarize the text such that a five-year-old can understand.&quot;</span>
</span><span id="__span-59-34"><a id="__codelineno-59-34" name="__codelineno-59-34" href="#__codelineno-59-34"></a> <span class="n">baselineResponse</span> <span class="o">:=</span> <span class="err">`</span>
</span><span id="__span-59-35"><a id="__codelineno-59-35" name="__codelineno-59-35" href="#__codelineno-59-35"></a><span class="n">The</span> <span class="n">city</span> <span class="n">wants</span> <span class="n">to</span> <span class="n">make</span> <span class="n">it</span> <span class="n">easier</span> <span class="k">for</span> <span class="n">people</span> <span class="n">to</span> <span class="n">get</span> <span class="n">around</span> <span class="n">without</span> <span class="n">using</span> <span class="n">cars</span><span class="o">.</span>
</span><span id="__span-59-36"><a id="__codelineno-59-36" name="__codelineno-59-36" href="#__codelineno-59-36"></a><span class="n">They</span><span class="s1">&#39;re going to make the buses and trains better and faster, so people will want to</span>
</span><span id="__span-59-37"><a id="__codelineno-59-37" name="__codelineno-59-37" href="#__codelineno-59-37"></a><span class="n">use</span> <span class="n">them</span> <span class="n">more</span><span class="o">.</span> <span class="n">This</span> <span class="n">will</span> <span class="n">help</span> <span class="n">the</span> <span class="n">air</span> <span class="n">be</span> <span class="n">cleaner</span> <span class="ow">and</span> <span class="n">make</span> <span class="n">the</span> <span class="n">city</span> <span class="n">a</span> <span class="n">better</span> <span class="n">place</span> <span class="n">to</span> <span class="n">live</span><span class="o">.</span>
</span><span id="__span-59-38"><a id="__codelineno-59-38" name="__codelineno-59-38" href="#__codelineno-59-38"></a><span class="err">`</span>
</span><span id="__span-59-39"><a id="__codelineno-59-39" name="__codelineno-59-39" href="#__codelineno-59-39"></a> <span class="n">candidateResponse</span> <span class="o">:=</span> <span class="err">`</span>
</span><span id="__span-59-40"><a id="__codelineno-59-40" name="__codelineno-59-40" href="#__codelineno-59-40"></a><span class="n">The</span> <span class="n">city</span> <span class="ow">is</span> <span class="n">making</span> <span class="n">big</span> <span class="n">changes</span> <span class="n">to</span> <span class="n">how</span> <span class="n">people</span> <span class="n">get</span> <span class="n">around</span><span class="o">.</span> <span class="n">They</span> <span class="n">want</span> <span class="n">to</span> <span class="n">make</span> <span class="n">the</span> <span class="n">buses</span> <span class="ow">and</span>
</span><span id="__span-59-41"><a id="__codelineno-59-41" name="__codelineno-59-41" href="#__codelineno-59-41"></a><span class="n">trains</span> <span class="n">work</span> <span class="n">better</span> <span class="ow">and</span> <span class="n">be</span> <span class="n">easier</span> <span class="k">for</span> <span class="n">everyone</span> <span class="n">to</span> <span class="n">use</span><span class="o">.</span> <span class="n">This</span> <span class="n">will</span> <span class="n">also</span> <span class="n">help</span> <span class="n">the</span> <span class="n">environment</span>
</span><span id="__span-59-42"><a id="__codelineno-59-42" name="__codelineno-59-42" href="#__codelineno-59-42"></a><span class="n">by</span> <span class="n">getting</span> <span class="n">people</span> <span class="n">to</span> <span class="n">use</span> <span class="n">less</span> <span class="n">gas</span><span class="o">.</span> <span class="n">The</span> <span class="n">city</span> <span class="n">thinks</span> <span class="n">these</span> <span class="n">changes</span> <span class="n">will</span> <span class="n">make</span> <span class="n">it</span> <span class="n">easier</span> <span class="k">for</span>
</span><span id="__span-59-43"><a id="__codelineno-59-43" name="__codelineno-59-43" href="#__codelineno-59-43"></a><span class="n">everyone</span> <span class="n">to</span> <span class="n">get</span> <span class="n">where</span> <span class="n">they</span> <span class="n">need</span> <span class="n">to</span> <span class="n">go</span><span class="o">.</span>
</span><span id="__span-59-44"><a id="__codelineno-59-44" name="__codelineno-59-44" href="#__codelineno-59-44"></a><span class="err">`</span>
</span><span id="__span-59-45"><a id="__codelineno-59-45" name="__codelineno-59-45" href="#__codelineno-59-45"></a>
</span><span id="__span-59-46"><a id="__codelineno-59-46" name="__codelineno-59-46" href="#__codelineno-59-46"></a> <span class="n">req</span> <span class="o">:=</span> <span class="n">aiplatformpb</span><span class="o">.</span><span class="n">EvaluateInstancesRequest</span><span class="p">{</span>
</span><span id="__span-59-47"><a id="__codelineno-59-47" name="__codelineno-59-47" href="#__codelineno-59-47"></a> <span class="n">Location</span><span class="p">:</span> <span class="n">fmt</span><span class="o">.</span><span class="n">Sprintf</span><span class="p">(</span><span class="s2">&quot;projects/</span><span class="si">%s</span><span class="s2">/locations/</span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">projectID</span><span class="p">,</span> <span class="n">location</span><span class="p">),</span>
</span><span id="__span-59-48"><a id="__codelineno-59-48" name="__codelineno-59-48" href="#__codelineno-59-48"></a> <span class="n">MetricInputs</span><span class="p">:</span> <span class="o">&amp;</span><span class="n">aiplatformpb</span><span class="o">.</span><span class="n">EvaluateInstancesRequest_PairwiseSummarizationQualityInput</span><span class="p">{</span>
</span><span id="__span-59-49"><a id="__codelineno-59-49" name="__codelineno-59-49" href="#__codelineno-59-49"></a> <span class="n">PairwiseSummarizationQualityInput</span><span class="p">:</span> <span class="o">&amp;</span><span class="n">aiplatformpb</span><span class="o">.</span><span class="n">PairwiseSummarizationQualityInput</span><span class="p">{</span>
</span><span id="__span-59-50"><a id="__codelineno-59-50" name="__codelineno-59-50" href="#__codelineno-59-50"></a> <span class="n">MetricSpec</span><span class="p">:</span> <span class="o">&amp;</span><span class="n">aiplatformpb</span><span class="o">.</span><span class="n">PairwiseSummarizationQualitySpec</span><span class="p">{},</span>
</span><span id="__span-59-51"><a id="__codelineno-59-51" name="__codelineno-59-51" href="#__codelineno-59-51"></a> <span class="n">Instance</span><span class="p">:</span> <span class="o">&amp;</span><span class="n">aiplatformpb</span><span class="o">.</span><span class="n">PairwiseSummarizationQualityInstance</span><span class="p">{</span>
</span><span id="__span-59-52"><a id="__codelineno-59-52" name="__codelineno-59-52" href="#__codelineno-59-52"></a> <span class="n">Context</span><span class="p">:</span> <span class="o">&amp;</span><span class="n">context</span><span class="p">,</span>
</span><span id="__span-59-53"><a id="__codelineno-59-53" name="__codelineno-59-53" href="#__codelineno-59-53"></a> <span class="n">Instruction</span><span class="p">:</span> <span class="o">&amp;</span><span class="n">instruction</span><span class="p">,</span>
</span><span id="__span-59-54"><a id="__codelineno-59-54" name="__codelineno-59-54" href="#__codelineno-59-54"></a> <span class="n">Prediction</span><span class="p">:</span> <span class="o">&amp;</span><span class="n">candidateResponse</span><span class="p">,</span>
</span><span id="__span-59-55"><a id="__codelineno-59-55" name="__codelineno-59-55" href="#__codelineno-59-55"></a> <span class="n">BaselinePrediction</span><span class="p">:</span> <span class="o">&amp;</span><span class="n">baselineResponse</span><span class="p">,</span>
</span><span id="__span-59-56"><a id="__codelineno-59-56" name="__codelineno-59-56" href="#__codelineno-59-56"></a> <span class="p">},</span>
</span><span id="__span-59-57"><a id="__codelineno-59-57" name="__codelineno-59-57" href="#__codelineno-59-57"></a> <span class="p">},</span>
</span><span id="__span-59-58"><a id="__codelineno-59-58" name="__codelineno-59-58" href="#__codelineno-59-58"></a> <span class="p">},</span>
</span><span id="__span-59-59"><a id="__codelineno-59-59" name="__codelineno-59-59" href="#__codelineno-59-59"></a> <span class="p">}</span>
</span><span id="__span-59-60"><a id="__codelineno-59-60" name="__codelineno-59-60" href="#__codelineno-59-60"></a>
</span><span id="__span-59-61"><a id="__codelineno-59-61" name="__codelineno-59-61" href="#__codelineno-59-61"></a> <span class="n">resp</span><span class="p">,</span> <span class="n">err</span> <span class="o">:=</span> <span class="n">client</span><span class="o">.</span><span class="n">EvaluateInstances</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">req</span><span class="p">)</span>
</span><span id="__span-59-62"><a id="__codelineno-59-62" name="__codelineno-59-62" href="#__codelineno-59-62"></a> <span class="k">if</span> <span class="n">err</span> <span class="o">!=</span> <span class="n">nil</span> <span class="p">{</span>
</span><span id="__span-59-63"><a id="__codelineno-59-63" name="__codelineno-59-63" href="#__codelineno-59-63"></a> <span class="k">return</span> <span class="n">fmt</span><span class="o">.</span><span class="n">Errorf</span><span class="p">(</span><span class="s2">&quot;evaluateInstances failed: %v&quot;</span><span class="p">,</span> <span class="n">err</span><span class="p">)</span>
</span><span id="__span-59-64"><a id="__codelineno-59-64" name="__codelineno-59-64" href="#__codelineno-59-64"></a> <span class="p">}</span>
</span><span id="__span-59-65"><a id="__codelineno-59-65" name="__codelineno-59-65" href="#__codelineno-59-65"></a>
</span><span id="__span-59-66"><a id="__codelineno-59-66" name="__codelineno-59-66" href="#__codelineno-59-66"></a> <span class="n">results</span> <span class="o">:=</span> <span class="n">resp</span><span class="o">.</span><span class="n">GetPairwiseSummarizationQualityResult</span><span class="p">()</span>
</span><span id="__span-59-67"><a id="__codelineno-59-67" name="__codelineno-59-67" href="#__codelineno-59-67"></a> <span class="n">fmt</span><span class="o">.</span><span class="n">Fprintf</span><span class="p">(</span><span class="n">w</span><span class="p">,</span> <span class="s2">&quot;choice: </span><span class="si">%s</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">results</span><span class="o">.</span><span class="n">GetPairwiseChoice</span><span class="p">())</span>
</span><span id="__span-59-68"><a id="__codelineno-59-68" name="__codelineno-59-68" href="#__codelineno-59-68"></a> <span class="n">fmt</span><span class="o">.</span><span class="n">Fprintf</span><span class="p">(</span><span class="n">w</span><span class="p">,</span> <span class="s2">&quot;confidence: </span><span class="si">%.2f</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">results</span><span class="o">.</span><span class="n">GetConfidence</span><span class="p">())</span>
</span><span id="__span-59-69"><a id="__codelineno-59-69" name="__codelineno-59-69" href="#__codelineno-59-69"></a> <span class="n">fmt</span><span class="o">.</span><span class="n">Fprintf</span><span class="p">(</span><span class="n">w</span><span class="p">,</span> <span class="s2">&quot;explanation:</span><span class="se">\n</span><span class="si">%s</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">results</span><span class="o">.</span><span class="n">GetExplanation</span><span class="p">())</span>
</span><span id="__span-59-70"><a id="__codelineno-59-70" name="__codelineno-59-70" href="#__codelineno-59-70"></a> <span class="o">//</span> <span class="n">Example</span> <span class="n">response</span><span class="p">:</span>
</span><span id="__span-59-71"><a id="__codelineno-59-71" name="__codelineno-59-71" href="#__codelineno-59-71"></a> <span class="o">//</span> <span class="n">choice</span><span class="p">:</span> <span class="n">BASELINE</span>
</span><span id="__span-59-72"><a id="__codelineno-59-72" name="__codelineno-59-72" href="#__codelineno-59-72"></a> <span class="o">//</span> <span class="n">confidence</span><span class="p">:</span> <span class="mf">0.50</span>
</span><span id="__span-59-73"><a id="__codelineno-59-73" name="__codelineno-59-73" href="#__codelineno-59-73"></a> <span class="o">//</span> <span class="n">explanation</span><span class="p">:</span>
</span><span id="__span-59-74"><a id="__codelineno-59-74" name="__codelineno-59-74" href="#__codelineno-59-74"></a> <span class="o">//</span> <span class="n">BASELINE</span> <span class="n">response</span> <span class="ow">is</span> <span class="n">easier</span> <span class="n">to</span> <span class="n">understand</span><span class="o">.</span> <span class="n">For</span> <span class="n">example</span><span class="p">,</span> <span class="n">the</span> <span class="n">phrase</span> <span class="s2">&quot;...&quot;</span> <span class="ow">is</span> <span class="n">easier</span> <span class="n">to</span> <span class="n">understand</span> <span class="n">than</span> <span class="s2">&quot;...&quot;</span><span class="o">.</span> <span class="n">Thus</span><span class="p">,</span> <span class="n">BASELINE</span> <span class="n">response</span> <span class="ow">is</span> <span class="o">...</span>
</span><span id="__span-59-75"><a id="__codelineno-59-75" name="__codelineno-59-75" href="#__codelineno-59-75"></a>
</span><span id="__span-59-76"><a id="__codelineno-59-76" name="__codelineno-59-76" href="#__codelineno-59-76"></a> <span class="k">return</span> <span class="n">nil</span>
</span><span id="__span-59-77"><a id="__codelineno-59-77" name="__codelineno-59-77" href="#__codelineno-59-77"></a><span class="p">}</span>
</span></code></pre></div>
<h2 id="get-rouge-score">Get ROUGE score<a class="headerlink" href="#get-rouge-score" title="Permanent link">&para;</a></h2>
<p>The following example calls the Gen AI evaluation service API to get the ROUGE score
of a prediction, generated by a number of inputs. The ROUGE inputs use
<code>metric_spec</code>, which determines the metric's behavior.</p>
<h3 id="rest_1">REST<a class="headerlink" href="#rest_1" title="Permanent link">&para;</a></h3>
<p>Before using any of the request data,
make the following replacements:</p>
<ul>
<li>PROJECT_ID: Your <a href="https://cloud.google.com/resource-manager/docs/creating-managing-projects#identifiers">project ID</a>.</li>
<li>LOCATION: The region to process the request.</li>
<li>PREDICTION: LLM response.</li>
<li>REFERENCE: Golden LLM response for reference.</li>
<li>ROUGE_TYPE: The calculation used to determine the rouge score. See <a href="https://cloud.google.com/vertex-ai/generative-ai/docs/model-reference/evaluation#rougeinput"><code>metric_spec.rouge_type</code></a> for acceptable values.</li>
<li>USE_STEMMER: Determines whether the Porter stemmer is used to strip word suffixes to improve matching. For acceptable values, see <a href="https://cloud.google.com/vertex-ai/generative-ai/docs/model-reference/evaluation#rougeinput"><code>metric_spec.use_stemmer</code></a>.</li>
<li>SPLIT_SUMMARIES: Determines if new lines are added between <code>rougeLsum</code> sentences. For acceptable values, see <a href="https://cloud.google.com/vertex-ai/generative-ai/docs/model-reference/evaluation#rougeinput"><code>metric_spec.split_summaries</code></a> .</li>
</ul>
<p>HTTP method and URL:</p>
<div class="language-python highlight"><pre><span></span><code><span id="__span-60-1"><a id="__codelineno-60-1" name="__codelineno-60-1" href="#__codelineno-60-1"></a><span class="n">POST</span> <span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">LOCATION</span><span class="o">-</span><span class="n">aiplatform</span><span class="o">.</span><span class="n">googleapis</span><span class="o">.</span><span class="n">com</span><span class="o">/</span><span class="n">v1beta1</span><span class="o">/</span><span class="n">projects</span><span class="o">/</span><span class="n">PROJECT_ID</span><span class="o">-/</span><span class="n">locations</span><span class="o">/</span><span class="n">REGION</span><span class="p">:</span><span class="n">evaluateInstances</span> \
</span></code></pre></div>
<p>Request JSON body:</p>
<div class="language-python highlight"><pre><span></span><code><span id="__span-61-1"><a id="__codelineno-61-1" name="__codelineno-61-1" href="#__codelineno-61-1"></a><span class="p">{</span>
</span><span id="__span-61-2"><a id="__codelineno-61-2" name="__codelineno-61-2" href="#__codelineno-61-2"></a> <span class="s2">&quot;rouge_input&quot;</span><span class="p">:</span> <span class="p">{</span>
</span><span id="__span-61-3"><a id="__codelineno-61-3" name="__codelineno-61-3" href="#__codelineno-61-3"></a> <span class="s2">&quot;instances&quot;</span><span class="p">:</span> <span class="p">{</span>
</span><span id="__span-61-4"><a id="__codelineno-61-4" name="__codelineno-61-4" href="#__codelineno-61-4"></a> <span class="s2">&quot;prediction&quot;</span><span class="p">:</span> <span class="s2">&quot;PREDICTION&quot;</span><span class="p">,</span>
</span><span id="__span-61-5"><a id="__codelineno-61-5" name="__codelineno-61-5" href="#__codelineno-61-5"></a> <span class="s2">&quot;reference&quot;</span><span class="p">:</span> <span class="s2">&quot;REFERENCE.&quot;</span><span class="p">,</span>
</span><span id="__span-61-6"><a id="__codelineno-61-6" name="__codelineno-61-6" href="#__codelineno-61-6"></a> <span class="p">},</span>
</span><span id="__span-61-7"><a id="__codelineno-61-7" name="__codelineno-61-7" href="#__codelineno-61-7"></a> <span class="s2">&quot;metric_spec&quot;</span><span class="p">:</span> <span class="p">{</span>
</span><span id="__span-61-8"><a id="__codelineno-61-8" name="__codelineno-61-8" href="#__codelineno-61-8"></a> <span class="s2">&quot;rouge_type&quot;</span><span class="p">:</span> <span class="s2">&quot;ROUGE_TYPE&quot;</span><span class="p">,</span>
</span><span id="__span-61-9"><a id="__codelineno-61-9" name="__codelineno-61-9" href="#__codelineno-61-9"></a> <span class="s2">&quot;use_stemmer&quot;</span><span class="p">:</span> <span class="n">USE_STEMMER</span><span class="p">,</span>
</span><span id="__span-61-10"><a id="__codelineno-61-10" name="__codelineno-61-10" href="#__codelineno-61-10"></a> <span class="s2">&quot;split_summaries&quot;</span><span class="p">:</span> <span class="n">SPLIT_SUMMARIES</span><span class="p">,</span>
</span><span id="__span-61-11"><a id="__codelineno-61-11" name="__codelineno-61-11" href="#__codelineno-61-11"></a> <span class="p">}</span>
</span><span id="__span-61-12"><a id="__codelineno-61-12" name="__codelineno-61-12" href="#__codelineno-61-12"></a> <span class="p">}</span>
</span><span id="__span-61-13"><a id="__codelineno-61-13" name="__codelineno-61-13" href="#__codelineno-61-13"></a><span class="p">}</span>
</span></code></pre></div>
<p>To send your request, choose one of these options:</p>
<h4 id="curl_2">curl<a class="headerlink" href="#curl_2" title="Permanent link">&para;</a></h4>
<p><strong>Note:</strong>
The following command assumes that you have logged in to
the <code>gcloud</code> CLI with your user account by running
<a href="https://cloud.google.com/sdk/gcloud/reference/init"><code>gcloud init</code></a>
or
<a href="https://cloud.google.com/sdk/gcloud/reference/auth/login"><code>gcloud auth login</code></a>
, or by using <a href="https://cloud.google.com/shell/docs">Cloud Shell</a>,
which automatically logs you into the <code>gcloud</code> CLI
.
You can check the currently active account by running
<a href="https://cloud.google.com/sdk/gcloud/reference/auth/list"><code>gcloud auth list</code></a>.</p>
<p>Save the request body in a file named <code>request.json</code>,
and execute the following command:</p>
<div class="language-python highlight"><pre><span></span><code><span id="__span-62-1"><a id="__codelineno-62-1" name="__codelineno-62-1" href="#__codelineno-62-1"></a><span class="n">curl</span> <span class="o">-</span><span class="n">X</span> <span class="n">POST</span> \ 
</span><span id="__span-62-2"><a id="__codelineno-62-2" name="__codelineno-62-2" href="#__codelineno-62-2"></a> <span class="o">-</span><span class="n">H</span> <span class="s2">&quot;Authorization: Bearer $(gcloud auth print-access-token)&quot;</span> \ 
</span><span id="__span-62-3"><a id="__codelineno-62-3" name="__codelineno-62-3" href="#__codelineno-62-3"></a> <span class="o">-</span><span class="n">H</span> <span class="s2">&quot;Content-Type: application/json; charset=utf-8&quot;</span> \ 
</span><span id="__span-62-4"><a id="__codelineno-62-4" name="__codelineno-62-4" href="#__codelineno-62-4"></a> <span class="o">-</span><span class="n">d</span> <span class="nd">@request</span><span class="o">.</span><span class="n">json</span> \ 
</span><span id="__span-62-5"><a id="__codelineno-62-5" name="__codelineno-62-5" href="#__codelineno-62-5"></a> <span class="s2">&quot;https://LOCATION-aiplatform.googleapis.com/v1beta1/projects/PROJECT_ID-/locations/REGION:evaluateInstances </span><span class="se">\&quot;</span>
</span></code></pre></div>
<h4 id="powershell_1">PowerShell<a class="headerlink" href="#powershell_1" title="Permanent link">&para;</a></h4>
<p><strong>Note:</strong>
The following command assumes that you have logged in to
the <code>gcloud</code> CLI with your user account by running
<a href="https://cloud.google.com/sdk/gcloud/reference/init"><code>gcloud init</code></a>
or
<a href="https://cloud.google.com/sdk/gcloud/reference/auth/login"><code>gcloud auth login</code></a>
.
You can check the currently active account by running
<a href="https://cloud.google.com/sdk/gcloud/reference/auth/list"><code>gcloud auth list</code></a>.</p>
<p>Save the request body in a file named <code>request.json</code>,
and execute the following command:</p>
<div class="language-python highlight"><pre><span></span><code><span id="__span-63-1"><a id="__codelineno-63-1" name="__codelineno-63-1" href="#__codelineno-63-1"></a><span class="err">$</span><span class="n">cred</span> <span class="o">=</span> <span class="n">gcloud</span> <span class="n">auth</span> <span class="nb">print</span><span class="o">-</span><span class="n">access</span><span class="o">-</span><span class="n">token</span> 
</span><span id="__span-63-2"><a id="__codelineno-63-2" name="__codelineno-63-2" href="#__codelineno-63-2"></a><span class="err">$</span><span class="n">headers</span> <span class="o">=</span> <span class="o">@</span><span class="p">{</span> <span class="s2">&quot;Authorization&quot;</span> <span class="o">=</span> <span class="s2">&quot;Bearer $cred&quot;</span> <span class="p">}</span> 
</span><span id="__span-63-3"><a id="__codelineno-63-3" name="__codelineno-63-3" href="#__codelineno-63-3"></a>
</span><span id="__span-63-4"><a id="__codelineno-63-4" name="__codelineno-63-4" href="#__codelineno-63-4"></a><span class="n">Invoke</span><span class="o">-</span><span class="n">WebRequest</span> <span class="err">`</span> 
</span><span id="__span-63-5"><a id="__codelineno-63-5" name="__codelineno-63-5" href="#__codelineno-63-5"></a> <span class="o">-</span><span class="n">Method</span> <span class="n">POST</span> <span class="err">`</span> 
</span><span id="__span-63-6"><a id="__codelineno-63-6" name="__codelineno-63-6" href="#__codelineno-63-6"></a> <span class="o">-</span><span class="n">Headers</span> <span class="err">$</span><span class="n">headers</span> <span class="err">`</span> 
</span><span id="__span-63-7"><a id="__codelineno-63-7" name="__codelineno-63-7" href="#__codelineno-63-7"></a> <span class="o">-</span><span class="n">ContentType</span><span class="p">:</span> <span class="s2">&quot;application/json; charset=utf-8&quot;</span> <span class="err">`</span> 
</span><span id="__span-63-8"><a id="__codelineno-63-8" name="__codelineno-63-8" href="#__codelineno-63-8"></a> <span class="o">-</span><span class="n">InFile</span> <span class="n">request</span><span class="o">.</span><span class="n">json</span> <span class="err">`</span> 
</span><span id="__span-63-9"><a id="__codelineno-63-9" name="__codelineno-63-9" href="#__codelineno-63-9"></a> <span class="o">-</span><span class="n">Uri</span> <span class="s2">&quot;https://LOCATION-aiplatform.googleapis.com/v1beta1/projects/PROJECT_ID-/locations/REGION:evaluateInstances </span><span class="se">\&quot;</span><span class="s2"> | Select-Object -Expand Content</span>
</span></code></pre></div>
<h3 id="python_3">Python<a class="headerlink" href="#python_3" title="Permanent link">&para;</a></h3>
<h3 id="vertex-ai-sdk-for-python_1">Vertex AI SDK for Python<a class="headerlink" href="#vertex-ai-sdk-for-python_1" title="Permanent link">&para;</a></h3>
<p>To learn how to install or update the Vertex AI SDK for Python, see <a href="https://cloud.google.com/vertex-ai/docs/start/use-vertex-ai-python-sdk">Install the Vertex AI SDK for Python</a>.
For more information, see the
<a href="https://cloud.google.com/python/docs/reference/aiplatform/latest">Vertex AI SDK for Python API reference documentation</a>.</p>
<div class="language-python highlight"><pre><span></span><code><span id="__span-64-1"><a id="__codelineno-64-1" name="__codelineno-64-1" href="#__codelineno-64-1"></a><span class="kn">import</span><span class="w"> </span><span class="nn">pandas</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">pd</span>
</span><span id="__span-64-2"><a id="__codelineno-64-2" name="__codelineno-64-2" href="#__codelineno-64-2"></a>
</span><span id="__span-64-3"><a id="__codelineno-64-3" name="__codelineno-64-3" href="#__codelineno-64-3"></a><span class="kn">import</span><span class="w"> </span><span class="nn">vertexai</span>
</span><span id="__span-64-4"><a id="__codelineno-64-4" name="__codelineno-64-4" href="#__codelineno-64-4"></a><span class="kn">from</span><span class="w"> </span><span class="nn">vertexai.preview.evaluation</span><span class="w"> </span><span class="kn">import</span> <span class="n">EvalTask</span>
</span><span id="__span-64-5"><a id="__codelineno-64-5" name="__codelineno-64-5" href="#__codelineno-64-5"></a>
</span><span id="__span-64-6"><a id="__codelineno-64-6" name="__codelineno-64-6" href="#__codelineno-64-6"></a><span class="c1"># TODO(developer): Update &amp; uncomment line below</span>
</span><span id="__span-64-7"><a id="__codelineno-64-7" name="__codelineno-64-7" href="#__codelineno-64-7"></a><span class="c1"># PROJECT_ID = &quot;your-project-id&quot;</span>
</span><span id="__span-64-8"><a id="__codelineno-64-8" name="__codelineno-64-8" href="#__codelineno-64-8"></a><span class="n">vertexai</span><span class="o">.</span><span class="n">init</span><span class="p">(</span><span class="n">project</span><span class="o">=</span><span class="n">PROJECT_ID</span><span class="p">,</span> <span class="n">location</span><span class="o">=</span><span class="s2">&quot;us-central1&quot;</span><span class="p">)</span>
</span><span id="__span-64-9"><a id="__codelineno-64-9" name="__codelineno-64-9" href="#__codelineno-64-9"></a>
</span><span id="__span-64-10"><a id="__codelineno-64-10" name="__codelineno-64-10" href="#__codelineno-64-10"></a><span class="n">reference_summarization</span> <span class="o">=</span> <span class="s2">&quot;&quot;&quot;</span>
</span><span id="__span-64-11"><a id="__codelineno-64-11" name="__codelineno-64-11" href="#__codelineno-64-11"></a><span class="s2">The Great Barrier Reef, the world&#39;s largest coral reef system, is</span>
</span><span id="__span-64-12"><a id="__codelineno-64-12" name="__codelineno-64-12" href="#__codelineno-64-12"></a><span class="s2">located off the coast of Queensland, Australia. It&#39;s a vast</span>
</span><span id="__span-64-13"><a id="__codelineno-64-13" name="__codelineno-64-13" href="#__codelineno-64-13"></a><span class="s2">ecosystem spanning over 2,300 kilometers with thousands of reefs</span>
</span><span id="__span-64-14"><a id="__codelineno-64-14" name="__codelineno-64-14" href="#__codelineno-64-14"></a><span class="s2">and islands. While it harbors an incredible diversity of marine</span>
</span><span id="__span-64-15"><a id="__codelineno-64-15" name="__codelineno-64-15" href="#__codelineno-64-15"></a><span class="s2">life, including endangered species, it faces serious threats from</span>
</span><span id="__span-64-16"><a id="__codelineno-64-16" name="__codelineno-64-16" href="#__codelineno-64-16"></a><span class="s2">climate change, ocean acidification, and coral bleaching.&quot;&quot;&quot;</span>
</span><span id="__span-64-17"><a id="__codelineno-64-17" name="__codelineno-64-17" href="#__codelineno-64-17"></a>
</span><span id="__span-64-18"><a id="__codelineno-64-18" name="__codelineno-64-18" href="#__codelineno-64-18"></a><span class="c1"># Compare pre-generated model responses against the reference (ground truth).</span>
</span><span id="__span-64-19"><a id="__codelineno-64-19" name="__codelineno-64-19" href="#__codelineno-64-19"></a><span class="n">eval_dataset</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span>
</span><span id="__span-64-20"><a id="__codelineno-64-20" name="__codelineno-64-20" href="#__codelineno-64-20"></a> <span class="p">{</span>
</span><span id="__span-64-21"><a id="__codelineno-64-21" name="__codelineno-64-21" href="#__codelineno-64-21"></a> <span class="s2">&quot;response&quot;</span><span class="p">:</span> <span class="p">[</span>
</span><span id="__span-64-22"><a id="__codelineno-64-22" name="__codelineno-64-22" href="#__codelineno-64-22"></a><span class="w"> </span><span class="sd">&quot;&quot;&quot;The Great Barrier Reef, the world&#39;s largest coral reef system located</span>
</span><span id="__span-64-23"><a id="__codelineno-64-23" name="__codelineno-64-23" href="#__codelineno-64-23"></a><span class="sd"> in Australia, is a vast and diverse ecosystem. However, it faces serious</span>
</span><span id="__span-64-24"><a id="__codelineno-64-24" name="__codelineno-64-24" href="#__codelineno-64-24"></a><span class="sd"> threats from climate change, ocean acidification, and coral bleaching,</span>
</span><span id="__span-64-25"><a id="__codelineno-64-25" name="__codelineno-64-25" href="#__codelineno-64-25"></a><span class="sd"> endangering its rich marine life.&quot;&quot;&quot;</span><span class="p">,</span>
</span><span id="__span-64-26"><a id="__codelineno-64-26" name="__codelineno-64-26" href="#__codelineno-64-26"></a><span class="w"> </span><span class="sd">&quot;&quot;&quot;The Great Barrier Reef, a vast coral reef system off the coast of</span>
</span><span id="__span-64-27"><a id="__codelineno-64-27" name="__codelineno-64-27" href="#__codelineno-64-27"></a><span class="sd"> Queensland, Australia, is the world&#39;s largest. It&#39;s a complex ecosystem</span>
</span><span id="__span-64-28"><a id="__codelineno-64-28" name="__codelineno-64-28" href="#__codelineno-64-28"></a><span class="sd"> supporting diverse marine life, including endangered species. However,</span>
</span><span id="__span-64-29"><a id="__codelineno-64-29" name="__codelineno-64-29" href="#__codelineno-64-29"></a><span class="sd"> climate change, ocean acidification, and coral bleaching are serious</span>
</span><span id="__span-64-30"><a id="__codelineno-64-30" name="__codelineno-64-30" href="#__codelineno-64-30"></a><span class="sd"> threats to its survival.&quot;&quot;&quot;</span><span class="p">,</span>
</span><span id="__span-64-31"><a id="__codelineno-64-31" name="__codelineno-64-31" href="#__codelineno-64-31"></a><span class="w"> </span><span class="sd">&quot;&quot;&quot;The Great Barrier Reef, the world&#39;s largest coral reef system off the</span>
</span><span id="__span-64-32"><a id="__codelineno-64-32" name="__codelineno-64-32" href="#__codelineno-64-32"></a><span class="sd"> coast of Australia, is a vast and diverse ecosystem with thousands of</span>
</span><span id="__span-64-33"><a id="__codelineno-64-33" name="__codelineno-64-33" href="#__codelineno-64-33"></a><span class="sd"> reefs and islands. It is home to a multitude of marine life, including</span>
</span><span id="__span-64-34"><a id="__codelineno-64-34" name="__codelineno-64-34" href="#__codelineno-64-34"></a><span class="sd"> endangered species, but faces serious threats from climate change, ocean</span>
</span><span id="__span-64-35"><a id="__codelineno-64-35" name="__codelineno-64-35" href="#__codelineno-64-35"></a><span class="sd"> acidification, and coral bleaching.&quot;&quot;&quot;</span><span class="p">,</span>
</span><span id="__span-64-36"><a id="__codelineno-64-36" name="__codelineno-64-36" href="#__codelineno-64-36"></a> <span class="p">],</span>
</span><span id="__span-64-37"><a id="__codelineno-64-37" name="__codelineno-64-37" href="#__codelineno-64-37"></a> <span class="s2">&quot;reference&quot;</span><span class="p">:</span> <span class="p">[</span><span class="n">reference_summarization</span><span class="p">]</span> <span class="o">*</span> <span class="mi">3</span><span class="p">,</span>
</span><span id="__span-64-38"><a id="__codelineno-64-38" name="__codelineno-64-38" href="#__codelineno-64-38"></a> <span class="p">}</span>
</span><span id="__span-64-39"><a id="__codelineno-64-39" name="__codelineno-64-39" href="#__codelineno-64-39"></a><span class="p">)</span>
</span><span id="__span-64-40"><a id="__codelineno-64-40" name="__codelineno-64-40" href="#__codelineno-64-40"></a><span class="n">eval_task</span> <span class="o">=</span> <span class="n">EvalTask</span><span class="p">(</span>
</span><span id="__span-64-41"><a id="__codelineno-64-41" name="__codelineno-64-41" href="#__codelineno-64-41"></a> <span class="n">dataset</span><span class="o">=</span><span class="n">eval_dataset</span><span class="p">,</span>
</span><span id="__span-64-42"><a id="__codelineno-64-42" name="__codelineno-64-42" href="#__codelineno-64-42"></a> <span class="n">metrics</span><span class="o">=</span><span class="p">[</span>
</span><span id="__span-64-43"><a id="__codelineno-64-43" name="__codelineno-64-43" href="#__codelineno-64-43"></a> <span class="s2">&quot;rouge_1&quot;</span><span class="p">,</span>
</span><span id="__span-64-44"><a id="__codelineno-64-44" name="__codelineno-64-44" href="#__codelineno-64-44"></a> <span class="s2">&quot;rouge_2&quot;</span><span class="p">,</span>
</span><span id="__span-64-45"><a id="__codelineno-64-45" name="__codelineno-64-45" href="#__codelineno-64-45"></a> <span class="s2">&quot;rouge_l&quot;</span><span class="p">,</span>
</span><span id="__span-64-46"><a id="__codelineno-64-46" name="__codelineno-64-46" href="#__codelineno-64-46"></a> <span class="s2">&quot;rouge_l_sum&quot;</span><span class="p">,</span>
</span><span id="__span-64-47"><a id="__codelineno-64-47" name="__codelineno-64-47" href="#__codelineno-64-47"></a> <span class="p">],</span>
</span><span id="__span-64-48"><a id="__codelineno-64-48" name="__codelineno-64-48" href="#__codelineno-64-48"></a><span class="p">)</span>
</span><span id="__span-64-49"><a id="__codelineno-64-49" name="__codelineno-64-49" href="#__codelineno-64-49"></a><span class="n">result</span> <span class="o">=</span> <span class="n">eval_task</span><span class="o">.</span><span class="n">evaluate</span><span class="p">()</span>
</span><span id="__span-64-50"><a id="__codelineno-64-50" name="__codelineno-64-50" href="#__codelineno-64-50"></a>
</span><span id="__span-64-51"><a id="__codelineno-64-51" name="__codelineno-64-51" href="#__codelineno-64-51"></a><span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Summary Metrics:</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)</span>
</span><span id="__span-64-52"><a id="__codelineno-64-52" name="__codelineno-64-52" href="#__codelineno-64-52"></a><span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">result</span><span class="o">.</span><span class="n">summary_metrics</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
</span><span id="__span-64-53"><a id="__codelineno-64-53" name="__codelineno-64-53" href="#__codelineno-64-53"></a> <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">key</span><span class="si">}</span><span class="s2">: </span><span class="se">\t</span><span class="si">{</span><span class="n">value</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</span><span id="__span-64-54"><a id="__codelineno-64-54" name="__codelineno-64-54" href="#__codelineno-64-54"></a>
</span><span id="__span-64-55"><a id="__codelineno-64-55" name="__codelineno-64-55" href="#__codelineno-64-55"></a><span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n\n</span><span class="s2">Metrics Table:</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)</span>
</span><span id="__span-64-56"><a id="__codelineno-64-56" name="__codelineno-64-56" href="#__codelineno-64-56"></a><span class="nb">print</span><span class="p">(</span><span class="n">result</span><span class="o">.</span><span class="n">metrics_table</span><span class="p">)</span>
</span><span id="__span-64-57"><a id="__codelineno-64-57" name="__codelineno-64-57" href="#__codelineno-64-57"></a><span class="c1"># Example response:</span>
</span><span id="__span-64-58"><a id="__codelineno-64-58" name="__codelineno-64-58" href="#__codelineno-64-58"></a><span class="c1">#</span>
</span><span id="__span-64-59"><a id="__codelineno-64-59" name="__codelineno-64-59" href="#__codelineno-64-59"></a><span class="c1"># Summary Metrics:</span>
</span><span id="__span-64-60"><a id="__codelineno-64-60" name="__codelineno-64-60" href="#__codelineno-64-60"></a><span class="c1">#</span>
</span><span id="__span-64-61"><a id="__codelineno-64-61" name="__codelineno-64-61" href="#__codelineno-64-61"></a><span class="c1"># row_count: 3</span>
</span><span id="__span-64-62"><a id="__codelineno-64-62" name="__codelineno-64-62" href="#__codelineno-64-62"></a><span class="c1"># rouge_1/mean: 0.7191161666666667</span>
</span><span id="__span-64-63"><a id="__codelineno-64-63" name="__codelineno-64-63" href="#__codelineno-64-63"></a><span class="c1"># rouge_1/std: 0.06765143922270488</span>
</span><span id="__span-64-64"><a id="__codelineno-64-64" name="__codelineno-64-64" href="#__codelineno-64-64"></a><span class="c1"># rouge_2/mean: 0.5441118566666666</span>
</span><span id="__span-64-65"><a id="__codelineno-64-65" name="__codelineno-64-65" href="#__codelineno-64-65"></a><span class="c1"># ...</span>
</span><span id="__span-64-66"><a id="__codelineno-64-66" name="__codelineno-64-66" href="#__codelineno-64-66"></a><span class="c1"># Metrics Table:</span>
</span><span id="__span-64-67"><a id="__codelineno-64-67" name="__codelineno-64-67" href="#__codelineno-64-67"></a><span class="c1">#</span>
</span><span id="__span-64-68"><a id="__codelineno-64-68" name="__codelineno-64-68" href="#__codelineno-64-68"></a><span class="c1"># response reference ... rouge_l/score rouge_l_sum/score</span>
</span><span id="__span-64-69"><a id="__codelineno-64-69" name="__codelineno-64-69" href="#__codelineno-64-69"></a><span class="c1"># 0 The Great Barrier Reef, the world&#39;s ... \n The Great Barrier Reef, the ... ... 0.577320 0.639175</span>
</span><span id="__span-64-70"><a id="__codelineno-64-70" name="__codelineno-64-70" href="#__codelineno-64-70"></a><span class="c1"># 1 The Great Barrier Reef, a vast coral... \n The Great Barrier Reef, the ... ... 0.552381 0.666667</span>
</span><span id="__span-64-71"><a id="__codelineno-64-71" name="__codelineno-64-71" href="#__codelineno-64-71"></a><span class="c1"># 2 The Great Barrier Reef, the world&#39;s ... \n The Great Barrier Reef, the ... ... 0.774775 0.774775</span>
</span></code></pre></div>
<h3 id="go_3">Go<a class="headerlink" href="#go_3" title="Permanent link">&para;</a></h3>
<h3 id="go_4">Go<a class="headerlink" href="#go_4" title="Permanent link">&para;</a></h3>
<p>Before trying this sample, follow the Go setup instructions in the
<a href="https://cloud.google.com/vertex-ai/docs/start/client-libraries">Vertex AI quickstart using
client libraries</a>.
For more information, see the
<a href="/go/docs/reference/cloud.google.com/go/aiplatform/latest/apiv1">Vertex AI Go API
reference documentation</a>.</p>
<p>To authenticate to Vertex AI, set up Application Default Credentials.
For more information, see
<a href="https://cloud.google.com/docs/authentication/set-up-adc-local-dev-environment">Set up authentication for a local development environment</a>.</p>
<div class="language-python highlight"><pre><span></span><code><span id="__span-65-1"><a id="__codelineno-65-1" name="__codelineno-65-1" href="#__codelineno-65-1"></a><span class="kn">import</span><span class="w"> </span><span class="p">(</span>
</span><span id="__span-65-2"><a id="__codelineno-65-2" name="__codelineno-65-2" href="#__codelineno-65-2"></a> <span class="s2">&quot;context&quot;</span>
</span><span id="__span-65-3"><a id="__codelineno-65-3" name="__codelineno-65-3" href="#__codelineno-65-3"></a> <span class="s2">&quot;fmt&quot;</span>
</span><span id="__span-65-4"><a id="__codelineno-65-4" name="__codelineno-65-4" href="#__codelineno-65-4"></a> <span class="s2">&quot;io&quot;</span>
</span><span id="__span-65-5"><a id="__codelineno-65-5" name="__codelineno-65-5" href="#__codelineno-65-5"></a>
</span><span id="__span-65-6"><a id="__codelineno-65-6" name="__codelineno-65-6" href="#__codelineno-65-6"></a> <span class="n">aiplatform</span> <span class="s2">&quot;cloud.google.com/go/aiplatform/apiv1beta1&quot;</span>
</span><span id="__span-65-7"><a id="__codelineno-65-7" name="__codelineno-65-7" href="#__codelineno-65-7"></a> <span class="n">aiplatformpb</span> <span class="s2">&quot;cloud.google.com/go/aiplatform/apiv1beta1/aiplatformpb&quot;</span>
</span><span id="__span-65-8"><a id="__codelineno-65-8" name="__codelineno-65-8" href="#__codelineno-65-8"></a> <span class="s2">&quot;google.golang.org/api/option&quot;</span>
</span><span id="__span-65-9"><a id="__codelineno-65-9" name="__codelineno-65-9" href="#__codelineno-65-9"></a><span class="p">)</span>
</span><span id="__span-65-10"><a id="__codelineno-65-10" name="__codelineno-65-10" href="#__codelineno-65-10"></a>
</span><span id="__span-65-11"><a id="__codelineno-65-11" name="__codelineno-65-11" href="#__codelineno-65-11"></a><span class="o">//</span> <span class="n">getROUGEScore</span> <span class="n">evaluates</span> <span class="n">a</span> <span class="n">model</span> <span class="n">response</span> <span class="n">against</span> <span class="n">a</span> <span class="n">reference</span> <span class="p">(</span><span class="n">ground</span> <span class="n">truth</span><span class="p">)</span> <span class="n">using</span> <span class="n">the</span> <span class="n">ROUGE</span> <span class="n">metric</span>
</span><span id="__span-65-12"><a id="__codelineno-65-12" name="__codelineno-65-12" href="#__codelineno-65-12"></a><span class="n">func</span> <span class="n">getROUGEScore</span><span class="p">(</span><span class="n">w</span> <span class="n">io</span><span class="o">.</span><span class="n">Writer</span><span class="p">,</span> <span class="n">projectID</span><span class="p">,</span> <span class="n">location</span> <span class="n">string</span><span class="p">)</span> <span class="n">error</span> <span class="p">{</span>
</span><span id="__span-65-13"><a id="__codelineno-65-13" name="__codelineno-65-13" href="#__codelineno-65-13"></a> <span class="o">//</span> <span class="n">location</span> <span class="o">=</span> <span class="s2">&quot;us-central1&quot;</span>
</span><span id="__span-65-14"><a id="__codelineno-65-14" name="__codelineno-65-14" href="#__codelineno-65-14"></a> <span class="n">ctx</span> <span class="o">:=</span> <span class="n">context</span><span class="o">.</span><span class="n">Background</span><span class="p">()</span>
</span><span id="__span-65-15"><a id="__codelineno-65-15" name="__codelineno-65-15" href="#__codelineno-65-15"></a> <span class="n">apiEndpoint</span> <span class="o">:=</span> <span class="n">fmt</span><span class="o">.</span><span class="n">Sprintf</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">%s</span><span class="s2">-aiplatform.googleapis.com:443&quot;</span><span class="p">,</span> <span class="n">location</span><span class="p">)</span>
</span><span id="__span-65-16"><a id="__codelineno-65-16" name="__codelineno-65-16" href="#__codelineno-65-16"></a> <span class="n">client</span><span class="p">,</span> <span class="n">err</span> <span class="o">:=</span> <span class="n">aiplatform</span><span class="o">.</span><span class="n">NewEvaluationClient</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="n">option</span><span class="o">.</span><span class="n">WithEndpoint</span><span class="p">(</span><span class="n">apiEndpoint</span><span class="p">))</span>
</span><span id="__span-65-17"><a id="__codelineno-65-17" name="__codelineno-65-17" href="#__codelineno-65-17"></a>
</span><span id="__span-65-18"><a id="__codelineno-65-18" name="__codelineno-65-18" href="#__codelineno-65-18"></a> <span class="k">if</span> <span class="n">err</span> <span class="o">!=</span> <span class="n">nil</span> <span class="p">{</span>
</span><span id="__span-65-19"><a id="__codelineno-65-19" name="__codelineno-65-19" href="#__codelineno-65-19"></a> <span class="k">return</span> <span class="n">fmt</span><span class="o">.</span><span class="n">Errorf</span><span class="p">(</span><span class="s2">&quot;unable to create aiplatform client: %w&quot;</span><span class="p">,</span> <span class="n">err</span><span class="p">)</span>
</span><span id="__span-65-20"><a id="__codelineno-65-20" name="__codelineno-65-20" href="#__codelineno-65-20"></a> <span class="p">}</span>
</span><span id="__span-65-21"><a id="__codelineno-65-21" name="__codelineno-65-21" href="#__codelineno-65-21"></a> <span class="n">defer</span> <span class="n">client</span><span class="o">.</span><span class="n">Close</span><span class="p">()</span>
</span><span id="__span-65-22"><a id="__codelineno-65-22" name="__codelineno-65-22" href="#__codelineno-65-22"></a>
</span><span id="__span-65-23"><a id="__codelineno-65-23" name="__codelineno-65-23" href="#__codelineno-65-23"></a> <span class="n">modelResponse</span> <span class="o">:=</span> <span class="err">`</span>
</span><span id="__span-65-24"><a id="__codelineno-65-24" name="__codelineno-65-24" href="#__codelineno-65-24"></a><span class="n">The</span> <span class="n">Great</span> <span class="n">Barrier</span> <span class="n">Reef</span><span class="p">,</span> <span class="n">the</span> <span class="n">world</span><span class="s1">&#39;s largest coral reef system located in Australia,</span>
</span><span id="__span-65-25"><a id="__codelineno-65-25" name="__codelineno-65-25" href="#__codelineno-65-25"></a><span class="ow">is</span> <span class="n">a</span> <span class="n">vast</span> <span class="ow">and</span> <span class="n">diverse</span> <span class="n">ecosystem</span><span class="o">.</span> <span class="n">However</span><span class="p">,</span> <span class="n">it</span> <span class="n">faces</span> <span class="n">serious</span> <span class="n">threats</span> <span class="kn">from</span><span class="w"> </span><span class="nn">climate</span> <span class="n">change</span><span class="p">,</span>
</span><span id="__span-65-26"><a id="__codelineno-65-26" name="__codelineno-65-26" href="#__codelineno-65-26"></a><span class="n">ocean</span> <span class="n">acidification</span><span class="p">,</span> <span class="ow">and</span> <span class="n">coral</span> <span class="n">bleaching</span><span class="p">,</span> <span class="n">endangering</span> <span class="n">its</span> <span class="n">rich</span> <span class="n">marine</span> <span class="n">life</span><span class="o">.</span>
</span><span id="__span-65-27"><a id="__codelineno-65-27" name="__codelineno-65-27" href="#__codelineno-65-27"></a><span class="err">`</span>
</span><span id="__span-65-28"><a id="__codelineno-65-28" name="__codelineno-65-28" href="#__codelineno-65-28"></a> <span class="n">reference</span> <span class="o">:=</span> <span class="err">`</span>
</span><span id="__span-65-29"><a id="__codelineno-65-29" name="__codelineno-65-29" href="#__codelineno-65-29"></a><span class="n">The</span> <span class="n">Great</span> <span class="n">Barrier</span> <span class="n">Reef</span><span class="p">,</span> <span class="n">the</span> <span class="n">world</span><span class="s1">&#39;s largest coral reef system, is</span>
</span><span id="__span-65-30"><a id="__codelineno-65-30" name="__codelineno-65-30" href="#__codelineno-65-30"></a><span class="n">located</span> <span class="n">off</span> <span class="n">the</span> <span class="n">coast</span> <span class="n">of</span> <span class="n">Queensland</span><span class="p">,</span> <span class="n">Australia</span><span class="o">.</span> <span class="n">It</span><span class="s1">&#39;s a vast</span>
</span><span id="__span-65-31"><a id="__codelineno-65-31" name="__codelineno-65-31" href="#__codelineno-65-31"></a><span class="n">ecosystem</span> <span class="n">spanning</span> <span class="n">over</span> <span class="mi">2</span><span class="p">,</span><span class="mi">300</span> <span class="n">kilometers</span> <span class="k">with</span> <span class="n">thousands</span> <span class="n">of</span> <span class="n">reefs</span>
</span><span id="__span-65-32"><a id="__codelineno-65-32" name="__codelineno-65-32" href="#__codelineno-65-32"></a><span class="ow">and</span> <span class="n">islands</span><span class="o">.</span> <span class="n">While</span> <span class="n">it</span> <span class="n">harbors</span> <span class="n">an</span> <span class="n">incredible</span> <span class="n">diversity</span> <span class="n">of</span> <span class="n">marine</span>
</span><span id="__span-65-33"><a id="__codelineno-65-33" name="__codelineno-65-33" href="#__codelineno-65-33"></a><span class="n">life</span><span class="p">,</span> <span class="n">including</span> <span class="n">endangered</span> <span class="n">species</span><span class="p">,</span> <span class="n">it</span> <span class="n">faces</span> <span class="n">serious</span> <span class="n">threats</span> <span class="kn">from</span>
</span><span id="__span-65-34"><a id="__codelineno-65-34" name="__codelineno-65-34" href="#__codelineno-65-34"></a><span class="nn">climate</span> <span class="n">change</span><span class="p">,</span> <span class="n">ocean</span> <span class="n">acidification</span><span class="p">,</span> <span class="ow">and</span> <span class="n">coral</span> <span class="n">bleaching</span><span class="o">.</span>
</span><span id="__span-65-35"><a id="__codelineno-65-35" name="__codelineno-65-35" href="#__codelineno-65-35"></a><span class="err">`</span>
</span><span id="__span-65-36"><a id="__codelineno-65-36" name="__codelineno-65-36" href="#__codelineno-65-36"></a> <span class="n">req</span> <span class="o">:=</span> <span class="n">aiplatformpb</span><span class="o">.</span><span class="n">EvaluateInstancesRequest</span><span class="p">{</span>
</span><span id="__span-65-37"><a id="__codelineno-65-37" name="__codelineno-65-37" href="#__codelineno-65-37"></a> <span class="n">Location</span><span class="p">:</span> <span class="n">fmt</span><span class="o">.</span><span class="n">Sprintf</span><span class="p">(</span><span class="s2">&quot;projects/</span><span class="si">%s</span><span class="s2">/locations/</span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">projectID</span><span class="p">,</span> <span class="n">location</span><span class="p">),</span>
</span><span id="__span-65-38"><a id="__codelineno-65-38" name="__codelineno-65-38" href="#__codelineno-65-38"></a> <span class="n">MetricInputs</span><span class="p">:</span> <span class="o">&amp;</span><span class="n">aiplatformpb</span><span class="o">.</span><span class="n">EvaluateInstancesRequest_RougeInput</span><span class="p">{</span>
</span><span id="__span-65-39"><a id="__codelineno-65-39" name="__codelineno-65-39" href="#__codelineno-65-39"></a> <span class="n">RougeInput</span><span class="p">:</span> <span class="o">&amp;</span><span class="n">aiplatformpb</span><span class="o">.</span><span class="n">RougeInput</span><span class="p">{</span>
</span><span id="__span-65-40"><a id="__codelineno-65-40" name="__codelineno-65-40" href="#__codelineno-65-40"></a> <span class="o">//</span> <span class="n">Check</span> <span class="n">the</span> <span class="n">API</span> <span class="n">reference</span> <span class="k">for</span> <span class="n">the</span> <span class="nb">list</span> <span class="n">of</span> <span class="n">supported</span> <span class="n">ROUGE</span> <span class="n">metric</span> <span class="n">types</span><span class="p">:</span>
</span><span id="__span-65-41"><a id="__codelineno-65-41" name="__codelineno-65-41" href="#__codelineno-65-41"></a> <span class="o">//</span> <span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">cloud</span><span class="o">.</span><span class="n">google</span><span class="o">.</span><span class="n">com</span><span class="o">/</span><span class="n">vertex</span><span class="o">-</span><span class="n">ai</span><span class="o">/</span><span class="n">docs</span><span class="o">/</span><span class="n">reference</span><span class="o">/</span><span class="n">rpc</span><span class="o">/</span><span class="n">google</span><span class="o">.</span><span class="n">cloud</span><span class="o">.</span><span class="n">aiplatform</span><span class="o">.</span><span class="n">v1beta1</span><span class="c1">#rougespec</span>
</span><span id="__span-65-42"><a id="__codelineno-65-42" name="__codelineno-65-42" href="#__codelineno-65-42"></a> <span class="n">MetricSpec</span><span class="p">:</span> <span class="o">&amp;</span><span class="n">aiplatformpb</span><span class="o">.</span><span class="n">RougeSpec</span><span class="p">{</span>
</span><span id="__span-65-43"><a id="__codelineno-65-43" name="__codelineno-65-43" href="#__codelineno-65-43"></a> <span class="n">RougeType</span><span class="p">:</span> <span class="s2">&quot;rouge1&quot;</span><span class="p">,</span>
</span><span id="__span-65-44"><a id="__codelineno-65-44" name="__codelineno-65-44" href="#__codelineno-65-44"></a> <span class="p">},</span>
</span><span id="__span-65-45"><a id="__codelineno-65-45" name="__codelineno-65-45" href="#__codelineno-65-45"></a> <span class="n">Instances</span><span class="p">:</span> <span class="p">[]</span><span class="o">*</span><span class="n">aiplatformpb</span><span class="o">.</span><span class="n">RougeInstance</span><span class="p">{</span>
</span><span id="__span-65-46"><a id="__codelineno-65-46" name="__codelineno-65-46" href="#__codelineno-65-46"></a> <span class="p">{</span>
</span><span id="__span-65-47"><a id="__codelineno-65-47" name="__codelineno-65-47" href="#__codelineno-65-47"></a> <span class="n">Prediction</span><span class="p">:</span> <span class="o">&amp;</span><span class="n">modelResponse</span><span class="p">,</span>
</span><span id="__span-65-48"><a id="__codelineno-65-48" name="__codelineno-65-48" href="#__codelineno-65-48"></a> <span class="n">Reference</span><span class="p">:</span> <span class="o">&amp;</span><span class="n">reference</span><span class="p">,</span>
</span><span id="__span-65-49"><a id="__codelineno-65-49" name="__codelineno-65-49" href="#__codelineno-65-49"></a> <span class="p">},</span>
</span><span id="__span-65-50"><a id="__codelineno-65-50" name="__codelineno-65-50" href="#__codelineno-65-50"></a> <span class="p">},</span>
</span><span id="__span-65-51"><a id="__codelineno-65-51" name="__codelineno-65-51" href="#__codelineno-65-51"></a> <span class="p">},</span>
</span><span id="__span-65-52"><a id="__codelineno-65-52" name="__codelineno-65-52" href="#__codelineno-65-52"></a> <span class="p">},</span>
</span><span id="__span-65-53"><a id="__codelineno-65-53" name="__codelineno-65-53" href="#__codelineno-65-53"></a> <span class="p">}</span>
</span><span id="__span-65-54"><a id="__codelineno-65-54" name="__codelineno-65-54" href="#__codelineno-65-54"></a>
</span><span id="__span-65-55"><a id="__codelineno-65-55" name="__codelineno-65-55" href="#__codelineno-65-55"></a> <span class="n">resp</span><span class="p">,</span> <span class="n">err</span> <span class="o">:=</span> <span class="n">client</span><span class="o">.</span><span class="n">EvaluateInstances</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">req</span><span class="p">)</span>
</span><span id="__span-65-56"><a id="__codelineno-65-56" name="__codelineno-65-56" href="#__codelineno-65-56"></a> <span class="k">if</span> <span class="n">err</span> <span class="o">!=</span> <span class="n">nil</span> <span class="p">{</span>
</span><span id="__span-65-57"><a id="__codelineno-65-57" name="__codelineno-65-57" href="#__codelineno-65-57"></a> <span class="k">return</span> <span class="n">fmt</span><span class="o">.</span><span class="n">Errorf</span><span class="p">(</span><span class="s2">&quot;evaluateInstances failed: %v&quot;</span><span class="p">,</span> <span class="n">err</span><span class="p">)</span>
</span><span id="__span-65-58"><a id="__codelineno-65-58" name="__codelineno-65-58" href="#__codelineno-65-58"></a> <span class="p">}</span>
</span><span id="__span-65-59"><a id="__codelineno-65-59" name="__codelineno-65-59" href="#__codelineno-65-59"></a>
</span><span id="__span-65-60"><a id="__codelineno-65-60" name="__codelineno-65-60" href="#__codelineno-65-60"></a> <span class="n">fmt</span><span class="o">.</span><span class="n">Fprintln</span><span class="p">(</span><span class="n">w</span><span class="p">,</span> <span class="s2">&quot;evaluation results:&quot;</span><span class="p">)</span>
</span><span id="__span-65-61"><a id="__codelineno-65-61" name="__codelineno-65-61" href="#__codelineno-65-61"></a> <span class="n">fmt</span><span class="o">.</span><span class="n">Fprintln</span><span class="p">(</span><span class="n">w</span><span class="p">,</span> <span class="n">resp</span><span class="o">.</span><span class="n">GetRougeResults</span><span class="p">()</span><span class="o">.</span><span class="n">GetRougeMetricValues</span><span class="p">())</span>
</span><span id="__span-65-62"><a id="__codelineno-65-62" name="__codelineno-65-62" href="#__codelineno-65-62"></a> <span class="o">//</span> <span class="n">Example</span> <span class="n">response</span><span class="p">:</span>
</span><span id="__span-65-63"><a id="__codelineno-65-63" name="__codelineno-65-63" href="#__codelineno-65-63"></a> <span class="o">//</span> <span class="p">[</span><span class="n">score</span><span class="p">:</span><span class="mf">0.6597938</span><span class="p">]</span>
</span><span id="__span-65-64"><a id="__codelineno-65-64" name="__codelineno-65-64" href="#__codelineno-65-64"></a>
</span><span id="__span-65-65"><a id="__codelineno-65-65" name="__codelineno-65-65" href="#__codelineno-65-65"></a> <span class="k">return</span> <span class="n">nil</span>
</span><span id="__span-65-66"><a id="__codelineno-65-66" name="__codelineno-65-66" href="#__codelineno-65-66"></a><span class="p">}</span>
</span></code></pre></div>
<h2 id="whats-next">What's next<a class="headerlink" href="#whats-next" title="Permanent link">&para;</a></h2>
<ul>
<li>For detailed documentation, see <a href="https://cloud.google.com/vertex-ai/generative-ai/docs/models/online-pipeline-services">Run an evaluation</a>.</li>
</ul>







  
  






                
              </article>
            </div>
          
          
  <script>var tabs=__md_get("__tabs");if(Array.isArray(tabs))e:for(var set of document.querySelectorAll(".tabbed-set")){var labels=set.querySelector(".tabbed-labels");for(var tab of tabs)for(var label of labels.getElementsByTagName("label"))if(label.innerText.trim()===tab){var input=document.getElementById(label.htmlFor);input.checked=!0;continue e}}</script>

<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"/></svg>
  Back to top
</button>
        
      </main>
      
        <footer class="md-footer">
  
    
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
      <div class="md-progress" data-md-component="progress" role="progressbar"></div>
    
    
    
      
      <script id="__config" type="application/json">{"base": "../..", "features": ["content.code.annotate", "content.code.copy", "content.code.select", "content.tabs.link", "content.action.edit", "navigation.footer", "navigation.indexes", "navigation.instant", "navigation.instant.progress", "navigation.path", "navigation.top", "navigation.tracking", "toc.follow", "navigation.tabs", "navigation.sections", "navigation.tracking", "navigation.top", "search.suggest", "search.highlight"], "search": "../../assets/javascripts/workers/search.d50fe291.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script>
    
    
      <script src="../../assets/javascripts/bundle.13a4f30d.min.js"></script>
      
        <script src="../../js/chat-widget/gemini-client.js"></script>
      
        <script src="../../js/chat-widget/init.js"></script>
      
        <script src="../../js/chat-widget/setup-key.js"></script>
      
        <script src="../../js/chat-widget-helper.js"></script>
      
    
  </body>
</html>